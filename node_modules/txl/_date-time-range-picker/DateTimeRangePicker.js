'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.DEFAULT_ITEMS = exports.DEFAULT_END_DATE = exports.DEFAULT_START_DATE = exports.DATE_QUERY_FORMAT = exports.DATE_RANGE_FORMAT = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _moment = require('moment');

var _moment2 = _interopRequireDefault(_moment);

var _Base = require('../base/Base');

var _DateTimeRangePicker = require('./DateTimeRangePicker.style');

var _TimezonePicker = require('./_TimezonePicker');

var _TimezonePicker2 = _interopRequireDefault(_TimezonePicker);

var _DateRangePicker = require('./_DateRangePicker');

var _DateRangePicker2 = _interopRequireDefault(_DateRangePicker);

var _TimeRangePicker = require('./_TimeRangePicker');

var _TimeRangePicker2 = _interopRequireDefault(_TimeRangePicker);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var DATE_RANGE_FORMAT = 'll';
var DATE_QUERY_FORMAT = 'YYYY-MM-DD HH:mm:ss';

var DEFAULT_START_DATE = (0, _moment2.default)().startOf('day');
var DEFAULT_END_DATE = (0, _moment2.default)().endOf('day');

var DEFAULT_ITEMS = {
  endDateTime: DEFAULT_END_DATE.format(DATE_QUERY_FORMAT),
  locale: {
    label: '(UTC -05:00) America/New_York',
    timeZone: 'America/New_York',
    value: '(UTC -05:00) America/New_York'
  },
  preset: {
    endDate: DEFAULT_END_DATE,
    label: 'Today',
    range: (0, _moment2.default)().format(DATE_RANGE_FORMAT) + ' - ' + (0, _moment2.default)().format(DATE_RANGE_FORMAT),
    startDate: DEFAULT_START_DATE,
    value: 'today'
  },
  startDateTime: DEFAULT_START_DATE.format(DATE_QUERY_FORMAT)
};

exports.DATE_RANGE_FORMAT = DATE_RANGE_FORMAT;
exports.DATE_QUERY_FORMAT = DATE_QUERY_FORMAT;
exports.DEFAULT_START_DATE = DEFAULT_START_DATE;
exports.DEFAULT_END_DATE = DEFAULT_END_DATE;
exports.DEFAULT_ITEMS = DEFAULT_ITEMS;

var TxlDateTimeRangePicker = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlDateTimeRangePicker, _React$Component);

  function TxlDateTimeRangePicker() {
    var _ref;

    var _temp, _this, _ret;

    (0, _classCallCheck3.default)(this, TxlDateTimeRangePicker);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlDateTimeRangePicker.__proto__ || (0, _getPrototypeOf2.default)(TxlDateTimeRangePicker)).call.apply(_ref, [this].concat(args))), _this), _this.state = {
      items: _this.props.items || DEFAULT_ITEMS,
      presetPickerOpen: false,
      timeRangePickerOpen: false,
      timezonePickerOpen: false
    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);
  }

  (0, _createClass3.default)(TxlDateTimeRangePicker, [{
    key: '_handleChange',
    value: function _handleChange(items) {
      this.setState({ items: items });
      this.props.onChange(items);
    }
  }, {
    key: '_handleDropdown',
    value: function _handleDropdown(type) {
      var _this2 = this;

      return function (value) {
        _this2.setState({
          presetPickerOpen: type === 'preset' ? value.open : false,
          timeRangePickerOpen: type === 'time_range' ? value.open : false,
          timezonePickerOpen: type === 'timezone' ? value.open : false
        });
      };
    }
  }, {
    key: 'render',
    value: function render() {
      var _state = this.state,
          items = _state.items,
          presetPickerOpen = _state.presetPickerOpen,
          timeRangePickerOpen = _state.timeRangePickerOpen,
          timezonePickerOpen = _state.timezonePickerOpen;
      var _props = this.props,
          buttonItems = _props.buttonItems,
          presets = _props.presets,
          timeRangeTitle = _props.timeRangeTitle,
          withTimeRange = _props.withTimeRange;


      return _react2.default.createElement(
        'div',
        { 'data-component': 'TxlDateTimeRangePicker' },
        _react2.default.createElement(
          'div',
          { style: _DateTimeRangePicker.BUTTON_ROW },
          _react2.default.createElement(_DateRangePicker2.default, {
            buttonItems: buttonItems,
            items: items,
            onChange: this._handleChange,
            open: presetPickerOpen,
            presets: presets,
            updateDropdown: this._handleDropdown('preset')
          }),
          _react2.default.createElement(
            'div',
            { style: _DateTimeRangePicker.CUSTOM_DATE_RANGE },
            withTimeRange && _react2.default.createElement(_TimeRangePicker2.default, {
              items: items,
              onChange: this._handleChange,
              open: timeRangePickerOpen,
              title: timeRangeTitle,
              updateDropdown: this._handleDropdown('time_range')
            }),
            _react2.default.createElement(_TimezonePicker2.default, {
              items: items,
              onChange: this._handleChange,
              open: timezonePickerOpen,
              updateDropdown: this._handleDropdown('timezone')
            })
          )
        )
      );
    }
  }]);
  return TxlDateTimeRangePicker;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_handleChange', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleChange'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDropdown', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDropdown'), _class2.prototype)), _class2)) || _class;

TxlDateTimeRangePicker.propTypes = {
  buttonItems: require('react').PropTypes.arrayOf(require('react').PropTypes.any),
  items: require('react').PropTypes.object,
  onChange: require('react').PropTypes.func.isRequired,
  presets: require('react').PropTypes.arrayOf(require('react').PropTypes.object),
  timeRangeTitle: require('react').PropTypes.any,
  withTimeRange: require('react').PropTypes.bool
};
exports.default = TxlDateTimeRangePicker;


TxlDateTimeRangePicker.defaultProps = {
  onChange: _Base.NOOP
};
;

var _temp2 = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(DATE_RANGE_FORMAT, 'DATE_RANGE_FORMAT', 'src/_date-time-range-picker/DateTimeRangePicker.jsx');

  __REACT_HOT_LOADER__.register(DATE_QUERY_FORMAT, 'DATE_QUERY_FORMAT', 'src/_date-time-range-picker/DateTimeRangePicker.jsx');

  __REACT_HOT_LOADER__.register(DEFAULT_START_DATE, 'DEFAULT_START_DATE', 'src/_date-time-range-picker/DateTimeRangePicker.jsx');

  __REACT_HOT_LOADER__.register(DEFAULT_END_DATE, 'DEFAULT_END_DATE', 'src/_date-time-range-picker/DateTimeRangePicker.jsx');

  __REACT_HOT_LOADER__.register(DEFAULT_ITEMS, 'DEFAULT_ITEMS', 'src/_date-time-range-picker/DateTimeRangePicker.jsx');

  __REACT_HOT_LOADER__.register(TxlDateTimeRangePicker, 'TxlDateTimeRangePicker', 'src/_date-time-range-picker/DateTimeRangePicker.jsx');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fZGF0ZS10aW1lLXJhbmdlLXBpY2tlci9EYXRlVGltZVJhbmdlUGlja2VyLmpzeCJdLCJuYW1lcyI6WyJEQVRFX1JBTkdFX0ZPUk1BVCIsIkRBVEVfUVVFUllfRk9STUFUIiwiREVGQVVMVF9TVEFSVF9EQVRFIiwic3RhcnRPZiIsIkRFRkFVTFRfRU5EX0RBVEUiLCJlbmRPZiIsIkRFRkFVTFRfSVRFTVMiLCJlbmREYXRlVGltZSIsImZvcm1hdCIsImxvY2FsZSIsImxhYmVsIiwidGltZVpvbmUiLCJ2YWx1ZSIsInByZXNldCIsImVuZERhdGUiLCJyYW5nZSIsInN0YXJ0RGF0ZSIsInN0YXJ0RGF0ZVRpbWUiLCJUeGxEYXRlVGltZVJhbmdlUGlja2VyIiwic3RhdGUiLCJpdGVtcyIsInByb3BzIiwicHJlc2V0UGlja2VyT3BlbiIsInRpbWVSYW5nZVBpY2tlck9wZW4iLCJ0aW1lem9uZVBpY2tlck9wZW4iLCJzZXRTdGF0ZSIsIm9uQ2hhbmdlIiwidHlwZSIsIm9wZW4iLCJidXR0b25JdGVtcyIsInByZXNldHMiLCJ0aW1lUmFuZ2VUaXRsZSIsIndpdGhUaW1lUmFuZ2UiLCJfaGFuZGxlQ2hhbmdlIiwiX2hhbmRsZURyb3Bkb3duIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7QUFJQTs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsSUFBTUEsb0JBQW9CLElBQTFCO0FBQ0EsSUFBTUMsb0JBQW9CLHFCQUExQjs7QUFFQSxJQUFNQyxxQkFBcUIsd0JBQVNDLE9BQVQsQ0FBaUIsS0FBakIsQ0FBM0I7QUFDQSxJQUFNQyxtQkFBbUIsd0JBQVNDLEtBQVQsQ0FBZSxLQUFmLENBQXpCOztBQUVBLElBQU1DLGdCQUFnQjtBQUNwQkMsZUFBYUgs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aUI7O2dDQUVBQyxrQjs7Z0NBQ0FFLGdCOztnQ0FFQUUsYTs7Z0NBMENlWSxzQiIsImZpbGUiOiJEYXRlVGltZVJhbmdlUGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmltcG9ydCB7XG4gIGF1dG9iaW5kLFxuICBOT09QLFxufSBmcm9tICcuLi9iYXNlL0Jhc2UnO1xuaW1wb3J0IHsgQlVUVE9OX1JPVywgQ1VTVE9NX0RBVEVfUkFOR0UgfSBmcm9tICcuL0RhdGVUaW1lUmFuZ2VQaWNrZXIuc3R5bGUnO1xuaW1wb3J0IFRpbWV6b25lUGlja2VyIGZyb20gJy4vX1RpbWV6b25lUGlja2VyJztcbmltcG9ydCBEYXRlUmFuZ2VQaWNrZXIgZnJvbSAnLi9fRGF0ZVJhbmdlUGlja2VyJztcbmltcG9ydCBUaW1lUmFuZ2VQaWNrZXIgZnJvbSAnLi9fVGltZVJhbmdlUGlja2VyJztcblxuY29uc3QgREFURV9SQU5HRV9GT1JNQVQgPSAnbGwnO1xuY29uc3QgREFURV9RVUVSWV9GT1JNQVQgPSAnWVlZWS1NTS1ERCBISDptbTpzcyc7XG5cbmNvbnN0IERFRkFVTFRfU1RBUlRfREFURSA9IG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xuY29uc3QgREVGQVVMVF9FTkRfREFURSA9IG1vbWVudCgpLmVuZE9mKCdkYXknKTtcblxuY29uc3QgREVGQVVMVF9JVEVNUyA9IHtcbiAgZW5kRGF0ZVRpbWU6IERFRkFVTFRfRU5EX0RBVEUuZm9ybWF0KERBVEVfUVVFUllfRk9STUFUKSxcbiAgbG9jYWxlOiB7XG4gICAgbGFiZWw6ICcoVVRDIC0wNTowMCkgQW1lcmljYS9OZXdfWW9yaycsXG4gICAgdGltZVpvbmU6ICdBbWVyaWNhL05ld19Zb3JrJyxcbiAgICB2YWx1ZTogJyhVVEMgLTA1OjAwKSBBbWVyaWNhL05ld19Zb3JrJyxcbiAgfSxcbiAgcHJlc2V0OiB7XG4gICAgZW5kRGF0ZTogREVGQVVMVF9FTkRfREFURSxcbiAgICBsYWJlbDogJ1RvZGF5JyxcbiAgICByYW5nZTogYCR7bW9tZW50KCkuZm9ybWF0KERBVEVfUkFOR0VfRk9STUFUKX0gLSAke21vbWVudCgpLmZvcm1hdChEQVRFX1JBTkdFX0ZPUk1BVCl9YCxcbiAgICBzdGFydERhdGU6IERFRkFVTFRfU1RBUlRfREFURSxcbiAgICB2YWx1ZTogJ3RvZGF5JyxcbiAgfSxcbiAgc3RhcnREYXRlVGltZTogREVGQVVMVF9TVEFSVF9EQVRFLmZvcm1hdChEQVRFX1FVRVJZX0ZPUk1BVCksXG59O1xuXG5leHBvcnQge1xuICBEQVRFX1JBTkdFX0ZPUk1BVCxcbiAgREFURV9RVUVSWV9GT1JNQVQsXG4gIERFRkFVTFRfU1RBUlRfREFURSxcbiAgREVGQVVMVF9FTkRfREFURSxcbiAgREVGQVVMVF9JVEVNUyxcbn07XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGJ1dHRvbkl0ZW1zPzogQXJyYXk8bWl4ZWQ+LFxuICBpdGVtcz86IE9iamVjdCxcbiAgb25DaGFuZ2U6IChzdGF0dXM6IE9iamVjdCkgPT4gdm9pZCxcbiAgcHJlc2V0cz86IEFycmF5PE9iamVjdD4sXG4gIHRpbWVSYW5nZVRpdGxlPzogU3RyaW5nLFxuICB3aXRoVGltZVJhbmdlPzogYm9vbGVhbixcbn07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIGl0ZW1zOiBPYmplY3QsXG4gIHByZXNldFBpY2tlck9wZW46IGJvb2xlYW4sXG4gIHRpbWVSYW5nZVBpY2tlck9wZW46IGJvb2xlYW4sXG4gIHRpbWV6b25lUGlja2VyT3BlbjogYm9vbGVhbixcbn07XG5cbkBSYWRpdW1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR4bERhdGVUaW1lUmFuZ2VQaWNrZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiBTdGF0ZSA9IHtcbiAgICBpdGVtczogdGhpcy5wcm9wcy5pdGVtcyB8fCBERUZBVUxUX0lURU1TLFxuICAgIHByZXNldFBpY2tlck9wZW46IGZhbHNlLFxuICAgIHRpbWVSYW5nZVBpY2tlck9wZW46IGZhbHNlLFxuICAgIHRpbWV6b25lUGlja2VyT3BlbjogZmFsc2UsXG4gIH07XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVDaGFuZ2UoaXRlbXM6IE9iamVjdCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBpdGVtcyB9KTtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKGl0ZW1zKTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRHJvcGRvd24odHlwZTogU3RyaW5nKSB7XG4gICAgcmV0dXJuICh2YWx1ZTogT2JqZWN0KSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcHJlc2V0UGlja2VyT3BlbjogdHlwZSA9PT0gJ3ByZXNldCcgPyB2YWx1ZS5vcGVuIDogZmFsc2UsXG4gICAgICAgIHRpbWVSYW5nZVBpY2tlck9wZW46IHR5cGUgPT09ICd0aW1lX3JhbmdlJyA/IHZhbHVlLm9wZW4gOiBmYWxzZSxcbiAgICAgICAgdGltZXpvbmVQaWNrZXJPcGVuOiB0eXBlID09PSAndGltZXpvbmUnID8gdmFsdWUub3BlbiA6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBpdGVtcyxcbiAgICAgIHByZXNldFBpY2tlck9wZW4sXG4gICAgICB0aW1lUmFuZ2VQaWNrZXJPcGVuLFxuICAgICAgdGltZXpvbmVQaWNrZXJPcGVuLFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHtcbiAgICAgIGJ1dHRvbkl0ZW1zLFxuICAgICAgcHJlc2V0cyxcbiAgICAgIHRpbWVSYW5nZVRpdGxlLFxuICAgICAgd2l0aFRpbWVSYW5nZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtY29tcG9uZW50PVwiVHhsRGF0ZVRpbWVSYW5nZVBpY2tlclwiPlxuICAgICAgICA8ZGl2IHN0eWxlPXtCVVRUT05fUk9XfT5cbiAgICAgICAgICA8RGF0ZVJhbmdlUGlja2VyXG4gICAgICAgICAgICBidXR0b25JdGVtcz17YnV0dG9uSXRlbXN9XG4gICAgICAgICAgICBpdGVtcz17aXRlbXN9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgb3Blbj17cHJlc2V0UGlja2VyT3Blbn1cbiAgICAgICAgICAgIHByZXNldHM9e3ByZXNldHN9XG4gICAgICAgICAgICB1cGRhdGVEcm9wZG93bj17dGhpcy5faGFuZGxlRHJvcGRvd24oJ3ByZXNldCcpfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGRpdiBzdHlsZT17Q1VTVE9NX0RBVEVfUkFOR0V9PlxuICAgICAgICAgICAge3dpdGhUaW1lUmFuZ2UgJiZcbiAgICAgICAgICAgICAgPFRpbWVSYW5nZVBpY2tlclxuICAgICAgICAgICAgICAgIGl0ZW1zPXtpdGVtc31cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9wZW49e3RpbWVSYW5nZVBpY2tlck9wZW59XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpbWVSYW5nZVRpdGxlfVxuICAgICAgICAgICAgICAgIHVwZGF0ZURyb3Bkb3duPXt0aGlzLl9oYW5kbGVEcm9wZG93bigndGltZV9yYW5nZScpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgPFRpbWV6b25lUGlja2VyXG4gICAgICAgICAgICAgIGl0ZW1zPXtpdGVtc31cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgb3Blbj17dGltZXpvbmVQaWNrZXJPcGVufVxuICAgICAgICAgICAgICB1cGRhdGVEcm9wZG93bj17dGhpcy5faGFuZGxlRHJvcGRvd24oJ3RpbWV6b25lJyl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuVHhsRGF0ZVRpbWVSYW5nZVBpY2tlci5kZWZhdWx0UHJvcHMgPSB7XG4gIG9uQ2hhbmdlOiBOT09QLFxufTtcbiJdfQ==