'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _DateTimeRangePicker = require('./DateTimeRangePicker.style');

var _TimeZones = require('../constants/_TimeZones');

var _theme = require('../styles/theme');

var _ButtonSelect = require('../dropdowns/ButtonSelect');

var _ButtonSelect2 = _interopRequireDefault(_ButtonSelect);

var _ArrowDown = require('../icons/ArrowDown');

var _ArrowDown2 = _interopRequireDefault(_ArrowDown);

var _ArrowUp = require('../icons/ArrowUp');

var _ArrowUp2 = _interopRequireDefault(_ArrowUp);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var TxlTimezonePicker = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlTimezonePicker, _React$Component);

  function TxlTimezonePicker() {
    var _ref;

    var _temp, _this, _ret;

    (0, _classCallCheck3.default)(this, TxlTimezonePicker);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlTimezonePicker.__proto__ || (0, _getPrototypeOf2.default)(TxlTimezonePicker)).call.apply(_ref, [this].concat(args))), _this), _this.state = { timezoneSearch: '' }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);
  }

  (0, _createClass3.default)(TxlTimezonePicker, [{
    key: '_getTimezones',
    value: function _getTimezones() {
      var timezoneSearch = this.state.timezoneSearch;
      var items = this.props.items;
      // extract minutes regexp, like ':00'

      var re = /:\d{2}/;
      var match = items.locale.value.match(re);
      var minuteOffset = void 0;
      if (match) {
        minuteOffset = match[0];
      }
      return _TimeZones.TIME_ZONE_LIST_ITEMS.reduce(function (prev, tz) {
        // filter out minute offsets that don't match
        if (minuteOffset && tz.value.indexOf(minuteOffset) === -1) {
          return prev;
        }
        var searchTerm = timezoneSearch.toLowerCase();
        var labelCheck = tz.label.toLowerCase().includes(searchTerm);
        var timezoneCheck = tz.timeZone.toLowerCase().includes(searchTerm);
        if (labelCheck || timezoneCheck) {
          return prev.concat(tz);
        }
        return prev;
      }, []);
    }
  }, {
    key: '_toggleTimezone',
    value: function _toggleTimezone() {
      this.props.updateDropdown({ open: !this.props.open });
    }
  }, {
    key: '_handleTimezoneSearch',
    value: function _handleTimezoneSearch(search) {
      this.setState({ timezoneSearch: search.value });
    }
  }, {
    key: '_handleTimezoneSelect',
    value: function _handleTimezoneSelect(tz) {
      var _props = this.props,
          items = _props.items,
          onChange = _props.onChange;

      var newItems = items;
      newItems.locale = tz;
      onChange(newItems);
      this._toggleTimezone();
    }
  }, {
    key: 'renderIcon',
    value: function renderIcon() {
      return this.props.open ? _react2.default.createElement(_ArrowDown2.default, { color: _theme.COLOR_NEUTRAL[400] }) : _react2.default.createElement(_ArrowUp2.default, { color: _theme.COLOR_NEUTRAL[400] });
    }
  }, {
    key: 'render',
    value: function render() {
      var timezoneSearch = this.state.timezoneSearch;
      var _props2 = this.props,
          items = _props2.items,
          open = _props2.open;


      return _react2.default.createElement(
        'div',
        { 'data-component': 'TxlTimezonePicker' },
        _react2.default.createElement(
          'div',
          { style: _DateTimeRangePicker.TIMEZONE_WRAPPER },
          _react2.default.createElement(
            'div',
            { style: _DateTimeRangePicker.TIMEZONE_SELECT },
            _react2.default.createElement(_ButtonSelect2.default, {
              buttonText: items.locale.timeZone,
              dropdownWidth: '350px',
              dropdownAttachmentLocation: 'right',
              items: this._getTimezones(),
              onItemSelect: this._handleTimezoneSelect,
              onSearchChange: this._handleTimezoneSearch,
              open: open,
              searchPlaceholder: 'Search Timezone',
              searchValue: timezoneSearch,
              showSearch: true,
              value: items.locale.value
            })
          ),
          _react2.default.createElement(
            'div',
            {
              style: _DateTimeRangePicker.TIMEZONE,
              onClick: this._toggleTimezone
            },
            items.locale.label,
            _react2.default.createElement(
              'span',
              { style: _DateTimeRangePicker.BUTTON },
              this.renderIcon()
            )
          )
        )
      );
    }
  }]);
  return TxlTimezonePicker;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_getTimezones', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_getTimezones'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_toggleTimezone', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_toggleTimezone'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleTimezoneSearch', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleTimezoneSearch'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleTimezoneSelect', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleTimezoneSelect'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, 'renderIcon', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, 'renderIcon'), _class2.prototype)), _class2)) || _class;

TxlTimezonePicker.propTypes = {
  items: require('react').PropTypes.object.isRequired,
  onChange: require('react').PropTypes.func.isRequired,
  open: require('react').PropTypes.bool,
  updateDropdown: require('react').PropTypes.func.isRequired
};
exports.default = TxlTimezonePicker;


TxlTimezonePicker.defaultProps = {
  items: {},
  onChange: _Base.NOOP,
  updateDropdown: _Base.NOOP
};
;

var _temp2 = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlTimezonePicker, 'TxlTimezonePicker', 'src/_date-time-range-picker/_TimezonePicker.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fZGF0ZS10aW1lLXJhbmdlLXBpY2tlci9fVGltZXpvbmVQaWNrZXIuanN4Il0sIm5hbWVzIjpbIlR4bFRpbWV6b25lUGlja2VyIiwic3RhdGUiLCJ0aW1lem9uZVNlYXJjaCIsIml0ZW1zIiwicHJvcHMiLCJyZSIsIm1hdGNoIiwibG9jYWxlIiwidmFsdWUiLCJtaW51dGVPZmZzZXQiLCJyZWR1Y2UiLCJwcmV2IiwidHoiLCJpbmRleE9mIiwic2VhcmNoVGVybSIsInRvTG93ZXJDYXNlIiwibGFiZWxDaGVjayIsImxhYmVsIiwiaW5jbHVkZXMiLCJ0aW1lem9uZUNoZWNrIiwidGltZVpvbmUiLCJjb25jYXQiLCJ1cGRhdGVEcm9wZG93biIsIm9wZW4iLCJzZWFyY2giLCJzZXRTdGF0ZSIsIm9uQ2hhbmdlIiwibmV3SXRlbXMiLCJfdG9nZ2xlVGltZXpvbmUiLCJfZ2V0VGltZXpvbmVzIiwiX2hhbmRsZVRpbWV6b25lU2VsZWN0IiwiX2hhbmRsZVRpbWV6b25lU2VhcmNoIiwicmVuZGVySWNvbiIsIkNvbXBvbmVudCIsImRlZmF1bHRQcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOztBQUlBOztBQU1BOztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFjcUJBLGlCOzs7Ozs7Ozs7Ozs7OztrT0FFbkJDLEssR0FBZSxFQUFFQyxnQkFBZ0IsRUFBbEIsRTs7Ozs7b0NBR0M7QUFBQSxVQUNOQSxjQURNLEdBQ2EsS0FBS0QsS0FEbEIsQ0FDTkMsY0FETTtBQUFBLFVBRU5DLEtBRk0sR0FFSSxLQUFLQyxLQUZULENBRU5ELEtBRk07QUFHZDs7QUFDQSxVQUFNRSxLQUFLLFFBQVg7QUFDQSxVQUFNQyxRQUFRSCxNQUFNSSxNQUFOLENBQWFDLEtBQWIsQ0FBbUJGLEtBQW5CLENBQXlCRCxFQUF6QixD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Ozs7OztnQ0FwR3FCdEIsaUIiLCJmaWxlIjoiX1RpbWV6b25lUGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5cbmltcG9ydCB7XG4gIGF1dG9iaW5kLFxuICBOT09QLFxufSBmcm9tICcuLi9iYXNlL0Jhc2UnO1xuaW1wb3J0IHtcbiAgQlVUVE9OLFxuICBUSU1FWk9ORSxcbiAgVElNRVpPTkVfU0VMRUNULFxuICBUSU1FWk9ORV9XUkFQUEVSLFxufSBmcm9tICcuL0RhdGVUaW1lUmFuZ2VQaWNrZXIuc3R5bGUnO1xuaW1wb3J0IHsgVElNRV9aT05FX0xJU1RfSVRFTVMgfSBmcm9tICcuLi9jb25zdGFudHMvX1RpbWVab25lcyc7XG5pbXBvcnQgeyBDT0xPUl9ORVVUUkFMIH0gZnJvbSAnLi4vc3R5bGVzL3RoZW1lJztcbmltcG9ydCBCdXR0b25TZWxlY3QgZnJvbSAnLi4vZHJvcGRvd25zL0J1dHRvblNlbGVjdCc7XG5pbXBvcnQgQXJyb3dEb3duIGZyb20gJy4uL2ljb25zL0Fycm93RG93bic7XG5pbXBvcnQgQXJyb3dVcCBmcm9tICcuLi9pY29ucy9BcnJvd1VwJztcblxudHlwZSBQcm9wcyA9IHtcbiAgaXRlbXM6IE9iamVjdCxcbiAgb25DaGFuZ2U6IChzdGF0dXM6IE9iamVjdCkgPT4gdm9pZCxcbiAgb3Blbj86IGJvb2xlYW4sXG4gIHVwZGF0ZURyb3Bkb3duOiAoc3RhdHVzOiBPYmplY3QpID0+IHZvaWQsXG59O1xuXG50eXBlIFN0YXRlID0ge1xuICB0aW1lem9uZVNlYXJjaDogU3RyaW5nLFxufTtcblxuQFJhZGl1bVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHhsVGltZXpvbmVQaWNrZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiBTdGF0ZSA9IHsgdGltZXpvbmVTZWFyY2g6ICcnIH07XG5cbiAgQGF1dG9iaW5kXG4gIF9nZXRUaW1lem9uZXMoKSB7XG4gICAgY29uc3QgeyB0aW1lem9uZVNlYXJjaCB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGl0ZW1zIH0gPSB0aGlzLnByb3BzO1xuICAgIC8vIGV4dHJhY3QgbWludXRlcyByZWdleHAsIGxpa2UgJzowMCdcbiAgICBjb25zdCByZSA9IC86XFxkezJ9LztcbiAgICBjb25zdCBtYXRjaCA9IGl0ZW1zLmxvY2FsZS52YWx1ZS5tYXRjaChyZSk7XG4gICAgbGV0IG1pbnV0ZU9mZnNldDtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIG1pbnV0ZU9mZnNldCA9IG1hdGNoWzBdO1xuICAgIH1cbiAgICByZXR1cm4gVElNRV9aT05FX0xJU1RfSVRFTVMucmVkdWNlKChwcmV2LCB0eikgPT4ge1xuICAgICAgLy8gZmlsdGVyIG91dCBtaW51dGUgb2Zmc2V0cyB0aGF0IGRvbid0IG1hdGNoXG4gICAgICBpZiAobWludXRlT2Zmc2V0ICYmIHR6LnZhbHVlLmluZGV4T2YobWludXRlT2Zmc2V0KSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9XG4gICAgICBjb25zdCBzZWFyY2hUZXJtID0gdGltZXpvbmVTZWFyY2gudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IGxhYmVsQ2hlY2sgPSB0ei5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pO1xuICAgICAgY29uc3QgdGltZXpvbmVDaGVjayA9IHR6LnRpbWVab25lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSk7XG4gICAgICBpZiAobGFiZWxDaGVjayB8fCB0aW1lem9uZUNoZWNrKSB7XG4gICAgICAgIHJldHVybiBwcmV2LmNvbmNhdCh0eik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJldjtcbiAgICB9LCBbXSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX3RvZ2dsZVRpbWV6b25lKCkge1xuICAgIHRoaXMucHJvcHMudXBkYXRlRHJvcGRvd24oeyBvcGVuOiAhdGhpcy5wcm9wcy5vcGVuIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVUaW1lem9uZVNlYXJjaChzZWFyY2g6IE9iamVjdCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyB0aW1lem9uZVNlYXJjaDogc2VhcmNoLnZhbHVlIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVUaW1lem9uZVNlbGVjdCh0ejogT2JqZWN0KSB7XG4gICAgY29uc3Qge1xuICAgICAgaXRlbXMsXG4gICAgICBvbkNoYW5nZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBuZXdJdGVtcyA9IGl0ZW1zO1xuICAgIG5ld0l0ZW1zLmxvY2FsZSA9IHR6O1xuICAgIG9uQ2hhbmdlKG5ld0l0ZW1zKTtcbiAgICB0aGlzLl90b2dnbGVUaW1lem9uZSgpO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIHJlbmRlckljb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMub3BlbiA/XG4gICAgICA8QXJyb3dEb3duIGNvbG9yPXtDT0xPUl9ORVVUUkFMWzQwMF19IC8+XG4gICAgICA6XG4gICAgICA8QXJyb3dVcCBjb2xvcj17Q09MT1JfTkVVVFJBTFs0MDBdfSAvPjtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHRpbWV6b25lU2VhcmNoIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHtcbiAgICAgIGl0ZW1zLFxuICAgICAgb3BlbixcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtY29tcG9uZW50PVwiVHhsVGltZXpvbmVQaWNrZXJcIj5cbiAgICAgICAgPGRpdiBzdHlsZT17VElNRVpPTkVfV1JBUFBFUn0+XG4gICAgICAgICAgPGRpdiBzdHlsZT17VElNRVpPTkVfU0VMRUNUfT5cbiAgICAgICAgICAgIDxCdXR0b25TZWxlY3RcbiAgICAgICAgICAgICAgYnV0dG9uVGV4dD17aXRlbXMubG9jYWxlLnRpbWVab25lfVxuICAgICAgICAgICAgICBkcm9wZG93bldpZHRoPVwiMzUwcHhcIlxuICAgICAgICAgICAgICBkcm9wZG93bkF0dGFjaG1lbnRMb2NhdGlvbj1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgaXRlbXM9e3RoaXMuX2dldFRpbWV6b25lcygpfVxuICAgICAgICAgICAgICBvbkl0ZW1TZWxlY3Q9e3RoaXMuX2hhbmRsZVRpbWV6b25lU2VsZWN0fVxuICAgICAgICAgICAgICBvblNlYXJjaENoYW5nZT17dGhpcy5faGFuZGxlVGltZXpvbmVTZWFyY2h9XG4gICAgICAgICAgICAgIG9wZW49e29wZW59XG4gICAgICAgICAgICAgIHNlYXJjaFBsYWNlaG9sZGVyPVwiU2VhcmNoIFRpbWV6b25lXCJcbiAgICAgICAgICAgICAgc2VhcmNoVmFsdWU9e3RpbWV6b25lU2VhcmNofVxuICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgIHZhbHVlPXtpdGVtcy5sb2NhbGUudmFsdWV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIHN0eWxlPXtUSU1FWk9ORX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX3RvZ2dsZVRpbWV6b25lfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpdGVtcy5sb2NhbGUubGFiZWx9XG4gICAgICAgICAgICA8c3BhbiBzdHlsZT17QlVUVE9OfT5cbiAgICAgICAgICAgICAge3RoaXMucmVuZGVySWNvbigpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuVHhsVGltZXpvbmVQaWNrZXIuZGVmYXVsdFByb3BzID0ge1xuICBpdGVtczoge30sXG4gIG9uQ2hhbmdlOiBOT09QLFxuICB1cGRhdGVEcm9wZG93bjogTk9PUCxcbn07XG4iXX0=