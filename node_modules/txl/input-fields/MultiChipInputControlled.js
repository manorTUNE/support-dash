'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _map = require('lodash/map');

var _map2 = _interopRequireDefault(_map);

var _findIndex = require('lodash/findIndex');

var _findIndex2 = _interopRequireDefault(_findIndex);

var _Chip = require('../chip/Chip');

var _Chip2 = _interopRequireDefault(_Chip);

var _FlexBox = require('../layout/FlexBox');

var _FlexBox2 = _interopRequireDefault(_FlexBox);

var _InputFieldBase = require('../input-fields/_InputFieldBase');

var _InputFieldBase2 = _interopRequireDefault(_InputFieldBase);

var _ContentEditable = require('../input-fields/ContentEditable');

var _ContentEditable2 = _interopRequireDefault(_ContentEditable);

var _KeyCodes = require('../constants/KeyCodes');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var CONTAINER_PROPS = {
  alignItems: 'flex-end',
  flexWrap: 'nowrap',
  justifyContent: 'space-between'
};

var VALID_WORD_BREAK_CHARS = [_KeyCodes.COMMA, _KeyCodes.ENTER, _KeyCodes.SPACEBAR, _KeyCodes.TAB];

var _isWordBreak = function _isWordBreak(code) {
  return VALID_WORD_BREAK_CHARS.indexOf(code) >= 0;
};

var TxlMultiChipInputControlled = function (_React$Component) {
  (0, _inherits3.default)(TxlMultiChipInputControlled, _React$Component);

  function TxlMultiChipInputControlled() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlMultiChipInputControlled);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlMultiChipInputControlled.__proto__ || (0, _getPrototypeOf2.default)(TxlMultiChipInputControlled)).call.apply(_ref, [this].concat(args)));

    _this.focus = function () {
      return _this.__focus__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._buildChips = function () {
      return _this.___buildChips__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._focusNextChip = function () {
      return _this.___focusNextChip__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._focusPrevChip = function () {
      return _this.___focusPrevChip__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._getFocusedChipIndex = function () {
      return _this.___getFocusedChipIndex__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleBlur = function () {
      return _this.___handleBlur__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleClick = function () {
      return _this.___handleClick__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleContentEditableRef = function () {
      return _this.___handleContentEditableRef__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleInputFieldRef = function () {
      return _this.___handleInputFieldRef__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleFocus = function () {
      return _this.___handleFocus__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleInputKeyDown = function () {
      return _this.___handleInputKeyDown__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleKeyDown = function () {
      return _this.___handleKeyDown__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleTextChange = function () {
      return _this.___handleTextChange__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._chips = [];
    _this.state = { focused: false };
    return _this;
  }

  (0, _createClass3.default)(TxlMultiChipInputControlled, [{
    key: '__focus__REACT_HOT_LOADER__',
    value: function __focus__REACT_HOT_LOADER__() {
      return this.__focus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '__focus__REACT_HOT_LOADER__',
    value: function __focus__REACT_HOT_LOADER__() {
      this._contentEditable.focus && this._contentEditable.focus();
    }
  }, {
    key: '___buildChips__REACT_HOT_LOADER__',
    value: function ___buildChips__REACT_HOT_LOADER__() {
      return this.___buildChips__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___buildChips__REACT_HOT_LOADER__',
    value: function ___buildChips__REACT_HOT_LOADER__() {
      var _this2 = this;

      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var _props = this.props,
          disabled = _props.disabled,
          onChipDelete = _props.onChipDelete;

      this._chips = [];
      return (0, _map2.default)(values, function (val, i) {
        return _react2.default.createElement(
          _Chip2.default,
          {
            disabled: disabled,
            key: i,
            onDismiss: function onDismiss() {
              return onChipDelete(val, i);
            },
            ref: function ref(_ref2) {
              _this2._chips[i] = _ref2;
            }
          },
          val
        );
      });
    }
  }, {
    key: '___focusNextChip__REACT_HOT_LOADER__',
    value: function ___focusNextChip__REACT_HOT_LOADER__() {
      return this.___focusNextChip__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___focusNextChip__REACT_HOT_LOADER__',
    value: function ___focusNextChip__REACT_HOT_LOADER__() {
      var focusedChipIndex = this._getFocusedChipIndex();
      // nothing to do if no chips
      if (this._chips.length === 0) {
        return;
      }
      // if rightmost chip is already focused, focus input
      if (focusedChipIndex === this._chips.length - 1) {
        this.focus();
        return;
      }
      // otherwise, focus next chip to right
      this._chips[focusedChipIndex + 1].focus();
    }
  }, {
    key: '___focusPrevChip__REACT_HOT_LOADER__',
    value: function ___focusPrevChip__REACT_HOT_LOADER__() {
      return this.___focusPrevChip__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___focusPrevChip__REACT_HOT_LOADER__',
    value: function ___focusPrevChip__REACT_HOT_LOADER__() {
      var focusedChipIndex = this._getFocusedChipIndex();
      // nothing to do if no chips or leftmost chip is already focused
      if (this._chips.length === 0 || focusedChipIndex === 0) {
        return;
      }

      var chipToFocusIndex = focusedChipIndex === -1
      // focus rightmost chip to start
      ? this._chips.length - 1
      // focus next chip to left
      : focusedChipIndex - 1;

      this._chips[chipToFocusIndex].focus();
    }
  }, {
    key: '___getFocusedChipIndex__REACT_HOT_LOADER__',
    value: function ___getFocusedChipIndex__REACT_HOT_LOADER__() {
      return this.___getFocusedChipIndex__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___getFocusedChipIndex__REACT_HOT_LOADER__',
    value: function ___getFocusedChipIndex__REACT_HOT_LOADER__() {
      return (0, _findIndex2.default)(this._chips, function (chip) {
        return chip.hasFocus();
      });
    }
  }, {
    key: '___handleBlur__REACT_HOT_LOADER__',
    value: function ___handleBlur__REACT_HOT_LOADER__() {
      return this.___handleBlur__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleBlur__REACT_HOT_LOADER__',
    value: function ___handleBlur__REACT_HOT_LOADER__() {
      var _props2 = this.props,
          onBlur = _props2.onBlur,
          textValue = _props2.textValue;

      this.setState({ focused: false }, function () {
        return onBlur && onBlur({ value: textValue });
      });
    }
  }, {
    key: '___handleClick__REACT_HOT_LOADER__',
    value: function ___handleClick__REACT_HOT_LOADER__() {
      return this.___handleClick__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleClick__REACT_HOT_LOADER__',
    value: function ___handleClick__REACT_HOT_LOADER__(e) {
      e.stopPropagation();
      if (!this.state.focused && !this.props.disabled) {
        this.focus();
      }
    }
  }, {
    key: '___handleContentEditableRef__REACT_HOT_LOADER__',
    value: function ___handleContentEditableRef__REACT_HOT_LOADER__() {
      return this.___handleContentEditableRef__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleContentEditableRef__REACT_HOT_LOADER__',
    value: function ___handleContentEditableRef__REACT_HOT_LOADER__(ref) {
      this._contentEditable = ref;
    }
  }, {
    key: '___handleInputFieldRef__REACT_HOT_LOADER__',
    value: function ___handleInputFieldRef__REACT_HOT_LOADER__() {
      return this.___handleInputFieldRef__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleInputFieldRef__REACT_HOT_LOADER__',
    value: function ___handleInputFieldRef__REACT_HOT_LOADER__(ref) {
      this._inputFieldBase = ref;
    }
  }, {
    key: '___handleFocus__REACT_HOT_LOADER__',
    value: function ___handleFocus__REACT_HOT_LOADER__() {
      return this.___handleFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleFocus__REACT_HOT_LOADER__',
    value: function ___handleFocus__REACT_HOT_LOADER__() {
      this.setState({ focused: true });
    }
  }, {
    key: '___handleInputKeyDown__REACT_HOT_LOADER__',
    value: function ___handleInputKeyDown__REACT_HOT_LOADER__() {
      return this.___handleInputKeyDown__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleInputKeyDown__REACT_HOT_LOADER__',
    value: function ___handleInputKeyDown__REACT_HOT_LOADER__(_ref3) {
      var keyCode = _ref3.keyCode;
      var _props3 = this.props,
          onValidate = _props3.onValidate,
          textValue = _props3.textValue;


      if (_isWordBreak(keyCode) && textValue) {
        // comma and space will trigger a valid word break, but we don't want them to be part of the
        // chip value itself, so strip them out before
        onValidate({ value: textValue.trim().replace(/(\s|,)/, '') });
      }
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',
    value: function ___handleKeyDown__REACT_HOT_LOADER__() {
      return this.___handleKeyDown__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',
    value: function ___handleKeyDown__REACT_HOT_LOADER__(_ref4) {
      var keyCode = _ref4.keyCode;
      var textValue = this.props.textValue;


      var isInputEmpty = !textValue || textValue && textValue.trim() === '';

      if (isInputEmpty && keyCode === _KeyCodes.ARROW_LEFT) {
        this._focusPrevChip();
      } else if (keyCode === _KeyCodes.ARROW_RIGHT && this._getFocusedChipIndex() >= 0) {
        this._focusNextChip();
      }
    }
  }, {
    key: '___handleTextChange__REACT_HOT_LOADER__',
    value: function ___handleTextChange__REACT_HOT_LOADER__() {
      return this.___handleTextChange__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleTextChange__REACT_HOT_LOADER__',
    value: function ___handleTextChange__REACT_HOT_LOADER__(_ref5) {
      var value = _ref5.value;

      // @TODO handle pasting of multiple, comma-separated values
      this.props.onTextChange({ value: value });
    }
  }, {
    key: 'render',
    value: function render() {
      var _props4 = this.props,
          disabled = _props4.disabled,
          label = _props4.label,
          placeholder = _props4.placeholder,
          secondaryText = _props4.secondaryText,
          textValue = _props4.textValue,
          validationState = _props4.validationState,
          values = _props4.values;
      var focused = this.state.focused;


      this._chips = this._buildChips(values);

      return _react2.default.createElement(
        'div',
        { 'data-component': 'TxlMultiChipInputControlled' },
        _react2.default.createElement(
          _InputFieldBase2.default,
          {
            _containerProps: CONTAINER_PROPS,
            disabled: disabled,
            focused: focused,
            label: label,
            onClick: this._handleClick,
            onKeyDown: this._handleKeyDown,
            ref: this._handleInputFieldRef,
            secondaryText: secondaryText,
            validationState: validationState
          },
          _react2.default.createElement(
            _FlexBox2.default,
            {
              alignItems: 'center',
              flexShrink: 1,
              flexWrap: 'wrap'
            },
            this._chips,
            _react2.default.createElement(_ContentEditable2.default, {
              disabled: disabled,
              onBlur: this._handleBlur,
              onChange: this._handleTextChange,
              onFocus: this._handleFocus,
              onKeyDown: this._handleInputKeyDown,
              placeholder: placeholder,
              ref: this._handleContentEditableRef,
              spellCheck: false,
              value: textValue
            })
          )
        )
      );
    }
  }]);
  return TxlMultiChipInputControlled;
}(_react2.default.Component);

exports.default = TxlMultiChipInputControlled;


TxlMultiChipInputControlled.displayName = 'TxlMultiChipInputControlled';

TxlMultiChipInputControlled.propTypes = {
  disabled: _InputFieldBase2.default.propTypes.disabled,
  label: _InputFieldBase2.default.propTypes.label,
  onBlur: _ContentEditable2.default.propTypes.onBlur,
  onChipDelete: _react.PropTypes.func,
  onFocus: _ContentEditable2.default.propTypes.onFocus,
  onKeyDown: _react.PropTypes.func,
  onTextChange: _react.PropTypes.func,
  onValidate: _react.PropTypes.func,
  placeholder: _react.PropTypes.string,
  secondaryText: _InputFieldBase2.default.propTypes.secondaryText,
  textValue: _react.PropTypes.string,
  validationState: _InputFieldBase2.default.propTypes.validationState,
  validator: _react.PropTypes.func,
  values: _react.PropTypes.arrayOf(_react.PropTypes.string)
};

TxlMultiChipInputControlled.defaultProps = {
  onBlur: Function.prototype,
  onChipDelete: Function.prototype,
  onKeyDown: Function.prototype,
  onTextChange: Function.prototype,
  onValueValidate: Function.prototype,
  values: []
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(CONTAINER_PROPS, 'CONTAINER_PROPS', 'src/input-fields/MultiChipInputControlled.jsx');

  __REACT_HOT_LOADER__.register(VALID_WORD_BREAK_CHARS, 'VALID_WORD_BREAK_CHARS', 'src/input-fields/MultiChipInputControlled.jsx');

  __REACT_HOT_LOADER__.register(_isWordBreak, '_isWordBreak', 'src/input-fields/MultiChipInputControlled.jsx');

  __REACT_HOT_LOADER__.register(TxlMultiChipInputControlled, 'TxlMultiChipInputControlled', 'src/input-fields/MultiChipInputControlled.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvTXVsdGlDaGlwSW5wdXRDb250cm9sbGVkLmpzeCJdLCJuYW1lcyI6WyJDT05UQUlORVJfUFJPUFMiLCJhbGlnbkl0ZW1zIiwiZmxleFdyYXAiLCJqdXN0aWZ5Q29udGVudCIsIlZBTElEX1dPUkRfQlJFQUtfQ0hBUlMiLCJfaXNXb3JkQnJlYWsiLCJpbmRleE9mIiwiY29kZSIsIlR4bE11bHRpQ2hpcElucHV0Q29udHJvbGxlZCIsImFyZ3MiLCJmb2N1cyIsIl9idWlsZENoaXBzIiwiX2ZvY3VzTmV4dENoaXAiLCJfZm9jdXNQcmV2Q2hpcCIsIl9nZXRGb2N1c2VkQ2hpcEluZGV4IiwiX2hhbmRsZUJsdXIiLCJfaGFuZGxlQ2xpY2siLCJfaGFuZGxlQ29udGVudEVkaXRhYmxlUmVmIiwiX2hhbmRsZUlucHV0RmllbGRSZWYiLCJfaGFuZGxlRm9jdXMiLCJfaGFuZGxlSW5wdXRLZXlEb3duIiwiX2hhbmRsZUtleURvd24iLCJfaGFuZGxlVGV4dENoYW5nZSIsIl9jaGlwcyIsInN0YXRlIiwiZm9jdXNlZCIsIl9jb250ZW50RWRpdGFibGUiLCJ2YWx1ZXMiLCJwcm9wcyIsImRpc2FibGVkIiwib25DaGlwRGVsZXRlIiwidmFsIiwiaSIsInJlZiIsImZvY3VzZWRDaGlwSW5kZXgiLCJsZW5ndGgiLCJjaGlwVG9Gb2N1c0luZGV4IiwiY2hpcCIsImhhc0ZvY3VzIiwib25CbHVyIiwidGV4dFZhbHVlIiwic2V0U3RhdGUiLCJ2YWx1ZSIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJfaW5wdXRGaWVsZEJhc2UiLCJrZXlDb2RlIiwib25WYWxpZGF0ZSIsInRyaW0iLCJyZXBsYWNlIiwiaXNJbnB1dEVtcHR5Iiwib25UZXh0Q2hhbmdlIiwibGFiZWwiLCJwbGFjZWhvbGRlciIsInNlY29uZGFyeVRleHQiLCJ2YWxpZGF0aW9uU3RhdGUiLCJDb21wb25lbnQiLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsImZ1bmMiLCJvbkZvY3VzIiwib25LZXlEb3duIiwic3RyaW5nIiwidmFsaWRhdG9yIiwiYXJyYXlPZiIsImRlZmF1bHRQcm9wcyIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwib25WYWx1ZVZhbGlkYXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBU0EsSUFBTUEsa0JBQWtCO0FBQ3RCQyxjQUFZLFVBRFU7QUFFdEJDLFlBQVUsUUFGWTtBQUd0QkMsa0JBQWdCO0FBSE0sQ0FBeEI7O0FBTUEsSUFBTUMseUJBQXlCLHFFQUEvQjs7QUFFQSxJQUFNQyxlQUFlLFNBQWZBLFlBQWU7QUFBQSxTQUFRRCx1QkFBdUJFLE9BQXZCLENBQStCQyxJQUEvQixLQUF3QyxDQUFoRDtBQUFBLENBQXJCOztJQUVxQkMsMkI7OztBQUNuQix5Q0FBcUI7QUFBQTs7QUFBQTs7QUFBQSxzQ0FBTkMsSUFBTTtBQUFOQSxVQUFNO0FBQUE7O0FBQUEsMk1BQ1ZBLElBRFU7O0FBQUEsVUFNckJDLEtBTnFCO0FBQUE7QUFBQTs7QUFBQSxVQVVyQkMsV0FWcUI7QUFBQTtBQUFBOztBQUFBLFVBNEJyQkMsY0E1QnFCO0FBQUE7QUFBQTs7QUFBQSxVQXlDckJDLGNBekNxQjtBQUFBO0FBQUE7O0FBQUEsVUF1RHJCQyxvQkF2RHFCO0FBQUE7QUFBQTs7QUFBQSxVQXlEckJDLFdBekRxQjtBQUFBO0FBQUE7O0FBQUEsVUFpRXJCQyxZQWpFcUI7QUFBQTtBQUFBOztBQUFBLFVBd0VyQkMseUJBeEVxQjtBQUFBO0FBQUE7O0FBQUEsVUE0RXJCQyxvQkE1RXFCO0FBQUE7QUFBQTs7QUFBQSxVQWdGckJDLFlBaEZxQjtBQUFBO0FBQUE7O0FBQUEsVUFvRnJCQyxtQkFwRnFCO0FBQUE7QUFBQTs7QUFBQSxVQWlHckJDLGNBakdxQjtBQUFBO0FBQUE7O0FBQUEsVUErR3JCQyxpQkEvR3FCO0FBQUE7QUFBQTs7QUFFbkIs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TXRDQyxhQUFXLGlCQUFVRixJQU5pQjtBQU90Q1IsZ0JBQWMsaUJBQVVRLElBUGM7QUFRdENaLGNBQVksaUJBQVVZLElBUmdCO0FBU3RDTixlQUFhLGlCQUFVUyxNQVRlO0FBVXRDUixpQkFBZSx5QkFBZUksU0FBZixDQUF5QkosYUFWRjtBQVd0Q2QsYUFBVyxpQkFBVXNCLE1BWGlCO0FBWXRDUCxtQkFBaUIseUJBQWVHLFNBQWYsQ0FBeUJILGVBWko7QUFhdENRLGFBQVcsaUJBQVVKLElBYmlCO0FBY3RDaEMsVUFBUSxpQkFBVXFDLE9BQVYsQ0FBa0IsaUJBQVVGLE1BQTVCO0FBZDhCLENBQXhDOztBQWlCQXRELDRCQUE0QnlELFlBQTVCLEdBQTJDO0FBQ3pDMUIsVUFBUTJCLFNBQVNDLFNBRHdCO0FBRXpDckMsZ0JBQWNvQyxTQUFTQyxTQUZrQjtBQUd6Q04sYUFBV0ssU0FBU0MsU0FIcUI7QUFJekNoQixnQkFBY2UsU0FBU0MsU0FKa0I7QUFLekNDLG1CQUFpQkYsU0FBU0MsU0FMZTtBQU16Q3hDLFVBQVE7QUFOaUMsQ0FBM0M7Ozs7Ozs7O2dDQXhNTTNCLGU7O2dDQU1BSSxzQjs7Z0NBRUFDLFk7O2dDQUVlRywyQiIsImZpbGUiOiJNdWx0aUNoaXBJbnB1dENvbnRyb2xsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IG1hcCBmcm9tICdsb2Rhc2gvbWFwJztcbmltcG9ydCBmaW5kSW5kZXggZnJvbSAnbG9kYXNoL2ZpbmRJbmRleCc7XG5cbmltcG9ydCBDaGlwIGZyb20gJy4uL2NoaXAvQ2hpcCc7XG5pbXBvcnQgRmxleEJveCBmcm9tICcuLi9sYXlvdXQvRmxleEJveCc7XG5pbXBvcnQgSW5wdXRGaWVsZEJhc2UgZnJvbSAnLi4vaW5wdXQtZmllbGRzL19JbnB1dEZpZWxkQmFzZSc7XG5pbXBvcnQgQ29udGVudEVkaXRhYmxlIGZyb20gJy4uL2lucHV0LWZpZWxkcy9Db250ZW50RWRpdGFibGUnO1xuaW1wb3J0IHtcbiAgQVJST1dfTEVGVCxcbiAgQVJST1dfUklHSFQsXG4gIENPTU1BLFxuICBFTlRFUixcbiAgU1BBQ0VCQVIsXG4gIFRBQixcbn0gZnJvbSAnLi4vY29uc3RhbnRzL0tleUNvZGVzJztcblxuY29uc3QgQ09OVEFJTkVSX1BST1BTID0ge1xuICBhbGlnbkl0ZW1zOiAnZmxleC1lbmQnLFxuICBmbGV4V3JhcDogJ25vd3JhcCcsXG4gIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG59O1xuXG5jb25zdCBWQUxJRF9XT1JEX0JSRUFLX0NIQVJTID0gW0NPTU1BLCBFTlRFUiwgU1BBQ0VCQVIsIFRBQl07XG5cbmNvbnN0IF9pc1dvcmRCcmVhayA9IGNvZGUgPT4gVkFMSURfV09SRF9CUkVBS19DSEFSUy5pbmRleE9mKGNvZGUpID49IDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR4bE11bHRpQ2hpcElucHV0Q29udHJvbGxlZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcbiAgICB0aGlzLl9jaGlwcyA9IFtdO1xuICAgIHRoaXMuc3RhdGUgPSB7IGZvY3VzZWQ6IGZhbHNlIH07XG4gIH1cblxuICBmb2N1cyA9ICgpID0+IHtcbiAgICB0aGlzLl9jb250ZW50RWRpdGFibGUuZm9jdXMgJiYgdGhpcy5fY29udGVudEVkaXRhYmxlLmZvY3VzKCk7XG4gIH1cblxuICBfYnVpbGRDaGlwcyA9ICh2YWx1ZXMgPSBbXSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpc2FibGVkLFxuICAgICAgb25DaGlwRGVsZXRlLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIHRoaXMuX2NoaXBzID0gW107XG4gICAgcmV0dXJuIG1hcCh2YWx1ZXMsICh2YWwsIGkpID0+IChcbiAgICAgIDxDaGlwXG4gICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAga2V5PXtpfVxuICAgICAgICBvbkRpc21pc3M9eygpID0+IG9uQ2hpcERlbGV0ZSh2YWwsIGkpfVxuICAgICAgICByZWY9eyhyZWYpID0+IHsgdGhpcy5fY2hpcHNbaV0gPSByZWY7IH19XG4gICAgICA+XG4gICAgICAgIHt2YWx9XG4gICAgICA8L0NoaXA+XG4gICAgKSk7XG4gIH1cblxuICBfZm9jdXNOZXh0Q2hpcCA9ICgpID0+IHtcbiAgICBjb25zdCBmb2N1c2VkQ2hpcEluZGV4ID0gdGhpcy5fZ2V0Rm9jdXNlZENoaXBJbmRleCgpO1xuICAgIC8vIG5vdGhpbmcgdG8gZG8gaWYgbm8gY2hpcHNcbiAgICBpZiAodGhpcy5fY2hpcHMubGVuZ3RoID09PSAwKSB7IHJldHVybjsgfVxuICAgIC8vIGlmIHJpZ2h0bW9zdCBjaGlwIGlzIGFscmVhZHkgZm9jdXNlZCwgZm9jdXMgaW5wdXRcbiAgICBpZiAoZm9jdXNlZENoaXBJbmRleCA9PT0gdGhpcy5fY2hpcHMubGVuZ3RoIC0gMSkge1xuICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBvdGhlcndpc2UsIGZvY3VzIG5leHQgY2hpcCB0byByaWdodFxuICAgIHRoaXMuX2NoaXBzW2ZvY3VzZWRDaGlwSW5kZXggKyAxXS5mb2N1cygpO1xuICB9XG5cbiAgX2ZvY3VzUHJldkNoaXAgPSAoKSA9PiB7XG4gICAgY29uc3QgZm9jdXNlZENoaXBJbmRleCA9IHRoaXMuX2dldEZvY3VzZWRDaGlwSW5kZXgoKTtcbiAgICAvLyBub3RoaW5nIHRvIGRvIGlmIG5vIGNoaXBzIG9yIGxlZnRtb3N0IGNoaXAgaXMgYWxyZWFkeSBmb2N1c2VkXG4gICAgaWYgKHRoaXMuX2NoaXBzLmxlbmd0aCA9PT0gMCB8fCBmb2N1c2VkQ2hpcEluZGV4ID09PSAwKSB7IHJldHVybjsgfVxuXG4gICAgY29uc3QgY2hpcFRvRm9jdXNJbmRleCA9IGZvY3VzZWRDaGlwSW5kZXggPT09IC0xXG4gICAgICAvLyBmb2N1cyByaWdodG1vc3QgY2hpcCB0byBzdGFydFxuICAgICAgPyB0aGlzLl9jaGlwcy5sZW5ndGggLSAxXG4gICAgICAvLyBmb2N1cyBuZXh0IGNoaXAgdG8gbGVmdFxuICAgICAgOiBmb2N1c2VkQ2hpcEluZGV4IC0gMTtcblxuICAgIHRoaXMuX2NoaXBzW2NoaXBUb0ZvY3VzSW5kZXhdLmZvY3VzKCk7XG4gIH1cblxuICBfZ2V0Rm9jdXNlZENoaXBJbmRleCA9ICgpID0+IGZpbmRJbmRleCh0aGlzLl9jaGlwcywgY2hpcCA9PiBjaGlwLmhhc0ZvY3VzKCkpO1xuXG4gIF9oYW5kbGVCbHVyID0gKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIG9uQmx1cixcbiAgICAgIHRleHRWYWx1ZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICB0aGlzLnNldFN0YXRlKHsgZm9jdXNlZDogZmFsc2UgfSwgKCkgPT4gb25CbHVyICYmIG9uQmx1cih7IHZhbHVlOiB0ZXh0VmFsdWUgfSkpO1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGlmICghdGhpcy5zdGF0ZS5mb2N1c2VkICYmICF0aGlzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUNvbnRlbnRFZGl0YWJsZVJlZiA9IChyZWYpID0+IHtcbiAgICB0aGlzLl9jb250ZW50RWRpdGFibGUgPSByZWY7XG4gIH1cblxuICBfaGFuZGxlSW5wdXRGaWVsZFJlZiA9IChyZWYpID0+IHtcbiAgICB0aGlzLl9pbnB1dEZpZWxkQmFzZSA9IHJlZjtcbiAgfVxuXG4gIF9oYW5kbGVGb2N1cyA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZm9jdXNlZDogdHJ1ZSB9KTtcbiAgfVxuXG4gIF9oYW5kbGVJbnB1dEtleURvd24gPSAoeyBrZXlDb2RlIH0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBvblZhbGlkYXRlLFxuICAgICAgdGV4dFZhbHVlLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKF9pc1dvcmRCcmVhayhrZXlDb2RlKSAmJiB0ZXh0VmFsdWUpIHtcbiAgICAgIC8vIGNvbW1hIGFuZCBzcGFjZSB3aWxsIHRyaWdnZXIgYSB2YWxpZCB3b3JkIGJyZWFrLCBidXQgd2UgZG9uJ3Qgd2FudCB0aGVtIHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICAvLyBjaGlwIHZhbHVlIGl0c2VsZiwgc28gc3RyaXAgdGhlbSBvdXQgYmVmb3JlXG4gICAgICBvblZhbGlkYXRlKHsgdmFsdWU6IHRleHRWYWx1ZS50cmltKCkucmVwbGFjZSgvKFxcc3wsKS8sICcnKSB9KTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlS2V5RG93biA9ICh7IGtleUNvZGUgfSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHRleHRWYWx1ZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IGlzSW5wdXRFbXB0eSA9ICF0ZXh0VmFsdWUgfHwgKHRleHRWYWx1ZSAmJiB0ZXh0VmFsdWUudHJpbSgpID09PSAnJyk7XG5cbiAgICBpZiAoaXNJbnB1dEVtcHR5ICYmIGtleUNvZGUgPT09IEFSUk9XX0xFRlQpIHtcbiAgICAgIHRoaXMuX2ZvY3VzUHJldkNoaXAoKTtcbiAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEFSUk9XX1JJR0hUICYmIHRoaXMuX2dldEZvY3VzZWRDaGlwSW5kZXgoKSA+PSAwKSB7XG4gICAgICB0aGlzLl9mb2N1c05leHRDaGlwKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZVRleHRDaGFuZ2UgPSAoeyB2YWx1ZSB9KSA9PiB7XG4gICAgLy8gQFRPRE8gaGFuZGxlIHBhc3Rpbmcgb2YgbXVsdGlwbGUsIGNvbW1hLXNlcGFyYXRlZCB2YWx1ZXNcbiAgICB0aGlzLnByb3BzLm9uVGV4dENoYW5nZSh7IHZhbHVlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpc2FibGVkLFxuICAgICAgbGFiZWwsXG4gICAgICBwbGFjZWhvbGRlcixcbiAgICAgIHNlY29uZGFyeVRleHQsXG4gICAgICB0ZXh0VmFsdWUsXG4gICAgICB2YWxpZGF0aW9uU3RhdGUsXG4gICAgICB2YWx1ZXMsXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCB7XG4gICAgICBmb2N1c2VkLFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgdGhpcy5fY2hpcHMgPSB0aGlzLl9idWlsZENoaXBzKHZhbHVlcyk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLWNvbXBvbmVudD1cIlR4bE11bHRpQ2hpcElucHV0Q29udHJvbGxlZFwiPlxuICAgICAgICA8SW5wdXRGaWVsZEJhc2VcbiAgICAgICAgICBfY29udGFpbmVyUHJvcHM9e0NPTlRBSU5FUl9QUk9QU31cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgZm9jdXNlZD17Zm9jdXNlZH1cbiAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgb25DbGljaz17dGhpcy5faGFuZGxlQ2xpY2t9XG4gICAgICAgICAgb25LZXlEb3duPXt0aGlzLl9oYW5kbGVLZXlEb3dufVxuICAgICAgICAgIHJlZj17dGhpcy5faGFuZGxlSW5wdXRGaWVsZFJlZn1cbiAgICAgICAgICBzZWNvbmRhcnlUZXh0PXtzZWNvbmRhcnlUZXh0fVxuICAgICAgICAgIHZhbGlkYXRpb25TdGF0ZT17dmFsaWRhdGlvblN0YXRlfVxuICAgICAgICA+XG4gICAgICAgICAgPEZsZXhCb3hcbiAgICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICAgICAgZmxleFNocmluaz17MX1cbiAgICAgICAgICAgIGZsZXhXcmFwPVwid3JhcFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge3RoaXMuX2NoaXBzfVxuICAgICAgICAgICAgPENvbnRlbnRFZGl0YWJsZVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgIG9uQmx1cj17dGhpcy5faGFuZGxlQmx1cn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX2hhbmRsZVRleHRDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuX2hhbmRsZUZvY3VzfVxuICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuX2hhbmRsZUlucHV0S2V5RG93bn1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICByZWY9e3RoaXMuX2hhbmRsZUNvbnRlbnRFZGl0YWJsZVJlZn1cbiAgICAgICAgICAgICAgc3BlbGxDaGVjaz17ZmFsc2V9XG4gICAgICAgICAgICAgIHZhbHVlPXt0ZXh0VmFsdWV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvRmxleEJveD5cbiAgICAgICAgPC9JbnB1dEZpZWxkQmFzZT5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuVHhsTXVsdGlDaGlwSW5wdXRDb250cm9sbGVkLmRpc3BsYXlOYW1lID0gJ1R4bE11bHRpQ2hpcElucHV0Q29udHJvbGxlZCc7XG5cblR4bE11bHRpQ2hpcElucHV0Q29udHJvbGxlZC5wcm9wVHlwZXMgPSB7XG4gIGRpc2FibGVkOiBJbnB1dEZpZWxkQmFzZS5wcm9wVHlwZXMuZGlzYWJsZWQsXG4gIGxhYmVsOiBJbnB1dEZpZWxkQmFzZS5wcm9wVHlwZXMubGFiZWwsXG4gIG9uQmx1cjogQ29udGVudEVkaXRhYmxlLnByb3BUeXBlcy5vbkJsdXIsXG4gIG9uQ2hpcERlbGV0ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRm9jdXM6IENvbnRlbnRFZGl0YWJsZS5wcm9wVHlwZXMub25Gb2N1cyxcbiAgb25LZXlEb3duOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25UZXh0Q2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25WYWxpZGF0ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzZWNvbmRhcnlUZXh0OiBJbnB1dEZpZWxkQmFzZS5wcm9wVHlwZXMuc2Vjb25kYXJ5VGV4dCxcbiAgdGV4dFZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB2YWxpZGF0aW9uU3RhdGU6IElucHV0RmllbGRCYXNlLnByb3BUeXBlcy52YWxpZGF0aW9uU3RhdGUsXG4gIHZhbGlkYXRvcjogUHJvcFR5cGVzLmZ1bmMsXG4gIHZhbHVlczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG59O1xuXG5UeGxNdWx0aUNoaXBJbnB1dENvbnRyb2xsZWQuZGVmYXVsdFByb3BzID0ge1xuICBvbkJsdXI6IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgb25DaGlwRGVsZXRlOiBGdW5jdGlvbi5wcm90b3R5cGUsXG4gIG9uS2V5RG93bjogRnVuY3Rpb24ucHJvdG90eXBlLFxuICBvblRleHRDaGFuZ2U6IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgb25WYWx1ZVZhbGlkYXRlOiBGdW5jdGlvbi5wcm90b3R5cGUsXG4gIHZhbHVlczogW10sXG59O1xuIl19