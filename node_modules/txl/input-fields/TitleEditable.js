'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _temp;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _Base = require('../base/Base');

var _TitleEditableControlled = require('./TitleEditableControlled');

var _TitleEditableControlled2 = _interopRequireDefault(_TitleEditableControlled);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var babelPluginFlowReactPropTypes_proptype_CallbackArgument = require('./TitleEditableControlled').babelPluginFlowReactPropTypes_proptype_CallbackArgument || require('react').PropTypes.any;

var TxlTitleEditable = (_temp = _class = function (_React$Component) {
  (0, _inherits3.default)(TxlTitleEditable, _React$Component);

  function TxlTitleEditable(props) {
    (0, _classCallCheck3.default)(this, TxlTitleEditable);

    var _this = (0, _possibleConstructorReturn3.default)(this, (TxlTitleEditable.__proto__ || (0, _getPrototypeOf2.default)(TxlTitleEditable)).call(this, props));

    _this._handleCancel = function () {
      return _this.___handleCancel__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleChange = function () {
      return _this.___handleChange__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleEdit = function () {
      return _this.___handleEdit__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleSave = function () {
      return _this.___handleSave__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleBlur = function () {
      return _this.___handleBlur__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleFocus = function () {
      return _this.___handleFocus__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this.state = {
      cachedValue: props.defaultValue || '',
      editing: false,
      focused: false,
      value: props.defaultValue || ''
    };
    return _this;
  }

  // Exit edit mode, and restore value to previously cached value.
  // Caching value happens on entering edit mode & saving.


  (0, _createClass3.default)(TxlTitleEditable, [{
    key: '___handleCancel__REACT_HOT_LOADER__',
    value: function ___handleCancel__REACT_HOT_LOADER__() {
      return this.___handleCancel__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleCancel__REACT_HOT_LOADER__',
    value: function ___handleCancel__REACT_HOT_LOADER__() {
      this.setState(function (state) {
        return {
          editing: false,
          focused: false,
          value: state.cachedValue
        };
      });
    }
  }, {
    key: '___handleChange__REACT_HOT_LOADER__',


    // Enter edit mode. Set current value aside, in case user wants to cancel editing.
    value: function ___handleChange__REACT_HOT_LOADER__() {
      return this.___handleChange__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleChange__REACT_HOT_LOADER__',
    value: function ___handleChange__REACT_HOT_LOADER__(_ref) {
      var value = _ref.value;

      this.setState({ value: value });
    }
  }, {
    key: '___handleEdit__REACT_HOT_LOADER__',


    // Make sure internal state is ok, then trigger onSave callback
    value: function ___handleEdit__REACT_HOT_LOADER__() {
      return this.___handleEdit__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleEdit__REACT_HOT_LOADER__',
    value: function ___handleEdit__REACT_HOT_LOADER__() {
      this.setState(function (state) {
        return {
          cachedValue: state.value,
          editing: true,
          focused: true
        };
      });
    }
  }, {
    key: '___handleSave__REACT_HOT_LOADER__',
    value: function ___handleSave__REACT_HOT_LOADER__() {
      return this.___handleSave__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleSave__REACT_HOT_LOADER__',
    value: function ___handleSave__REACT_HOT_LOADER__(_ref2) {
      var _this2 = this;

      var value = _ref2.value;

      this.setState({
        cachedValue: value,
        editing: false,
        focused: false,
        value: value
      }, function () {
        return _this2.props.onSave({ value: value });
      });
    }
  }, {
    key: '___handleBlur__REACT_HOT_LOADER__',
    value: function ___handleBlur__REACT_HOT_LOADER__() {
      return this.___handleBlur__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleBlur__REACT_HOT_LOADER__',
    value: function ___handleBlur__REACT_HOT_LOADER__(obj) {
      this.props.onBlur(obj);
    }
  }, {
    key: '___handleFocus__REACT_HOT_LOADER__',
    value: function ___handleFocus__REACT_HOT_LOADER__() {
      return this.___handleFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleFocus__REACT_HOT_LOADER__',
    value: function ___handleFocus__REACT_HOT_LOADER__(obj) {
      this.props.onFocus(obj);
    }
  }, {
    key: 'render',
    value: function render() {
      var _state = this.state,
          editing = _state.editing,
          focused = _state.focused,
          value = _state.value;
      var _props = this.props,
          placeholder = _props.placeholder,
          tabIndex = _props.tabIndex,
          type = _props.type;


      return _react2.default.createElement(_TitleEditableControlled2.default, {
        editing: editing,
        focused: focused,
        onBlur: this._handleBlur,
        onCancel: this._handleCancel,
        onChange: this._handleChange,
        onEdit: this._handleEdit,
        onFocus: this._handleFocus,
        onSave: this._handleSave,
        placeholder: placeholder,
        tabindex: tabIndex,
        type: type,
        value: value
      });
    }
  }]);
  return TxlTitleEditable;
}(_react2.default.Component), _class.displayName = 'TitleEditable', _class.defaultProps = {
  defaultValue: '',
  onBlur: _Base.NOOP,
  onFocus: _Base.NOOP,
  onSave: _Base.NOOP
}, _temp);
TxlTitleEditable.propTypes = {
  defaultValue: require('react').PropTypes.string.isRequired,
  onBlur: require('react').PropTypes.func.isRequired,
  onFocus: require('react').PropTypes.func.isRequired,
  onSave: require('react').PropTypes.func.isRequired,
  placeholder: require('react').PropTypes.string,
  tabIndex: require('react').PropTypes.number,
  type: require('react').PropTypes.oneOf(['h1', 'h2'])
};
var _default = TxlTitleEditable;
exports.default = _default;
;

var _temp2 = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlTitleEditable, 'TxlTitleEditable', 'src/input-fields/TitleEditable.jsx');

  __REACT_HOT_LOADER__.register(_default, 'default', 'src/input-fields/TitleEditable.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvVGl0bGVFZGl0YWJsZS5qc3giXSwibmFtZXMiOlsiVHhsVGl0bGVFZGl0YWJsZSIsInByb3BzIiwiX2hhbmRsZUNhbmNlbCIsIl9oYW5kbGVDaGFuZ2UiLCJfaGFuZGxlRWRpdCIsIl9oYW5kbGVTYXZlIiwiX2hhbmRsZUJsdXIiLCJfaGFuZGxlRm9jdXMiLCJzdGF0ZSIsImNhY2hlZFZhbHVlIiwiZGVmYXVsdFZhbHVlIiwiZWRpdGluZyIsImZvY3VzZWQiLCJ2YWx1ZSIsInNldFN0YXRlIiwib25TYXZlIiwib2JqIiwib25CbHVyIiwib25Gb2N1cyIsInBsYWNlaG9sZGVyIiwidGFiSW5kZXgiLCJ0eXBlIiwiQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7OztBQUVBOztBQUNBOzs7Ozs7OztJQW9CTUEsZ0I7OztBQVlKLDRCQUFZQyxLQUFaLEVBQTBCO0FBQUE7O0FBQUEsMEpBQ2xCQSxLQURrQjs7QUFBQSxVQWExQkMsYUFiMEI7QUFBQTtBQUFBOztBQUFBLFVBcUIxQkMsYUFyQjBCO0FBQUE7QUFBQTs7QUFBQSxVQTBCMUJDLFdBMUIwQjtBQUFBO0FBQUE7O0FBQUEsVUFtQzFCQyxXQW5DMEI7QUFBQTtBQUFBOztBQUFBLFVBK0MxQkMsV0EvQzBCO0FBQUE7QUFBQTs7QUFBQSxVQW1EMUJDLFlBbkQwQjtBQUFBO0FBQUE7O0FBR3hCLFVBQUtDLEtBQUwsR0FBYTtBQUNYQyxtQkFBYVIsTUFBTVMsWUFBTixJQUFzQixFQUR4QjtBQUVYQyxlQUFTLEtBRkU7QUFHWEMsZUFBUyxLQUhFO0FBSVhDLGFBQU9aLE1BQU1TLFlBQU4sSUFBc0I7QUFKbEIsS0FBYjtBQUh3QjtBQVN6Qjs7QUFFRDtBQUNBOzs7Ozs7Ozs7OzBEQUM0QjtBQUMxQixXQUFLSSxRQUFMLENBQWM7QUFBQSxlQUFVO0FBQ3RCSCxtQkFBUyxLQURhO0FBRXRCQyxtQkFBUyxLQUZhO0FBR3RCQyxpQkFBT0wsTUFBTUM7QUFIUyxTQUFWO0FBQUEsT0FBZDtBQUtEOzs7OztBQU1EOzs7Ozs7OERBSnVEO0FBQUEsVUFBcENJLEtBQW9DLFFBQXBDQSxLQUFvQzs7QUFDckQsV0FBS0MsUUFBTCxDQUFjLEVBQUVELFlBQUYsRUFBZDtBQUNEOzs7OztBQVdEOzs7Ozs7d0RBUjBCO0FBQ3hCLFdBQUtDLFFBQUwsQ0FBYztBQUFBLGVBQVU7QUFDdEJMLHVCQUFhRCxNQUFNSyxLQURHO0FBRXRCRixtQkFBUyxJQUZhO0FBR3RCQyxtQkFBUztBQUhhLFNBQVY7QUFBQSxPQUFkO0FBS0Q7Ozs7Ozs7OzZEQUdvRDtBQUFBOztBQUFBLFVBQXBDQyxLQUFvQyxTQUFwQ0EsS0FBb0M7O0FBQ25ELFdBQUtDLFFBQUwsQ0FDRTtBQUNFTCxxQkFBYUksS0FEZjtBQUVFRixpQkFBUyxLQUZYO0FBR0VDLGlCQUFTLEtBSFg7QUFJRUM7QUFKRixPQURGLEVBT0U7QUFBQSxlQUFNLE9BQUtaLEtBQUwsQ0FBV2MsTUFBWCxDQUFrQixFQUFFRixZQUFGLEVBQWxCLENBQU47QUFBQSxPQVBGO0FBU0Q7Ozs7Ozs7O3NEQUVjRyxHLEVBQWdDO0FBQzdDLFdBQUtmLEtBQUwsQ0FBV2dCLE1BQVgsQ0FBa0JELEdBQWxCO0FBQ0Q7Ozs7Ozs7O3VEQUVlQSxHLEVBQWdDO0FBQzlDLFdBQUtmLEtBQUwsQ0FBV2lCLE9BQVgsQ0FBbUJGLEdBQW5CO0FBQ0Q7Ozs2QkFFUTtBQUFBLG1CQUtILEtBQUtSLEtBTEY7QUFBQSxVQUVMRyxPQUZLLFVBRUxBLE9BRks7QUFBQSxVQUdMQyxPQUhLLFVBR0xBLE9BSEs7QUFBQSxVQUlMQyxLQUpLLFVBSUxBLEtBSks7QUFBQSxtQkFVSCxLQUFLWixLQVZGO0FBQUEsVUFPTGtCLFdBUEssVUFPTEEsV0FQSztBQUFBLFVBUUxDLFFBUkssVUFRTEEsUUFSSztBQUFBLFVBU0xDLElBVEssVUFTTEEsSUFUSzs7O0FBWVAsYUFDRTtBQUNFLGlCQUFTVixPQURYO0FBRUUsaUJBQVNDLE9BRlg7QUFHRSxnQkFBUSxLQUFLTixXQUhmO0FBSUUsa0JBQVUsS0FBS0osYUFKakI7QUFLRSxrQkFBVSxLQUFLQyxhQUxqQjtBQU1FLGdCQUFRLEtBQUtDLFdBTmY7QUFPRSxpQkFBUyxLQUFLRyxZQVBoQjtBQVFFLGdCQUFRLEtBQUtGLFdBUmY7QUFTRSxxQkFBYWMsV0FUZjtBQVVFLGtCQUFVQyxRQVZaO0FBV0UsY0FBTUMsSUFYUjtBQVlFLGVBQU9SO0FBWlQsUUFERjtBQWdCRDs7O0VBL0Y0QixnQkFBTVMsUyxVQUk1QkMsVyxHQUFjLGUsU0FDZEMsWSxHQUFlO0FBQ3BCZCxnQkFBYyxFQURNO0FBRXBCTyxvQkFGb0I7QUFHcEJDLHFCQUhvQjtBQUlwQkg7QUFKb0IsQzs7Ozs7Ozs7OztlQTZGVGYsZ0I7Ozs7Ozs7OztnQ0FsR1RBLGdCIiwiZmlsZSI6IlRpdGxlRWRpdGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBOT09QIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCBUaXRsZUVkaXRhYmxlQ29udHJvbGxlZCBmcm9tICcuL1RpdGxlRWRpdGFibGVDb250cm9sbGVkJztcbmltcG9ydCB0eXBlIHsgQ2FsbGJhY2tBcmd1bWVudCB9IGZyb20gJy4vVGl0bGVFZGl0YWJsZUNvbnRyb2xsZWQnO1xuXG50eXBlIFByb3BzID0ge1xuICBkZWZhdWx0VmFsdWU6IHN0cmluZztcbiAgb25CbHVyOiAob2JqOiBDYWxsYmFja0FyZ3VtZW50KSA9PiB2b2lkO1xuICBvbkZvY3VzOiAob2JqOiBDYWxsYmFja0FyZ3VtZW50KSA9PiB2b2lkO1xuICBvblNhdmU6IChvYmo6IENhbGxiYWNrQXJndW1lbnQpID0+IHZvaWQ7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICB0YWJJbmRleD86IG51bWJlcjtcbiAgdHlwZT86ICdoMScgfCAnaDInO1xufTtcblxudHlwZSBTdGF0ZSA9IHtcbiAgY2FjaGVkVmFsdWU6IHN0cmluZztcbiAgZWRpdGluZzogYm9vbGVhbjtcbiAgZm9jdXNlZDogYm9vbGVhbjtcbiAgdmFsdWU6IHN0cmluZztcbn07XG5cbmNsYXNzIFR4bFRpdGxlRWRpdGFibGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiBTdGF0ZTtcblxuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnVGl0bGVFZGl0YWJsZSc7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZGVmYXVsdFZhbHVlOiAnJyxcbiAgICBvbkJsdXI6IE5PT1AsXG4gICAgb25Gb2N1czogTk9PUCxcbiAgICBvblNhdmU6IE5PT1AsXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNhY2hlZFZhbHVlOiBwcm9wcy5kZWZhdWx0VmFsdWUgfHwgJycsXG4gICAgICBlZGl0aW5nOiBmYWxzZSxcbiAgICAgIGZvY3VzZWQ6IGZhbHNlLFxuICAgICAgdmFsdWU6IHByb3BzLmRlZmF1bHRWYWx1ZSB8fCAnJyxcbiAgICB9O1xuICB9XG5cbiAgLy8gRXhpdCBlZGl0IG1vZGUsIGFuZCByZXN0b3JlIHZhbHVlIHRvIHByZXZpb3VzbHkgY2FjaGVkIHZhbHVlLlxuICAvLyBDYWNoaW5nIHZhbHVlIGhhcHBlbnMgb24gZW50ZXJpbmcgZWRpdCBtb2RlICYgc2F2aW5nLlxuICBfaGFuZGxlQ2FuY2VsID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgIGVkaXRpbmc6IGZhbHNlLFxuICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICB2YWx1ZTogc3RhdGUuY2FjaGVkVmFsdWUsXG4gICAgfSkpO1xuICB9O1xuXG4gIF9oYW5kbGVDaGFuZ2UgPSAoeyB2YWx1ZSB9OiBDYWxsYmFja0FyZ3VtZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlIH0pO1xuICB9O1xuXG4gIC8vIEVudGVyIGVkaXQgbW9kZS4gU2V0IGN1cnJlbnQgdmFsdWUgYXNpZGUsIGluIGNhc2UgdXNlciB3YW50cyB0byBjYW5jZWwgZWRpdGluZy5cbiAgX2hhbmRsZUVkaXQgPSAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgY2FjaGVkVmFsdWU6IHN0YXRlLnZhbHVlLFxuICAgICAgZWRpdGluZzogdHJ1ZSxcbiAgICAgIGZvY3VzZWQ6IHRydWUsXG4gICAgfSkpO1xuICB9O1xuXG4gIC8vIE1ha2Ugc3VyZSBpbnRlcm5hbCBzdGF0ZSBpcyBvaywgdGhlbiB0cmlnZ2VyIG9uU2F2ZSBjYWxsYmFja1xuICBfaGFuZGxlU2F2ZSA9ICh7IHZhbHVlIH06IENhbGxiYWNrQXJndW1lbnQpOiB2b2lkID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKFxuICAgICAge1xuICAgICAgICBjYWNoZWRWYWx1ZTogdmFsdWUsXG4gICAgICAgIGVkaXRpbmc6IGZhbHNlLFxuICAgICAgICBmb2N1c2VkOiBmYWxzZSxcbiAgICAgICAgdmFsdWUsXG4gICAgICB9LFxuICAgICAgKCkgPT4gdGhpcy5wcm9wcy5vblNhdmUoeyB2YWx1ZSB9KVxuICAgICk7XG4gIH07XG5cbiAgX2hhbmRsZUJsdXIgPSAob2JqOiBDYWxsYmFja0FyZ3VtZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkJsdXIob2JqKTtcbiAgfTtcblxuICBfaGFuZGxlRm9jdXMgPSAob2JqOiBDYWxsYmFja0FyZ3VtZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkZvY3VzKG9iaik7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGVkaXRpbmcsXG4gICAgICBmb2N1c2VkLFxuICAgICAgdmFsdWUsXG4gICAgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3Qge1xuICAgICAgcGxhY2Vob2xkZXIsXG4gICAgICB0YWJJbmRleCxcbiAgICAgIHR5cGUsXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFRpdGxlRWRpdGFibGVDb250cm9sbGVkXG4gICAgICAgIGVkaXRpbmc9e2VkaXRpbmd9XG4gICAgICAgIGZvY3VzZWQ9e2ZvY3VzZWR9XG4gICAgICAgIG9uQmx1cj17dGhpcy5faGFuZGxlQmx1cn1cbiAgICAgICAgb25DYW5jZWw9e3RoaXMuX2hhbmRsZUNhbmNlbH1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMuX2hhbmRsZUNoYW5nZX1cbiAgICAgICAgb25FZGl0PXt0aGlzLl9oYW5kbGVFZGl0fVxuICAgICAgICBvbkZvY3VzPXt0aGlzLl9oYW5kbGVGb2N1c31cbiAgICAgICAgb25TYXZlPXt0aGlzLl9oYW5kbGVTYXZlfVxuICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG4gICAgICAgIHRhYmluZGV4PXt0YWJJbmRleH1cbiAgICAgICAgdHlwZT17dHlwZX1cbiAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFR4bFRpdGxlRWRpdGFibGU7XG4iXX0=