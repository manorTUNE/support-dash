'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _class, _class2, _temp2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _FlexContainer = require('../layout/FlexContainer');

var _FlexContainer2 = _interopRequireDefault(_FlexContainer);

var _InputFieldBase = require('./_InputFieldBase');

var _InputFieldBase2 = _interopRequireDefault(_InputFieldBase);

var _LoadingIndicator = require('../progress-indicators/LoadingIndicator');

var _LoadingIndicator2 = _interopRequireDefault(_LoadingIndicator);

var _IconButton = require('../buttons/IconButton');

var _IconButton2 = _interopRequireDefault(_IconButton);

var _EditOutline = require('../icons/EditOutline');

var _EditOutline2 = _interopRequireDefault(_EditOutline);

var _Check = require('../icons/Check');

var _Check2 = _interopRequireDefault(_Check);

var _Close = require('../icons/Close');

var _Close2 = _interopRequireDefault(_Close);

var _type = require('../styles/mixins/type');

var _theme = require('../styles/theme');

var _helpers = require('../styles/helpers');

var _KeyCodes = require('../constants/KeyCodes');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var BUTTON_SPACING = {
  marginLeft: (0, _helpers.gridUnits)(2)
};
var BOTTOM_BORDER_WIDTH = '1px';
var INPUT_STYLES = (0, _extends3.default)({}, _type.DEFAULT_FONT_FAMILY, {
  backgroundColor: 'transparent',
  border: 'none',
  boxSizing: 'border-box',
  flexBasis: '100%',
  flexGrow: 1,
  marginBottom: '-' + BOTTOM_BORDER_WIDTH,
  minWidth: 0, // for MS Edge
  outline: 'none',
  overflow: 'hidden',
  textIndent: 0
});

var getHeadingStyles = function getHeadingStyles(type, placeholder) {
  return (0, _extends3.default)({}, _type.DEFAULT_FONT_FAMILY, type === 'h1' ? _type.HEADING_LARGE : _type.HEADING_MEDIUM, placeholder ? { color: _theme.COLOR_NEUTRAL['200'] } : {});
};

// TODO: use SyntheticInputEvent instead of this, when eslint no longer thinks it's undefined. TXLENG-370
Object.defineProperty(module.exports, 'babelPluginFlowReactPropTypes_proptype_CallbackArgument', require('react').PropTypes.shape({
  value: require('react').PropTypes.string.isRequired
}));

var TxlTitleEditableControlled = (0, _radium2.default)(_class = (_temp2 = _class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlTitleEditableControlled, _React$Component);

  function TxlTitleEditableControlled() {
    var _ref;

    var _temp, _this, _ret;

    (0, _classCallCheck3.default)(this, TxlTitleEditableControlled);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlTitleEditableControlled.__proto__ || (0, _getPrototypeOf2.default)(TxlTitleEditableControlled)).call.apply(_ref, [this].concat(args))), _this), _this._assignInputRef = function () {
      var _this2;

      return (_this2 = _this).___assignInputRef__REACT_HOT_LOADER__.apply(_this2, arguments);
    }, _this._handleBlur = function () {
      var _this3;

      return (_this3 = _this).___handleBlur__REACT_HOT_LOADER__.apply(_this3, arguments);
    }, _this._handleCancel = function () {
      var _this4;

      return (_this4 = _this).___handleCancel__REACT_HOT_LOADER__.apply(_this4, arguments);
    }, _this._handleChange = function () {
      var _this5;

      return (_this5 = _this).___handleChange__REACT_HOT_LOADER__.apply(_this5, arguments);
    }, _this._handleEdit = function () {
      var _this6;

      return (_this6 = _this).___handleEdit__REACT_HOT_LOADER__.apply(_this6, arguments);
    }, _this._handleFocus = function () {
      var _this7;

      return (_this7 = _this).___handleFocus__REACT_HOT_LOADER__.apply(_this7, arguments);
    }, _this._handleKeyDown = function () {
      var _this8;

      return (_this8 = _this).___handleKeyDown__REACT_HOT_LOADER__.apply(_this8, arguments);
    }, _this._handleSave = function () {
      var _this9;

      return (_this9 = _this).___handleSave__REACT_HOT_LOADER__.apply(_this9, arguments);
    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);
  }

  (0, _createClass3.default)(TxlTitleEditableControlled, [{
    key: 'componentDidUpdate',
    value: function componentDidUpdate(prevProps) {
      if (this.props.focused && !prevProps.focused) {
        this._input && this._input.focus();
      }
    }
  }, {
    key: '___assignInputRef__REACT_HOT_LOADER__',


    // users responsibility to handle 'focused' prop
    value: function ___assignInputRef__REACT_HOT_LOADER__() {
      return this.___assignInputRef__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___assignInputRef__REACT_HOT_LOADER__',
    value: function ___assignInputRef__REACT_HOT_LOADER__() {
      return this.___assignInputRef__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___assignInputRef__REACT_HOT_LOADER__',
    value: function ___assignInputRef__REACT_HOT_LOADER__(node) {
      this._input = node;
    }
  }, {
    key: '___handleBlur__REACT_HOT_LOADER__',


    // Button to cancel active changes. Users responsibility to restore previous state.
    value: function ___handleBlur__REACT_HOT_LOADER__() {
      return this.___handleBlur__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleBlur__REACT_HOT_LOADER__',
    value: function ___handleBlur__REACT_HOT_LOADER__() {
      return this.___handleBlur__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleBlur__REACT_HOT_LOADER__',
    value: function ___handleBlur__REACT_HOT_LOADER__(_ref2) {
      var target = _ref2.target;
      var value = target.value;

      this.props.onBlur({ value: value });
    }
  }, {
    key: '___handleCancel__REACT_HOT_LOADER__',
    value: function ___handleCancel__REACT_HOT_LOADER__() {
      return this.___handleCancel__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleCancel__REACT_HOT_LOADER__',
    value: function ___handleCancel__REACT_HOT_LOADER__() {
      return this.___handleCancel__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleCancel__REACT_HOT_LOADER__',
    value: function ___handleCancel__REACT_HOT_LOADER__() {
      this.props.onCancel();
    }
  }, {
    key: '___handleChange__REACT_HOT_LOADER__',


    // Button to trigger edit mode. Users responsibility to handle editing/focused props.
    value: function ___handleChange__REACT_HOT_LOADER__() {
      return this.___handleChange__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleChange__REACT_HOT_LOADER__',
    value: function ___handleChange__REACT_HOT_LOADER__() {
      return this.___handleChange__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleChange__REACT_HOT_LOADER__',
    value: function ___handleChange__REACT_HOT_LOADER__(_ref3) {
      var target = _ref3.target;
      var value = target.value;

      this.props.onChange({ value: value });
    }
  }, {
    key: '___handleEdit__REACT_HOT_LOADER__',


    // users responsibility to handle 'focused' prop
    value: function ___handleEdit__REACT_HOT_LOADER__() {
      return this.___handleEdit__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleEdit__REACT_HOT_LOADER__',
    value: function ___handleEdit__REACT_HOT_LOADER__() {
      return this.___handleEdit__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleEdit__REACT_HOT_LOADER__',
    value: function ___handleEdit__REACT_HOT_LOADER__() {
      this.props.onEdit();
    }
  }, {
    key: '___handleFocus__REACT_HOT_LOADER__',
    value: function ___handleFocus__REACT_HOT_LOADER__() {
      return this.___handleFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleFocus__REACT_HOT_LOADER__',
    value: function ___handleFocus__REACT_HOT_LOADER__() {
      return this.___handleFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleFocus__REACT_HOT_LOADER__',
    value: function ___handleFocus__REACT_HOT_LOADER__(_ref4) {
      var target = _ref4.target;
      var value = target.value;

      this.props.onFocus({ value: value });
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',


    // Button to save current value. Passes back value prop.
    value: function ___handleKeyDown__REACT_HOT_LOADER__() {
      return this.___handleKeyDown__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',
    value: function ___handleKeyDown__REACT_HOT_LOADER__() {
      return this.___handleKeyDown__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',
    value: function ___handleKeyDown__REACT_HOT_LOADER__(_ref5) {
      var keyCode = _ref5.keyCode;

      switch (keyCode) {
        case _KeyCodes.ENTER:
          return this._handleSave();
        case _KeyCodes.ESCAPE:
          return this._handleCancel();
        default:
          return undefined;
      }
    }
  }, {
    key: '___handleSave__REACT_HOT_LOADER__',
    value: function ___handleSave__REACT_HOT_LOADER__() {
      return this.___handleSave__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleSave__REACT_HOT_LOADER__',
    value: function ___handleSave__REACT_HOT_LOADER__() {
      return this.___handleSave__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleSave__REACT_HOT_LOADER__',
    value: function ___handleSave__REACT_HOT_LOADER__() {
      this.props.onSave({ value: this.props.value });
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          editing = _props.editing,
          focused = _props.focused,
          loading = _props.loading,
          placeholder = _props.placeholder,
          secondaryText = _props.secondaryText,
          tabIndex = _props.tabIndex,
          type = _props.type,
          validationState = _props.validationState,
          value = _props.value;


      return _react2.default.createElement(
        'div',
        { 'data-component': 'TxlTitleEditable' },
        editing && _react2.default.createElement(
          _FlexContainer2.default,
          { alignItems: 'baseline' },
          _react2.default.createElement(
            _InputFieldBase2.default,
            {
              focused: focused,
              secondaryText: secondaryText,
              validationState: validationState
            },
            _react2.default.createElement('input', {
              style: (0, _extends3.default)({}, INPUT_STYLES, getHeadingStyles(type, value.length === 0)),
              type: 'text',
              placeholder: this.props.placeholder,
              onBlur: this._handleBlur,
              onChange: this._handleChange,
              onFocus: this._handleFocus,
              onKeyDown: this._handleKeyDown,
              ref: this._assignInputRef,
              tabIndex: tabIndex,
              value: value
            })
          ),
          loading && _react2.default.createElement(
            'div',
            { style: BUTTON_SPACING },
            _react2.default.createElement(_LoadingIndicator2.default, { size: 'small' })
          ),
          !loading && _react2.default.createElement(
            _FlexContainer2.default,
            null,
            _react2.default.createElement(_IconButton2.default, {
              variant: 'plain',
              altText: 'Save',
              icon: _Check2.default,
              onClick: this._handleSave,
              _style: BUTTON_SPACING
            }),
            _react2.default.createElement(_IconButton2.default, {
              variant: 'plain',
              altText: 'Cancel editing',
              icon: _Close2.default,
              onClick: this._handleCancel,
              _style: BUTTON_SPACING
            })
          )
        ),
        !editing && _react2.default.createElement(
          _FlexContainer2.default,
          { alignItems: 'baseline' },
          _react2.default.createElement(type, {
            onClick: this._handleEdit,
            style: getHeadingStyles(type, value.length === 0)
          }, value || placeholder),
          _react2.default.createElement(_IconButton2.default, {
            variant: 'plain',
            altText: 'Edit',
            icon: _EditOutline2.default,
            onClick: this._handleEdit,
            _style: BUTTON_SPACING
          })
        )
      );
    }
  }]);
  return TxlTitleEditableControlled;
}(_react2.default.Component), _class2.displayName = 'TitleEditableControlled', _class2.defaultProps = {
  defaultValue: '',
  editing: false,
  focused: false,
  loading: false,
  onBlur: _Base.NOOP,
  onChange: _Base.NOOP,
  onFocus: _Base.NOOP,
  tabIndex: 0,
  type: 'h1',
  value: ''
}, _temp2)) || _class;

TxlTitleEditableControlled.propTypes = {
  defaultValue: require('react').PropTypes.string.isRequired,
  editing: require('react').PropTypes.bool.isRequired,
  focused: require('react').PropTypes.bool.isRequired,
  loading: require('react').PropTypes.bool.isRequired,
  onBlur: require('react').PropTypes.func.isRequired,
  onCancel: require('react').PropTypes.func.isRequired,
  onChange: require('react').PropTypes.func.isRequired,
  onFocus: require('react').PropTypes.func.isRequired,
  onEdit: require('react').PropTypes.func.isRequired,
  onSave: require('react').PropTypes.func.isRequired,
  placeholder: require('react').PropTypes.string,
  secondaryText: require('react').PropTypes.oneOfType([require('react').PropTypes.string, require('react').PropTypes.any]),
  tabIndex: require('react').PropTypes.number.isRequired,
  type: require('react').PropTypes.oneOf(['h1', 'h2']).isRequired,
  validationState: require('react').PropTypes.oneOf(['base', 'error', 'warning', 'success']),
  value: require('react').PropTypes.string.isRequired
};
var _default = TxlTitleEditableControlled;
exports.default = _default;
;

var _temp3 = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(BUTTON_SPACING, 'BUTTON_SPACING', 'src/input-fields/TitleEditableControlled.jsx');

  __REACT_HOT_LOADER__.register(BOTTOM_BORDER_WIDTH, 'BOTTOM_BORDER_WIDTH', 'src/input-fields/TitleEditableControlled.jsx');

  __REACT_HOT_LOADER__.register(INPUT_STYLES, 'INPUT_STYLES', 'src/input-fields/TitleEditableControlled.jsx');

  __REACT_HOT_LOADER__.register(getHeadingStyles, 'getHeadingStyles', 'src/input-fields/TitleEditableControlled.jsx');

  __REACT_HOT_LOADER__.register(TxlTitleEditableControlled, 'TxlTitleEditableControlled', 'src/input-fields/TitleEditableControlled.jsx');

  __REACT_HOT_LOADER__.register(_default, 'default', 'src/input-fields/TitleEditableControlled.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvVGl0bGVFZGl0YWJsZUNvbnRyb2xsZWQuanN4Il0sIm5hbWVzIjpbIkJVVFRPTl9TUEFDSU5HIiwibWFyZ2luTGVmdCIsIkJPVFRPTV9CT1JERVJfV0lEVEgiLCJJTlBVVF9TVFlMRVMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXIiLCJib3hTaXppbmciLCJmbGV4QmFzaXMiLCJmbGV4R3JvdyIsIm1hcmdpbkJvdHRvbSIsIm1pbldpZHRoIiwib3V0bGluZSIsIm92ZXJmbG93IiwidGV4dEluZGVudCIsImdldEhlYWRpbmdTdHlsZXMiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJjb2xvciIsIlR4bFRpdGxlRWRpdGFibGVDb250cm9sbGVkIiwiX2Fzc2lnbklucHV0UmVmIiwiX2hhbmRsZUJsdXIiLCJfaGFuZGxlQ2FuY2VsIiwiX2hhbmRsZUNoYW5nZSIsIl9oYW5kbGVFZGl0IiwiX2hhbmRsZUZvY3VzIiwiX2hhbmRsZUtleURvd24iLCJfaGFuZGxlU2F2ZSIsInByZXZQcm9wcyIsInByb3BzIiwiZm9jdXNlZCIsIl9pbnB1dCIsImZvY3VzIiwibm9kZSIsInRhcmdldCIsInZhbHVlIiwib25CbHVyIiwib25DYW5jZWwiLCJvbkNoYW5nZSIsIm9uRWRpdCIsIm9uRm9jdXMiLCJrZXlDb2RlIiwidW5kZWZpbmVkIiwib25TYXZlIiwiZWRpdGluZyIsImxvYWRpbmciLCJzZWNvbmRhcnlUZXh0IiwidGFiSW5kZXgiLCJ2YWxpZGF0aW9uU3RhdGUiLCJsZW5ndGgiLCJjcmVhdGVFbGVtZW50Iiwib25DbGljayIsInN0eWxlIiwiQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJkZWZhdWx0UHJvcHMiLCJkZWZhdWx0VmFsdWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUVBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7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QUEsWUFBZSxZQUFXLFVBQTFCO0FBQ0csMEJBQU1NLGFBQU4sQ0FDQ2xDLElBREQsRUFFQztBQUNFbUMscUJBQVMsS0FBSzNCLFdBRGhCO0FBRUU0QixtQkFBT3JDLGlCQUFpQkMsSUFBakIsRUFBdUJtQixNQUFNYyxNQUFOLEtBQWlCLENBQXhDO0FBRlQsV0FGRCxFQU1DZCxTQUFTbEIsV0FOVixDQURIO0FBVUU7QUFDRSxxQkFBUSxPQURWO0FBRUUscUJBQVEsTUFGVjtBQUdFLHVDQUhGO0FBSUUscUJBQVMsS0FBS08sV0FKaEI7QUFLRSxvQkFBUXZCO0FBTFY7QUFWRjtBQXJERixPQURGO0FBMkVEOzs7RUE3SnNDLGdCQUFNb0QsUyxXQUl0Q0MsVyxHQUFjLHlCLFVBQ2RDLFksR0FBZTtBQUNwQkMsZ0JBQWMsRUFETTtBQUVwQlosV0FBUyxLQUZXO0FBR3BCZCxXQUFTLEtBSFc7QUFJcEJlLFdBQVMsS0FKVztBQUtwQlQsb0JBTG9CO0FBTXBCRSxzQkFOb0I7QUFPcEJFLHFCQVBvQjtBQVFwQk8sWUFBVSxDQVJVO0FBU3BCL0IsUUFBTSxJQVRjO0FBVXBCbUIsU0FBTztBQVZhLEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2VBMkpUaEIsMEI7Ozs7Ozs7OztnQ0F2TlRsQixjOztnQ0FHQUUsbUI7O2dDQUNBQyxZOztnQ0FjQVcsZ0I7O2dDQXFDQUksMEIiLCJmaWxlIjoiVGl0bGVFZGl0YWJsZUNvbnRyb2xsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJhZGl1bSBmcm9tICdyYWRpdW0nO1xuXG5pbXBvcnQgeyBOT09QIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCBGbGV4Q29udGFpbmVyIGZyb20gJy4uL2xheW91dC9GbGV4Q29udGFpbmVyJztcbmltcG9ydCBJbnB1dEZpZWxkQmFzZSBmcm9tICcuL19JbnB1dEZpZWxkQmFzZSc7XG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tICcuLi9wcm9ncmVzcy1pbmRpY2F0b3JzL0xvYWRpbmdJbmRpY2F0b3InO1xuaW1wb3J0IEljb25CdXR0b24gZnJvbSAnLi4vYnV0dG9ucy9JY29uQnV0dG9uJztcbmltcG9ydCBFZGl0IGZyb20gJy4uL2ljb25zL0VkaXRPdXRsaW5lJztcbmltcG9ydCBDaGVjayBmcm9tICcuLi9pY29ucy9DaGVjayc7XG5pbXBvcnQgQ2xvc2UgZnJvbSAnLi4vaWNvbnMvQ2xvc2UnO1xuaW1wb3J0IHtcbiAgREVGQVVMVF9GT05UX0ZBTUlMWSxcbiAgSEVBRElOR19MQVJHRSxcbiAgSEVBRElOR19NRURJVU0sXG59IGZyb20gJy4uL3N0eWxlcy9taXhpbnMvdHlwZSc7XG5pbXBvcnQgeyBDT0xPUl9ORVVUUkFMIH0gZnJvbSAnLi4vc3R5bGVzL3RoZW1lJztcbmltcG9ydCB7IGdyaWRVbml0cyBhcyBndSB9IGZyb20gJy4uL3N0eWxlcy9oZWxwZXJzJztcbmltcG9ydCB7XG4gIEVTQ0FQRSxcbiAgRU5URVIsXG59IGZyb20gJy4uL2NvbnN0YW50cy9LZXlDb2Rlcyc7XG5cbmNvbnN0IEJVVFRPTl9TUEFDSU5HID0ge1xuICBtYXJnaW5MZWZ0OiBndSgyKSxcbn07XG5jb25zdCBCT1RUT01fQk9SREVSX1dJRFRIID0gJzFweCc7XG5jb25zdCBJTlBVVF9TVFlMRVMgPSB7XG4gIC4uLkRFRkFVTFRfRk9OVF9GQU1JTFksXG4gIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgYm9yZGVyOiAnbm9uZScsXG4gIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICBmbGV4QmFzaXM6ICcxMDAlJyxcbiAgZmxleEdyb3c6IDEsXG4gIG1hcmdpbkJvdHRvbTogYC0ke0JPVFRPTV9CT1JERVJfV0lEVEh9YCxcbiAgbWluV2lkdGg6IDAsIC8vIGZvciBNUyBFZGdlXG4gIG91dGxpbmU6ICdub25lJyxcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICB0ZXh0SW5kZW50OiAwLFxufTtcblxuY29uc3QgZ2V0SGVhZGluZ1N0eWxlcyA9ICh0eXBlOiAnaDEnIHwgJ2gyJywgcGxhY2Vob2xkZXI6IGJvb2xlYW4pID0+ICh7XG4gIC4uLkRFRkFVTFRfRk9OVF9GQU1JTFksXG4gIC4uLih0eXBlID09PSAnaDEnID8gSEVBRElOR19MQVJHRSA6IEhFQURJTkdfTUVESVVNKSxcbiAgLi4uKHBsYWNlaG9sZGVyID8geyBjb2xvcjogQ09MT1JfTkVVVFJBTFsnMjAwJ10gfSA6IHt9KSxcbn0pO1xuXG5leHBvcnQgdHlwZSBDYWxsYmFja0FyZ3VtZW50ID0ge1xuICB2YWx1ZTogc3RyaW5nO1xufVxuXG4vLyBUT0RPOiB1c2UgU3ludGhldGljSW5wdXRFdmVudCBpbnN0ZWFkIG9mIHRoaXMsIHdoZW4gZXNsaW50IG5vIGxvbmdlciB0aGlua3MgaXQncyB1bmRlZmluZWQuIFRYTEVORy0zNzBcbnR5cGUgRXZlbnRBcmd1bWVudCA9IHtcbiAgdGFyZ2V0OiB7XG4gICAgdmFsdWU6IHN0cmluZztcbiAgfVxufVxuXG50eXBlIFByb3BzID0ge1xuICBkZWZhdWx0VmFsdWU6IHN0cmluZztcbiAgZWRpdGluZzogYm9vbGVhbjtcbiAgZm9jdXNlZDogYm9vbGVhbjtcbiAgbG9hZGluZzogYm9vbGVhbjtcbiAgb25CbHVyOiAob2JqOiBDYWxsYmFja0FyZ3VtZW50KSA9PiB2b2lkO1xuICBvbkNhbmNlbDogKCkgPT4gdm9pZDtcbiAgb25DaGFuZ2U6IChvYmo6IENhbGxiYWNrQXJndW1lbnQpID0+IHZvaWQ7XG4gIG9uRm9jdXM6IChvYmo6IENhbGxiYWNrQXJndW1lbnQpID0+IHZvaWQ7XG4gIG9uRWRpdDogKCkgPT4gdm9pZDtcbiAgb25TYXZlOiAoKSA9PiB2b2lkO1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgc2Vjb25kYXJ5VGV4dD86IHN0cmluZyB8IEhUTUxFbGVtZW50O1xuICB0YWJJbmRleDogbnVtYmVyO1xuICB0eXBlOiAnaDEnIHwgJ2gyJztcbiAgdmFsaWRhdGlvblN0YXRlPzogJ2Jhc2UnIHwgJ2Vycm9yJyB8ICd3YXJuaW5nJyB8ICdzdWNjZXNzJztcbiAgdmFsdWU6IHN0cmluZztcbn1cblxuQFJhZGl1bVxuY2xhc3MgVHhsVGl0bGVFZGl0YWJsZUNvbnRyb2xsZWQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogUHJvcHM7XG4gIF9pbnB1dDogP0hUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgc3RhdGljIGRpc3BsYXlOYW1lID0gJ1RpdGxlRWRpdGFibGVDb250cm9sbGVkJztcbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBkZWZhdWx0VmFsdWU6ICcnLFxuICAgIGVkaXRpbmc6IGZhbHNlLFxuICAgIGZvY3VzZWQ6IGZhbHNlLFxuICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgIG9uQmx1cjogTk9PUCxcbiAgICBvbkNoYW5nZTogTk9PUCxcbiAgICBvbkZvY3VzOiBOT09QLFxuICAgIHRhYkluZGV4OiAwLFxuICAgIHR5cGU6ICdoMScsXG4gICAgdmFsdWU6ICcnLFxuICB9O1xuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZm9jdXNlZCAmJiAhcHJldlByb3BzLmZvY3VzZWQpIHtcbiAgICAgIHRoaXMuX2lucHV0ICYmIHRoaXMuX2lucHV0LmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgX2Fzc2lnbklucHV0UmVmID0gKG5vZGU6IEhUTUxJbnB1dEVsZW1lbnQpOiB2b2lkID0+IHsgdGhpcy5faW5wdXQgPSBub2RlOyB9O1xuXG4gIC8vIHVzZXJzIHJlc3BvbnNpYmlsaXR5IHRvIGhhbmRsZSAnZm9jdXNlZCcgcHJvcFxuICBfaGFuZGxlQmx1ciA9ICh7IHRhcmdldCB9OiBFdmVudEFyZ3VtZW50KTogdm9pZCA9PiB7XG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gdGFyZ2V0O1xuICAgIHRoaXMucHJvcHMub25CbHVyKHsgdmFsdWUgfSk7XG4gIH07XG5cbiAgLy8gQnV0dG9uIHRvIGNhbmNlbCBhY3RpdmUgY2hhbmdlcy4gVXNlcnMgcmVzcG9uc2liaWxpdHkgdG8gcmVzdG9yZSBwcmV2aW91cyBzdGF0ZS5cbiAgX2hhbmRsZUNhbmNlbCA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLnByb3BzLm9uQ2FuY2VsKCk7XG4gIH07XG5cbiAgX2hhbmRsZUNoYW5nZSA9ICh7IHRhcmdldCB9OiBFdmVudEFyZ3VtZW50KTogdm9pZCA9PiB7XG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gdGFyZ2V0O1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UoeyB2YWx1ZSB9KTtcbiAgfTtcblxuICAvLyBCdXR0b24gdG8gdHJpZ2dlciBlZGl0IG1vZGUuIFVzZXJzIHJlc3BvbnNpYmlsaXR5IHRvIGhhbmRsZSBlZGl0aW5nL2ZvY3VzZWQgcHJvcHMuXG4gIF9oYW5kbGVFZGl0ID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMucHJvcHMub25FZGl0KCk7XG4gIH07XG5cbiAgLy8gdXNlcnMgcmVzcG9uc2liaWxpdHkgdG8gaGFuZGxlICdmb2N1c2VkJyBwcm9wXG4gIF9oYW5kbGVGb2N1cyA9ICh7IHRhcmdldCB9OiBFdmVudEFyZ3VtZW50KTogdm9pZCA9PiB7XG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gdGFyZ2V0O1xuICAgIHRoaXMucHJvcHMub25Gb2N1cyh7IHZhbHVlIH0pO1xuICB9O1xuXG4gIF9oYW5kbGVLZXlEb3duID0gKHsga2V5Q29kZSB9OiBLZXlib2FyZEV2ZW50KTogdm9pZCA9PiB7XG4gICAgc3dpdGNoIChrZXlDb2RlKSB7XG4gICAgICBjYXNlIEVOVEVSOlxuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlU2F2ZSgpO1xuICAgICAgY2FzZSBFU0NBUEU6XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVDYW5jZWwoKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIC8vIEJ1dHRvbiB0byBzYXZlIGN1cnJlbnQgdmFsdWUuIFBhc3NlcyBiYWNrIHZhbHVlIHByb3AuXG4gIF9oYW5kbGVTYXZlID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMucHJvcHMub25TYXZlKHsgdmFsdWU6IHRoaXMucHJvcHMudmFsdWUgfSk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGVkaXRpbmcsXG4gICAgICBmb2N1c2VkLFxuICAgICAgbG9hZGluZyxcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgc2Vjb25kYXJ5VGV4dCxcbiAgICAgIHRhYkluZGV4LFxuICAgICAgdHlwZSxcbiAgICAgIHZhbGlkYXRpb25TdGF0ZSxcbiAgICAgIHZhbHVlLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS1jb21wb25lbnQ9XCJUeGxUaXRsZUVkaXRhYmxlXCI+XG4gICAgICAgIHtlZGl0aW5nICYmXG4gICAgICAgIDxGbGV4Q29udGFpbmVyIGFsaWduSXRlbXM9XCJiYXNlbGluZVwiPlxuICAgICAgICAgIDxJbnB1dEZpZWxkQmFzZVxuICAgICAgICAgICAgZm9jdXNlZD17Zm9jdXNlZH1cbiAgICAgICAgICAgIHNlY29uZGFyeVRleHQ9e3NlY29uZGFyeVRleHR9XG4gICAgICAgICAgICB2YWxpZGF0aW9uU3RhdGU9e3ZhbGlkYXRpb25TdGF0ZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAuLi5JTlBVVF9TVFlMRVMsXG4gICAgICAgICAgICAgICAgLi4uZ2V0SGVhZGluZ1N0eWxlcyh0eXBlLCB2YWx1ZS5sZW5ndGggPT09IDApLFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICBvbkJsdXI9e3RoaXMuX2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuX2hhbmRsZUZvY3VzfVxuICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuX2hhbmRsZUtleURvd259XG4gICAgICAgICAgICAgIHJlZj17dGhpcy5fYXNzaWduSW5wdXRSZWZ9XG4gICAgICAgICAgICAgIHRhYkluZGV4PXt0YWJJbmRleH1cbiAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0lucHV0RmllbGRCYXNlPlxuXG4gICAgICAgICAge2xvYWRpbmcgJiZcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e0JVVFRPTl9TUEFDSU5HfT5cbiAgICAgICAgICAgICAgPExvYWRpbmdJbmRpY2F0b3Igc2l6ZT1cInNtYWxsXCIgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIH1cblxuICAgICAgICAgIHshbG9hZGluZyAmJlxuICAgICAgICAgIDxGbGV4Q29udGFpbmVyPlxuICAgICAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cInBsYWluXCJcbiAgICAgICAgICAgICAgYWx0VGV4dD1cIlNhdmVcIlxuICAgICAgICAgICAgICBpY29uPXtDaGVja31cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5faGFuZGxlU2F2ZX1cbiAgICAgICAgICAgICAgX3N0eWxlPXtCVVRUT05fU1BBQ0lOR31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8SWNvbkJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwicGxhaW5cIlxuICAgICAgICAgICAgICBhbHRUZXh0PVwiQ2FuY2VsIGVkaXRpbmdcIlxuICAgICAgICAgICAgICBpY29uPXtDbG9zZX1cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5faGFuZGxlQ2FuY2VsfVxuICAgICAgICAgICAgICBfc3R5bGU9e0JVVFRPTl9TUEFDSU5HfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0ZsZXhDb250YWluZXI+XG4gICAgICAgICAgfVxuICAgICAgICA8L0ZsZXhDb250YWluZXI+XG4gICAgICAgIH1cblxuICAgICAgICB7IWVkaXRpbmcgJiZcbiAgICAgICAgPEZsZXhDb250YWluZXIgYWxpZ25JdGVtcz1cImJhc2VsaW5lXCI+XG4gICAgICAgICAge1JlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLl9oYW5kbGVFZGl0LFxuICAgICAgICAgICAgICBzdHlsZTogZ2V0SGVhZGluZ1N0eWxlcyh0eXBlLCB2YWx1ZS5sZW5ndGggPT09IDApLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlIHx8IHBsYWNlaG9sZGVyXG4gICAgICAgICAgKX1cblxuICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PVwicGxhaW5cIlxuICAgICAgICAgICAgYWx0VGV4dD1cIkVkaXRcIlxuICAgICAgICAgICAgaWNvbj17RWRpdH1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2hhbmRsZUVkaXR9XG4gICAgICAgICAgICBfc3R5bGU9e0JVVFRPTl9TUEFDSU5HfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRmxleENvbnRhaW5lcj5cbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUeGxUaXRsZUVkaXRhYmxlQ29udHJvbGxlZDtcbiJdfQ==