'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TxlCheckbox = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _Check = require('../icons/Check');

var _Check2 = _interopRequireDefault(_Check);

var _Minus = require('../icons/Minus');

var _Minus2 = _interopRequireDefault(_Minus);

var _WithLabel = require('./_WithLabel');

var _WithLabel2 = _interopRequireDefault(_WithLabel);

var _transitions = require('../styles/mixins/transitions');

var _helpers = require('../styles/helpers');

var _theme = require('../styles/theme');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var DISABLED_INPUT_STYLES = {
  display: 'none'
};

var INPUT_STYLES = {
  border: 'none',
  cursor: 'pointer',
  height: '100%',
  left: 0,
  margin: 0,
  opacity: 0,
  position: 'absolute',
  top: 0,
  width: '100%'
};

var CHECKBOX_CONTAINER_STYLES = (0, _extends3.default)({}, (0, _helpers.square)((0, _helpers.gridUnits)(5)), {
  alignItems: 'center',
  display: 'flex',
  justifyContent: 'center'
});

var BASE_CHECKBOX_STYLES = (0, _extends3.default)({}, (0, _helpers.square)('17px'), {
  alignItems: 'center',
  backgroundColor: 'white',
  borderColor: 'transparent',
  borderRadius: '2px',
  borderStyle: 'solid',
  borderWidth: '1px',
  display: 'flex',
  justifyContent: 'center',
  overflow: 'hidden',
  position: 'relative',
  transition: (0, _transitions.cubicTransition)('background')
});

var CHECKED_CHECKBOX_STYLES = {
  focused: {
    backgroundColor: _theme.COLOR_ACCENT['600'],
    borderColor: _theme.COLOR_ACCENT['600'],
    color: _theme.COLOR_ACCENT['600c']
  },
  resting: {
    backgroundColor: _theme.COLOR_ACCENT['500'],
    borderColor: _theme.COLOR_ACCENT['500'],
    color: _theme.COLOR_ACCENT['500c']
  }
};

var UNCHECKED_CHECKBOX_STYLES = {
  focused: {
    backgroundColor: 'white',
    borderColor: _theme.COLOR_NEUTRAL['400']
  },
  resting: {
    backgroundColor: 'white',
    borderColor: _theme.COLOR_NEUTRAL['300']
  }
};

var VARIANT_CHECKBOX_STYLES = {
  partial: {
    focused: {
      backgroundColor: _theme.COLOR_ACCENT['600'],
      borderColor: _theme.COLOR_ACCENT['600'],
      color: _theme.COLOR_ACCENT['600c']
    },
    resting: {
      backgroundColor: _theme.COLOR_ACCENT['500'],
      borderColor: _theme.COLOR_ACCENT['500'],
      color: _theme.COLOR_ACCENT['500c']
    }
  }
};

var DISABLED_CHECKBOX_STYLES = {
  checked: {
    backgroundColor: _theme.COLOR_NEUTRAL['200'],
    borderColor: _theme.COLOR_NEUTRAL['200'],
    color: 'white',
    cursor: 'not-allowed'
  },
  unchecked: {
    backgroundColor: _theme.COLOR_NEUTRAL['100'],
    borderColor: _theme.COLOR_NEUTRAL['200'],
    cursor: 'not-allowed'
  }
};

var TxlCheckbox = exports.TxlCheckbox = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlCheckbox, _React$Component);

  function TxlCheckbox() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlCheckbox);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlCheckbox.__proto__ || (0, _getPrototypeOf2.default)(TxlCheckbox)).call.apply(_ref, [this].concat(args)));

    _this.state = {
      focused: false,
      hovered: false
    };
    return _this;
  }

  (0, _createClass3.default)(TxlCheckbox, [{
    key: 'componentWillUpdate',
    value: function componentWillUpdate(nextProps, nextState) {
      // Need to make sure to not cause the visual hover/focus
      // state to stick after interacting with the input.
      if (nextProps.checked && this.state.focused && nextState.focused) {
        this.setState({
          focused: false
        });
      }
    }
  }, {
    key: '_handleChange',
    value: function _handleChange(e) {
      if (this.props.disabled) {
        return;
      }

      this.props.onChange({
        checked: e.target.checked,
        name: e.target.name
      });
    }
  }, {
    key: '_handleBlur',
    value: function _handleBlur() {
      this.setState({ focused: false });
    }
  }, {
    key: '_handleFocus',
    value: function _handleFocus() {
      this.setState({ focused: true });
    }
  }, {
    key: '_handleMouseEnter',
    value: function _handleMouseEnter() {
      this.setState({ hovered: true });
    }
  }, {
    key: '_handleMouseLeave',
    value: function _handleMouseLeave() {
      this.setState({ hovered: false });
    }
  }, {
    key: 'render',
    value: function render() {
      var variant = this.props.variant;

      var showHoverStyles = this.state.hovered || this.state.focused;
      var enabledState = showHoverStyles ? 'focused' : 'resting';
      var isVariantState = !!VARIANT_CHECKBOX_STYLES[variant];
      var disabledState = this.props.checked ? 'checked' : 'unchecked';

      var checkBoxStyle = isVariantState ? VARIANT_CHECKBOX_STYLES[variant][enabledState] : CHECKED_CHECKBOX_STYLES[enabledState];

      var checkedStateStyles = !this.props.disabled && !this.props.checked && !isVariantState ? UNCHECKED_CHECKBOX_STYLES[enabledState] : checkBoxStyle;

      var checkboxStyles = (0, _helpers.combineStyles)(BASE_CHECKBOX_STYLES, checkedStateStyles, this.props.disabled && DISABLED_CHECKBOX_STYLES[disabledState]);

      var inputStyles = (0, _helpers.combineStyles)(INPUT_STYLES, this.props.disabled && DISABLED_INPUT_STYLES);

      return _react2.default.createElement(
        'div',
        {
          'data-component': 'TxlCheckbox',
          style: CHECKBOX_CONTAINER_STYLES
        },
        _react2.default.createElement(
          'div',
          { style: checkboxStyles },
          this.props.checked && !isVariantState && _react2.default.createElement(_Check2.default, { color: checkboxStyles.color }),
          !this.props.checked && isVariantState && _react2.default.createElement(_Minus2.default, { color: checkboxStyles.color }),
          _react2.default.createElement('input', {
            checked: this.props.checked,
            disabled: this.props.disabled,
            id: this.props.id,
            name: this.props.name,
            onBlur: this._handleBlur,
            onChange: this._handleChange,
            onFocus: this._handleFocus,
            onMouseEnter: this._handleMouseEnter,
            onMouseLeave: this._handleMouseLeave,
            style: inputStyles,
            tabIndex: this.props.tabIndex,
            type: 'checkbox'
          })
        )
      );
    }
  }]);
  return TxlCheckbox;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_handleChange', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleChange'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleBlur', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleBlur'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFocus', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFocus'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleMouseEnter', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleMouseEnter'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleMouseLeave', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleMouseLeave'), _class2.prototype)), _class2)) || _class;

TxlCheckbox.defaultProps = {
  checked: false,
  disabled: false,
  onChange: _Base.NOOP,
  tabIndex: 0
};

TxlCheckbox.propTypes = {
  checked: _react.PropTypes.bool,
  disabled: _react.PropTypes.bool,
  id: _react.PropTypes.string,
  name: _react.PropTypes.string.isRequired,
  onChange: _react.PropTypes.func.isRequired,
  tabIndex: _react.PropTypes.number,
  variant: _react.PropTypes.oneOf(['partial'])
};

var _default = (0, _WithLabel2.default)({
  clickable: true,
  padding: (0, _helpers.gridUnits)(1)
}, TxlCheckbox);

exports.default = _default;
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(DISABLED_INPUT_STYLES, 'DISABLED_INPUT_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(INPUT_STYLES, 'INPUT_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(CHECKBOX_CONTAINER_STYLES, 'CHECKBOX_CONTAINER_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(BASE_CHECKBOX_STYLES, 'BASE_CHECKBOX_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(CHECKED_CHECKBOX_STYLES, 'CHECKED_CHECKBOX_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(UNCHECKED_CHECKBOX_STYLES, 'UNCHECKED_CHECKBOX_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(VARIANT_CHECKBOX_STYLES, 'VARIANT_CHECKBOX_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(DISABLED_CHECKBOX_STYLES, 'DISABLED_CHECKBOX_STYLES', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(TxlCheckbox, 'TxlCheckbox', 'src/input-fields/Checkbox.jsx');

  __REACT_HOT_LOADER__.register(_default, 'default', 'src/input-fields/Checkbox.jsx');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvQ2hlY2tib3guanN4Il0sIm5hbWVzIjpbIkRJU0FCTEVEX0lOUFVUX1NUWUxFUyIsImRpc3BsYXkiLCJJTlBVVF9TVFlMRVMiLCJib3JkZXIiLCJjdXJzb3IiLCJoZWlnaHQiLCJsZWZ0IiwibWFyZ2luIiwib3BhY2l0eSIsInBvc2l0aW9uIiwidG9wIiwid2lkdGgiLCJDSEVDS0JPWF9DT05UQUlORVJfU1RZTEVTIiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiQkFTRV9DSEVDS0JPWF9TVFlMRVMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlclJhZGl1cyIsImJvcmRlclN0eWxlIiwiYm9yZGVyV2lkdGgiLCJvdmVyZmxvdyIsInRyYW5zaXRpb24iLCJDSEVDS0VEX0NIRUNLQk9YX1NUWUxFUyIsImZvY3VzZWQiLCJjb2xvciIsInJlc3RpbmciLCJVTkNIRUNLRURfQ0hFQ0tCT1hfU1RZTEVTIiwiVkFSSUFOVF9DSEVDS0JPWF9TVFlMRVMiLCJwYXJ0aWFsIiwiRElTQUJMRURfQ0hFQ0tCT1hfU1RZTEVTIiwiY2hlY2tlZCIsInVuY2hlY2tlZCIsIlR4bENoZWNrYm94IiwiYXJncyIsInN0YXRlIiwiaG92ZXJlZCIsIm5leHRQcm9wcyIsIm5leHRTdGF0ZSIsInNldFN0YXRlIiwiZSIsInByb3BzIiwiZGlzYWJsZWQiLCJvbkNoYW5nZSIsInRhcmdldCIsIm5hbWUiLCJ2YXJpYW50Iiwic2hvd0hvdmVyU3R5bGVzIiwiZW5hYmxlZFN0YXRlIiwiaXNWYXJpYW50U3RhdGUiLCJkaXNhYmxlZFN0YXRlIiwiY2hlY2tCb3hTdHlsZSIsImNoZWNrZWRTdGF0ZVN0eWxlcyIsImNoZWNrYm94U3R5bGVzIiwiaW5wdXRTdHlsZXMiLCJpZCIsIl9oYW5kbGVCbHVyIiwiX2hhbmRsZUNoYW5nZSIsIl9oYW5kbGVGb2N1cyIsIl9oYW5kbGVNb3VzZUVudGVyIiwiX2hhbmRsZU1vdXNlTGVhdmUiLCJ0YWJJbmRleCIsIkNvbXBvbmVudCIsImRlZmF1bHRQcm9wcyIsInByb3BUeXBlcyIsImJvb2wiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwiZnVuYyIsIm51bWJlciIsIm9uZU9mIiwiY2xpY2thYmxlIiwicGFkZGluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFFQTs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7QUFLQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS0EsSUFBTUEsd0JBQXdCO0FBQzVCQyxXQUFTO0FBRG1CLENBQTlCOztBQUlBLElBQU1DLGVBQWU7QUFDbkJDLFVBQVEsTUFEVztBQUVuQkMsVUFBUSxTQUZXO0FBR25CQyxVQUFRLE1BSFc7QUFJbkJDLFFBQU0sQ0FKYTtBQUtuQkMsVUFBUSxDQUxXO0FBTW5CQyxXQUFTLENBTlU7QUFPbkJDLFlBQVUsVUFQUztBQVFuQkMsT0FBSyxDQVJjO0FBU25CQyxTQUFPO0FBVFksQ0FBckI7O0FBWUEsSUFBTUMsdURBQ0QscUJBQU8sd0JBQUcsQ0FBSCxDQUFQLENBREM7QUFFSkMsY0FBWSxRQUZSO0FBR0paLFdBQVMsTUFITDtBQUlKYSxrQkFBZ0I7QUFKWixFQUFOOztBQU9BLElBQU1DLGtEQUNELHFCQUFPLE1BQVAsQ0FEQztBQUVKRixjQUFZLFFBRlI7QUFHSkcsbUJBQWlCLE9BSGI7QUFJSkMsZUFBYSxhQUpUO0FBS0pDLGdCQUFjLEtBTFY7QUFNSkMsZUFBYSxPQU5UO0FBT0pDLGVBQWEsS0FQVDtBQVFKbkIsV0FBUyxNQVJMO0FBU0phLGtCQUFnQixRQVRaO0FBVUpPLFlBQVUsUUFWTjtBQVdKWixZQUFVLFVBWE47QUFZSmEsY0FBWSxrQ0FBZ0IsWUFBaEI7QUFaUixFQUFOOztBQWVBLElBQU1DLDBCQUEwQjtBQUM5QkMsV0FBUztBQUNQUixxQkFBaUIsb0JBQWEsS0FBYixDQURWO0FBRVBDLGlCQUFhLG9C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O0FBU0UsMEJBQWMsS0FBS0MsaUJBVHJCO0FBVUUsbUJBQU9OLFdBVlQ7QUFXRSxzQkFBVSxLQUFLYixLQUFMLENBQVdvQixRQVh2QjtBQVlFLGtCQUFLO0FBWlA7QUFSRjtBQUpGLE9BREY7QUE4QkQ7OztFQTFHOEIsZ0JBQU1DLFM7O0FBNkd2QzdCLFlBQVk4QixZQUFaLEdBQTJCO0FBQ3pCaEMsV0FBUyxLQURnQjtBQUV6QlcsWUFBVSxLQUZlO0FBR3pCQyxzQkFIeUI7QUFJekJrQixZQUFVO0FBSmUsQ0FBM0I7O0FBT0E1QixZQUFZK0IsU0FBWixHQUF3QjtBQUN0QmpDLFdBQVMsaUJBQVVrQyxJQURHO0FBRXRCdkIsWUFBVSxpQkFBVXVCLElBRkU7QUFHdEJWLE1BQUksaUJBQVVXLE1BSFE7QUFJdEJyQixRQUFNLGlCQUFVcUIsTUFBVixDQUFpQkMsVUFKRDtBQUt0QnhCLFlBQVUsaUJBQVV5QixJQUFWLENBQWVELFVBTEg7QUFNdEJOLFlBQVUsaUJBQVVRLE1BTkU7QUFPdEJ2QixXQUFTLGlCQUFVd0IsS0FBVixDQUFnQixDQUFDLFNBQUQsQ0FBaEI7QUFQYSxDQUF4Qjs7ZUFVZSx5QkFBVTtBQUN2QkMsYUFBVyxJQURZO0FBRXZCQyxXQUFTLHdCQUFHLENBQUg7QUFGYyxDQUFWLEVBR1p2QyxXQUhZLEM7Ozs7Ozs7Ozs7Z0NBMU5UakMscUI7O2dDQUlBRSxZOztnQ0FZQVUseUI7O2dDQU9BRyxvQjs7Z0NBZUFRLHVCOztnQ0FhQUkseUI7O2dDQVdBQyx1Qjs7Z0NBZUFFLHdCOztnQ0FlT0csVyIsImZpbGUiOiJDaGVja2JveC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5cbmltcG9ydCB7IGF1dG9iaW5kLCBOT09QIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCBDaGVja0ljb24gZnJvbSAnLi4vaWNvbnMvQ2hlY2snO1xuaW1wb3J0IE1pbnVzSWNvbiBmcm9tICcuLi9pY29ucy9NaW51cyc7XG5pbXBvcnQgV2l0aExhYmVsIGZyb20gJy4vX1dpdGhMYWJlbCc7XG5pbXBvcnQgeyBjdWJpY1RyYW5zaXRpb24gfSBmcm9tICcuLi9zdHlsZXMvbWl4aW5zL3RyYW5zaXRpb25zJztcbmltcG9ydCB7XG4gIGdyaWRVbml0cyBhcyBndSxcbiAgY29tYmluZVN0eWxlcyxcbiAgc3F1YXJlLFxufSBmcm9tICcuLi9zdHlsZXMvaGVscGVycyc7XG5pbXBvcnQge1xuICBDT0xPUl9ORVVUUkFMLFxuICBDT0xPUl9BQ0NFTlQsXG59IGZyb20gJy4uL3N0eWxlcy90aGVtZSc7XG5cbmNvbnN0IERJU0FCTEVEX0lOUFVUX1NUWUxFUyA9IHtcbiAgZGlzcGxheTogJ25vbmUnLFxufTtcblxuY29uc3QgSU5QVVRfU1RZTEVTID0ge1xuICBib3JkZXI6ICdub25lJyxcbiAgY3Vyc29yOiAncG9pbnRlcicsXG4gIGhlaWdodDogJzEwMCUnLFxuICBsZWZ0OiAwLFxuICBtYXJnaW46IDAsXG4gIG9wYWNpdHk6IDAsXG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICB0b3A6IDAsXG4gIHdpZHRoOiAnMTAwJScsXG59O1xuXG5jb25zdCBDSEVDS0JPWF9DT05UQUlORVJfU1RZTEVTID0ge1xuICAuLi5zcXVhcmUoZ3UoNSkpLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG59O1xuXG5jb25zdCBCQVNFX0NIRUNLQk9YX1NUWUxFUyA9IHtcbiAgLi4uc3F1YXJlKCcxN3B4JyksXG4gIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gIGJvcmRlckNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICBib3JkZXJSYWRpdXM6ICcycHgnLFxuICBib3JkZXJTdHlsZTogJ3NvbGlkJyxcbiAgYm9yZGVyV2lkdGg6ICcxcHgnLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgdHJhbnNpdGlvbjogY3ViaWNUcmFuc2l0aW9uKCdiYWNrZ3JvdW5kJyksXG59O1xuXG5jb25zdCBDSEVDS0VEX0NIRUNLQk9YX1NUWUxFUyA9IHtcbiAgZm9jdXNlZDoge1xuICAgIGJhY2tncm91bmRDb2xvcjogQ09MT1JfQUNDRU5UWyc2MDAnXSxcbiAgICBib3JkZXJDb2xvcjogQ09MT1JfQUNDRU5UWyc2MDAnXSxcbiAgICBjb2xvcjogQ09MT1JfQUNDRU5UWyc2MDBjJ10sXG4gIH0sXG4gIHJlc3Rpbmc6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IENPTE9SX0FDQ0VOVFsnNTAwJ10sXG4gICAgYm9yZGVyQ29sb3I6IENPTE9SX0FDQ0VOVFsnNTAwJ10sXG4gICAgY29sb3I6IENPTE9SX0FDQ0VOVFsnNTAwYyddLFxuICB9LFxufTtcblxuY29uc3QgVU5DSEVDS0VEX0NIRUNLQk9YX1NUWUxFUyA9IHtcbiAgZm9jdXNlZDoge1xuICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICBib3JkZXJDb2xvcjogQ09MT1JfTkVVVFJBTFsnNDAwJ10sXG4gIH0sXG4gIHJlc3Rpbmc6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgYm9yZGVyQ29sb3I6IENPTE9SX05FVVRSQUxbJzMwMCddLFxuICB9LFxufTtcblxuY29uc3QgVkFSSUFOVF9DSEVDS0JPWF9TVFlMRVMgPSB7XG4gIHBhcnRpYWw6IHtcbiAgICBmb2N1c2VkOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IENPTE9SX0FDQ0VOVFsnNjAwJ10sXG4gICAgICBib3JkZXJDb2xvcjogQ09MT1JfQUNDRU5UWyc2MDAnXSxcbiAgICAgIGNvbG9yOiBDT0xPUl9BQ0NFTlRbJzYwMGMnXSxcbiAgICB9LFxuICAgIHJlc3Rpbmc6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogQ09MT1JfQUNDRU5UWyc1MDAnXSxcbiAgICAgIGJvcmRlckNvbG9yOiBDT0xPUl9BQ0NFTlRbJzUwMCddLFxuICAgICAgY29sb3I6IENPTE9SX0FDQ0VOVFsnNTAwYyddLFxuICAgIH0sXG4gIH0sXG59O1xuXG5jb25zdCBESVNBQkxFRF9DSEVDS0JPWF9TVFlMRVMgPSB7XG4gIGNoZWNrZWQ6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IENPTE9SX05FVVRSQUxbJzIwMCddLFxuICAgIGJvcmRlckNvbG9yOiBDT0xPUl9ORVVUUkFMWycyMDAnXSxcbiAgICBjb2xvcjogJ3doaXRlJyxcbiAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gIH0sXG4gIHVuY2hlY2tlZDoge1xuICAgIGJhY2tncm91bmRDb2xvcjogQ09MT1JfTkVVVFJBTFsnMTAwJ10sXG4gICAgYm9yZGVyQ29sb3I6IENPTE9SX05FVVRSQUxbJzIwMCddLFxuICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgfSxcbn07XG5cbkBSYWRpdW1cbmV4cG9ydCBjbGFzcyBUeGxDaGVja2JveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBmb2N1c2VkOiBmYWxzZSxcbiAgICAgIGhvdmVyZWQ6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgLy8gTmVlZCB0byBtYWtlIHN1cmUgdG8gbm90IGNhdXNlIHRoZSB2aXN1YWwgaG92ZXIvZm9jdXNcbiAgICAvLyBzdGF0ZSB0byBzdGljayBhZnRlciBpbnRlcmFjdGluZyB3aXRoIHRoZSBpbnB1dC5cbiAgICBpZiAobmV4dFByb3BzLmNoZWNrZWQgJiYgdGhpcy5zdGF0ZS5mb2N1c2VkICYmIG5leHRTdGF0ZS5mb2N1c2VkKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZUNoYW5nZShlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZWQpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgIGNoZWNrZWQ6IGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICBuYW1lOiBlLnRhcmdldC5uYW1lLFxuICAgIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVCbHVyKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBmb2N1c2VkOiBmYWxzZSB9KTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRm9jdXMoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGZvY3VzZWQ6IHRydWUgfSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyZWQ6IHRydWUgfSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZU1vdXNlTGVhdmUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyZWQ6IGZhbHNlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgdmFyaWFudCB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBzaG93SG92ZXJTdHlsZXMgPSB0aGlzLnN0YXRlLmhvdmVyZWQgfHwgdGhpcy5zdGF0ZS5mb2N1c2VkO1xuICAgIGNvbnN0IGVuYWJsZWRTdGF0ZSA9IHNob3dIb3ZlclN0eWxlcyA/ICdmb2N1c2VkJyA6ICdyZXN0aW5nJztcbiAgICBjb25zdCBpc1ZhcmlhbnRTdGF0ZSA9ICEhVkFSSUFOVF9DSEVDS0JPWF9TVFlMRVNbdmFyaWFudF07XG4gICAgY29uc3QgZGlzYWJsZWRTdGF0ZSA9IHRoaXMucHJvcHMuY2hlY2tlZCA/ICdjaGVja2VkJyA6ICd1bmNoZWNrZWQnO1xuXG4gICAgY29uc3QgY2hlY2tCb3hTdHlsZSA9IGlzVmFyaWFudFN0YXRlID9cbiAgICAgICAgVkFSSUFOVF9DSEVDS0JPWF9TVFlMRVNbdmFyaWFudF1bZW5hYmxlZFN0YXRlXSA6XG4gICAgICAgIENIRUNLRURfQ0hFQ0tCT1hfU1RZTEVTW2VuYWJsZWRTdGF0ZV07XG5cbiAgICBjb25zdCBjaGVja2VkU3RhdGVTdHlsZXMgPSAhdGhpcy5wcm9wcy5kaXNhYmxlZCAmJiAhdGhpcy5wcm9wcy5jaGVja2VkICYmICFpc1ZhcmlhbnRTdGF0ZSA/XG4gICAgICBVTkNIRUNLRURfQ0hFQ0tCT1hfU1RZTEVTW2VuYWJsZWRTdGF0ZV0gOlxuICAgICAgY2hlY2tCb3hTdHlsZTtcblxuICAgIGNvbnN0IGNoZWNrYm94U3R5bGVzID0gY29tYmluZVN0eWxlcyhcbiAgICAgIEJBU0VfQ0hFQ0tCT1hfU1RZTEVTLFxuICAgICAgY2hlY2tlZFN0YXRlU3R5bGVzLFxuICAgICAgdGhpcy5wcm9wcy5kaXNhYmxlZCAmJiBESVNBQkxFRF9DSEVDS0JPWF9TVFlMRVNbZGlzYWJsZWRTdGF0ZV1cbiAgICApO1xuXG4gICAgY29uc3QgaW5wdXRTdHlsZXMgPSBjb21iaW5lU3R5bGVzKFxuICAgICAgSU5QVVRfU1RZTEVTLFxuICAgICAgdGhpcy5wcm9wcy5kaXNhYmxlZCAmJiBESVNBQkxFRF9JTlBVVF9TVFlMRVNcbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgZGF0YS1jb21wb25lbnQ9XCJUeGxDaGVja2JveFwiXG4gICAgICAgIHN0eWxlPXtDSEVDS0JPWF9DT05UQUlORVJfU1RZTEVTfVxuICAgICAgPlxuICAgICAgICA8ZGl2IHN0eWxlPXtjaGVja2JveFN0eWxlc30+XG4gICAgICAgICAge3RoaXMucHJvcHMuY2hlY2tlZCAmJlxuICAgICAgICAgICAgIWlzVmFyaWFudFN0YXRlICYmXG4gICAgICAgICAgICA8Q2hlY2tJY29uIGNvbG9yPXtjaGVja2JveFN0eWxlcy5jb2xvcn0gLz59XG4gICAgICAgICAgeyF0aGlzLnByb3BzLmNoZWNrZWQgJiZcbiAgICAgICAgICAgIGlzVmFyaWFudFN0YXRlICYmXG4gICAgICAgICAgICA8TWludXNJY29uIGNvbG9yPXtjaGVja2JveFN0eWxlcy5jb2xvcn0gLz59XG5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMucHJvcHMuY2hlY2tlZH1cbiAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmRpc2FibGVkfVxuICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMuaWR9XG4gICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICBvbkJsdXI9e3RoaXMuX2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5faGFuZGxlRm9jdXN9XG4gICAgICAgICAgICBvbk1vdXNlRW50ZXI9e3RoaXMuX2hhbmRsZU1vdXNlRW50ZXJ9XG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9e3RoaXMuX2hhbmRsZU1vdXNlTGVhdmV9XG4gICAgICAgICAgICBzdHlsZT17aW5wdXRTdHlsZXN9XG4gICAgICAgICAgICB0YWJJbmRleD17dGhpcy5wcm9wcy50YWJJbmRleH1cbiAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cblR4bENoZWNrYm94LmRlZmF1bHRQcm9wcyA9IHtcbiAgY2hlY2tlZDogZmFsc2UsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgb25DaGFuZ2U6IE5PT1AsXG4gIHRhYkluZGV4OiAwLFxufTtcblxuVHhsQ2hlY2tib3gucHJvcFR5cGVzID0ge1xuICBjaGVja2VkOiBQcm9wVHlwZXMuYm9vbCxcbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgdGFiSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsXG4gIHZhcmlhbnQ6IFByb3BUeXBlcy5vbmVPZihbJ3BhcnRpYWwnXSksXG59O1xuXG5leHBvcnQgZGVmYXVsdCBXaXRoTGFiZWwoe1xuICBjbGlja2FibGU6IHRydWUsXG4gIHBhZGRpbmc6IGd1KDEpLFxufSwgVHhsQ2hlY2tib3gpO1xuIl19