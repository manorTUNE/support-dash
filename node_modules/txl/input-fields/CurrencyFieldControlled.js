'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _isNan = require('babel-runtime/core-js/number/is-nan');

var _isNan2 = _interopRequireDefault(_isNan);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _pick = require('lodash/pick');

var _pick2 = _interopRequireDefault(_pick);

var _keys = require('lodash/keys');

var _keys2 = _interopRequireDefault(_keys);

var _Base = require('../base/Base');

var _TextField = require('./TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _currencyCodeToSymbolMap = require('../utils/currencyCodeToSymbolMap');

var _currencyCodeToSymbolMap2 = _interopRequireDefault(_currencyCodeToSymbolMap);

var _helpers = require('../styles/helpers');

var _InputStyleHelpers = require('./_InputStyleHelpers');

var _InputFieldBase = require('./_InputFieldBase');

var _formatter = require('../utils/formatter');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var CURRENCY_LABEL_STYLE = (0, _extends3.default)({}, _InputStyleHelpers.INPUT_GROUP_LABEL_STYLES, {
  alignItems: 'center',
  display: 'flex',
  marginLeft: '-' + _InputFieldBase.BEFORE_CONTENT_LEFT_MARGIN,
  marginRight: (0, _helpers.gridUnits)(2),
  whiteSpace: 'nowrap'
});

var TxlCurrencyFieldControlled = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlCurrencyFieldControlled, _React$Component);

  function TxlCurrencyFieldControlled(props, context) {
    (0, _classCallCheck3.default)(this, TxlCurrencyFieldControlled);

    var _this = (0, _possibleConstructorReturn3.default)(this, (TxlCurrencyFieldControlled.__proto__ || (0, _getPrototypeOf2.default)(TxlCurrencyFieldControlled)).call(this, props, context));

    _this._placeholder = (0, _formatter.formatCurrencyStringForLocale)('123456789.12345', {
      maximumFractionDigits: props.maximumFractionDigits,
      minimumFractionDigits: props.minimumFractionDigits
    });
    return _this;
  }

  (0, _createClass3.default)(TxlCurrencyFieldControlled, [{
    key: 'focus',
    value: function focus() {
      this._textFieldRef.focus();
    }
  }, {
    key: '_handleTextFieldRef',
    value: function _handleTextFieldRef(ref) {
      this._textFieldRef = ref;
    }
  }, {
    key: '_handleChange',
    value: function _handleChange(_ref) {
      var value = _ref.value;
      var onChange = this.props.onChange;


      var decimalValue = (0, _formatter.convertCurrencyToDecimalValue)(value);
      if (!(0, _isNan2.default)(decimalValue)) {
        onChange({ value: value });
      }
    }
  }, {
    key: '_handleBlur',
    value: function _handleBlur(_ref2) {
      var value = _ref2.value;
      var _props = this.props,
          maximumFractionDigits = _props.maximumFractionDigits,
          minimumFractionDigits = _props.minimumFractionDigits,
          onChange = _props.onChange,
          onBlur = _props.onBlur;


      var formattedValue = value ? (0, _formatter.formatCurrencyStringForLocale)(value, {
        maximumFractionDigits: maximumFractionDigits,
        minimumFractionDigits: minimumFractionDigits
      }) : '';
      onBlur && onBlur({ value: formattedValue });

      onChange({ value: formattedValue });
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props,
          currencyCode = _props2.currencyCode,
          currencySymbol = _props2.currencySymbol,
          others = (0, _objectWithoutProperties3.default)(_props2, ['currencyCode', 'currencySymbol']);


      var currencyLabel = _react2.default.createElement(
        'div',
        { style: CURRENCY_LABEL_STYLE },
        currencyCode + ' ' + (currencySymbol || _currencyCodeToSymbolMap2.default[currencyCode])
      );

      return _react2.default.createElement(_TextField2.default, (0, _extends3.default)({}, (0, _pick2.default)(others, (0, _keys2.default)(_TextField2.default.propTypes)), {
        _beforeContent: currencyLabel,
        onBlur: this._handleBlur,
        onChange: this._handleChange,
        placeholder: this.props.placeholder || this._placeholder,
        ref: this._handleTextFieldRef,
        textAlign: 'right'
      }));
    }
  }]);
  return TxlCurrencyFieldControlled;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, 'focus', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, 'focus'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleTextFieldRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleTextFieldRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleChange', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleChange'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleBlur', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleBlur'), _class2.prototype)), _class2)) || _class;

exports.default = TxlCurrencyFieldControlled;


TxlCurrencyFieldControlled.displayName = 'TxlCurrencyFieldControlled';

TxlCurrencyFieldControlled.propTypes = (0, _extends3.default)({}, _TextField2.default.propTypes, {
  currencyCode: _react.PropTypes.string.isRequired,
  currencySymbol: _react.PropTypes.string,
  label: _TextField2.default.propTypes.label,
  maximumFractionDigits: _react.PropTypes.oneOf([0, 1, 2, 3, 4, 5]),
  minimumFractionDigits: _react.PropTypes.oneOf([0, 1, 2, 3, 4, 5]),
  onBlur: _TextField2.default.propTypes.onBlur,
  onChange: _TextField2.default.propTypes.onChange,
  onFocus: _TextField2.default.propTypes.onFocus,
  secondaryText: _TextField2.default.propTypes.secondaryText,
  validationState: _TextField2.default.propTypes.validationState,
  value: _react.PropTypes.string
});

TxlCurrencyFieldControlled.defaultProps = {
  maximumFractionDigits: 2,
  minimumFractionDigits: 2
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(CURRENCY_LABEL_STYLE, 'CURRENCY_LABEL_STYLE', 'src/input-fields/CurrencyFieldControlled.jsx');

  __REACT_HOT_LOADER__.register(TxlCurrencyFieldControlled, 'TxlCurrencyFieldControlled', 'src/input-fields/CurrencyFieldControlled.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvQ3VycmVuY3lGaWVsZENvbnRyb2xsZWQuanN4Il0sIm5hbWVzIjpbIkNVUlJFTkNZX0xBQkVMX1NUWUxFIiwiYWxpZ25JdGVtcyIsImRpc3BsYXkiLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJ3aGl0ZVNwYWNlIiwiVHhsQ3VycmVuY3lGaWVsZENvbnRyb2xsZWQiLCJwcm9wcyIsImNvbnRleHQiLCJfcGxhY2Vob2xkZXIiLCJtYXhpbXVtRnJhY3Rpb25EaWdpdHMiLCJtaW5pbXVtRnJhY3Rpb25EaWdpdHMiLCJfdGV4dEZpZWxkUmVmIiwiZm9jdXMiLCJyZWYiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZGVjaW1hbFZhbHVlIiwib25CbHVyIiwiZm9ybWF0dGVkVmFsdWUiLCJjdXJyZW5jeUNvZGUiLCJjdXJyZW5jeVN5bWJvbCIsIm90aGVycyIsImN1cnJlbmN5TGFiZWwiLCJwcm9wVHlwZXMiLCJfaGFuZGxlQmx1ciIsIl9oYW5kbGVDaGFuZ2UiLCJwbGFjZWhvbGRlciIsIl9oYW5kbGVUZXh0RmllbGRSZWYiLCJDb21wb25lbnQiLCJkaXNwbGF5TmFtZSIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJsYWJlbCIsIm9uZU9mIiwib25Gb2N1cyIsInNlY29uZGFyeVRleHQiLCJ2YWxpZGF0aW9uU3RhdGUiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLQSxJQUFNQTtBQUVKQyxjQUFZLFFBRlI7QUFHSkMsV0FBUyxNQUhMO0FBSUpDLDhEQUpJO0FBS0pDLGVBQWEsd0JBQUcsQ0FBSCxDQUxUO0FBTUpDLGNBQVk7QUFOUixFQUFOOztJQVVxQkMsMEI7OztBQUNuQixzQ0FBWUMsS0FBWixFQUFtQkMsT0FBbkIsRUFBNEI7QUFBQTs7QUFBQSw4S0FDcEJELEtBRG9CLEVBQ2JDLE9BRGE7O0FBRzFCLFVBQUtDLFlBQUwsR0FBb0IsOENBQThCLGlCQUE5QixFQUFpRDtBQUNuRUMsNkJBQXVCSCxNQUFNRyxxQkFEc0M7QUFFbkVDLDZCQUF1QkosTUFBTUk7QUFGc0MsS0FBakQsQ0FBcEI7QUFIMEI7QUFPM0I7Ozs7NEJBR087QUFDTixXQUFLQyxhQUFMLENBQW1CQyxLQUFuQjtBQUNEOzs7d0NBR21CQyxHLEVBQUs7QUFDdkIsV0FBS0YsYUFBTCxHQUFxQkUsR0FBckI7QUFDRDs7O3dDQUd3QjtBQUFBLFVBQVRDLEtBQVMsUUFBVEEsS0FBUztBQUFBLFVBQ2ZDLFFBRGUsR0FDRixLQUFLVCxLQURILENBQ2ZTLFFBRGU7OztBQUd2QixVQUFNQyxlQUFlLDhDQUE4QkYsS0FBOUIsQ0FBckI7QUFDQSxVQUFJLENBQUMscUJBQWFFLFlBQWIsQ0FBTCxFQUFpQztBQUMvQkQsaUJBQVMsRUFBRUQsWUFBRixFQUFUO0FBQ0Q7QUFDRjs7O3VDQUdzQjtBQUFBLFVBQVRBLEtBQVMsU0FBVEEsS0FBUztBQUFBLG1CQU1qQixLQUFLUixLQU5ZO0FBQUEsVUFFbkJHLHFCQUZtQixVQUVuQkEscUJBRm1CO0FBQUEsVUFHbkJDLHFCQUhtQixVQUduQkEscUJBSG1CO0FBQUEsVUFJbkJLLFFBSm1CLFVBSW5CQSxRQUptQjtBQUFBLFVBS25CRSxNQUxtQixVQUtuQkEsTUFMbUI7OztBQVFyQixVQUFNQyxpQkFBaUJKLFFBQ3ZCLDhDQUE4QkEsS0FBOUIsRUFBcUM7QUFDbkNMLG9EQURtQztBQUVuQ0M7QUFGbUMsT0FBckMsQ0FEdUIsR0FJbEIsRUFKTDtBQUtBTyxnQkFBVUEsT0FBTyxFQUFFSCxPQUFPSSxjQUFULEVBQVAsQ0FBVjs7QUFFQUgsZUFBUyxFQUFFRCxPQUFPSSxjQUFULEVBQVQ7QUFDRDs7OzZCQUVRO0FBQUEsb0JBS0gsS0FBS1osS0FMRjtBQUFBLFVBRUxhLFlBRkssV0FFTEEsWUFGSztBQUFBLFVBR0xDLGNBSEssV0FHTEEsY0FISztBQUFBLFVBSUZDLE1BSkU7OztBQU9QLFVBQU1DLGdCQUNKO0FBQUE7QUFBQSxVQUFLLE9BQU92QixvQkFBWjtBQUNNb0Isb0JBRE4sVUFDc0JDLGtCQUFrQixrQ0FBd0JELFlBQXhCLENBRHhDO0FBQUEsT0FERjs7QUFNQSxhQUNFLDhFQUNNLG9CQUFLRSxNQUFMLEVBQWEsb0JBQUssb0JBQVVFLFNBQWYsQ0FBYixDQUROO0FBRUUsd0JBQWdCRCxhQUZsQjtBQUdFLGdCQUFRLEtBQUtFLFdBSGY7QUFJRSxrQkFBVSxLQUFLQyxhQUpqQjtBQUtFLHFCQUFhLEtBQUtuQixLQUFMLENBQVdvQixXQUFYLElBQTBCLEtBQUtsQixZQUw5QztBQU1FLGFBQUssS0FBS21CLG1CQU5aO0FBT0UsbUJBQVc7QUFQYixTQURGO0FBV0Q7OztFQXpFcUQsZ0JBQU1DLFM7O2tCQUF6Q3ZCLDBCOzs7QUE0RXJCQSwyQkFBMkJ3QixXQUEzQixHQUF5Qyw0QkFBekM7O0FBRUF4QiwyQkFBMkJrQixTQUEzQiw4QkFDSyxvQkFBVUEsU0FEZjtBQUVFSixnQkFBYyxpQkFBVVcsTUFBVixDQUFpQkMsVUFGakM7QUFHRVgsa0JBQWdCLGlCQUFVVSxNQUg1QjtBQUlFRSxTQUFPLG9CQUFVVCxTQUFWLENBQW9CUyxLQUo3QjtBQUtFdkIseUJBQXVCLGlCQUFVd0IsS0FBVixDQUFnQixDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLEVBQWdCLENBQWhCLENBQWhCLENBTHpCO0FBTUV2Qix5QkFBdUIsaUJBQVV1QixLQUFWLENBQWdCLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVixFQUFhLENBQWIsRUFBZ0IsQ0FBaEIsQ0FBaEIsQ0FOekI7QUFPRWhCLFVBQVEsb0JBQVVNLFNBQVYsQ0FBb0JOLE1BUDlCO0FBUUVGLFlBQVUsb0JBQVVRLFNBQVYsQ0FBb0JSLFFBUmhDO0FBU0VtQixXQUFTLG9CQUFVWCxTQUFWLENBQW9CVyxPQVQvQjtBQVVFQyxpQkFBZSxvQkFBVVosU0FBVixDQUFvQlksYUFWckM7QUFXRUMsbUJBQWlCLG9CQUFVYixTQUFWLENBQW9CYSxlQVh2QztBQVlFdEIsU0FBTyxpQkFBVWdCO0FBWm5COztBQWVBekIsMkJBQTJCZ0MsWUFBM0IsR0FBMEM7QUFDeEM1Qix5QkFBdUIsQ0FEaUI7QUFFeENDLHlCQUF1QjtBQUZpQixDQUExQzs7Ozs7Ozs7Z0NBdkdNWCxvQjs7Z0NBVWVNLDBCIiwiZmlsZSI6IkN1cnJlbmN5RmllbGRDb250cm9sbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSYWRpdW0gZnJvbSAncmFkaXVtJztcbmltcG9ydCBwaWNrIGZyb20gJ2xvZGFzaC9waWNrJztcbmltcG9ydCBrZXlzIGZyb20gJ2xvZGFzaC9rZXlzJztcblxuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tICcuLi9iYXNlL0Jhc2UnO1xuaW1wb3J0IFRleHRGaWVsZCBmcm9tICcuL1RleHRGaWVsZCc7XG5pbXBvcnQgY3VycmVuY3lDb2RlVG9TeW1ib2xNYXAgZnJvbSAnLi4vdXRpbHMvY3VycmVuY3lDb2RlVG9TeW1ib2xNYXAnO1xuaW1wb3J0IHsgZ3JpZFVuaXRzIGFzIGd1IH0gZnJvbSAnLi4vc3R5bGVzL2hlbHBlcnMnO1xuaW1wb3J0IHsgSU5QVVRfR1JPVVBfTEFCRUxfU1RZTEVTIH0gZnJvbSAnLi9fSW5wdXRTdHlsZUhlbHBlcnMnO1xuaW1wb3J0IHsgQkVGT1JFX0NPTlRFTlRfTEVGVF9NQVJHSU4gfSBmcm9tICcuL19JbnB1dEZpZWxkQmFzZSc7XG5pbXBvcnQge1xuICBjb252ZXJ0Q3VycmVuY3lUb0RlY2ltYWxWYWx1ZSxcbiAgZm9ybWF0Q3VycmVuY3lTdHJpbmdGb3JMb2NhbGUsXG59IGZyb20gJy4uL3V0aWxzL2Zvcm1hdHRlcic7XG5cbmNvbnN0IENVUlJFTkNZX0xBQkVMX1NUWUxFID0ge1xuICAuLi5JTlBVVF9HUk9VUF9MQUJFTF9TVFlMRVMsXG4gIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIG1hcmdpbkxlZnQ6IGAtJHtCRUZPUkVfQ09OVEVOVF9MRUZUX01BUkdJTn1gLFxuICBtYXJnaW5SaWdodDogZ3UoMiksXG4gIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxufTtcblxuQFJhZGl1bVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHhsQ3VycmVuY3lGaWVsZENvbnRyb2xsZWQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcblxuICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gZm9ybWF0Q3VycmVuY3lTdHJpbmdGb3JMb2NhbGUoJzEyMzQ1Njc4OS4xMjM0NScsIHtcbiAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogcHJvcHMubWF4aW11bUZyYWN0aW9uRGlnaXRzLFxuICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiBwcm9wcy5taW5pbXVtRnJhY3Rpb25EaWdpdHMsXG4gICAgfSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgZm9jdXMoKSB7XG4gICAgdGhpcy5fdGV4dEZpZWxkUmVmLmZvY3VzKCk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZVRleHRGaWVsZFJlZihyZWYpIHtcbiAgICB0aGlzLl90ZXh0RmllbGRSZWYgPSByZWY7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZUNoYW5nZSh7IHZhbHVlIH0pIHtcbiAgICBjb25zdCB7IG9uQ2hhbmdlIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgZGVjaW1hbFZhbHVlID0gY29udmVydEN1cnJlbmN5VG9EZWNpbWFsVmFsdWUodmFsdWUpO1xuICAgIGlmICghTnVtYmVyLmlzTmFOKGRlY2ltYWxWYWx1ZSkpIHtcbiAgICAgIG9uQ2hhbmdlKHsgdmFsdWUgfSk7XG4gICAgfVxuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVCbHVyKHsgdmFsdWUgfSkge1xuICAgIGNvbnN0IHtcbiAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0cyxcbiAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0cyxcbiAgICAgIG9uQ2hhbmdlLFxuICAgICAgb25CbHVyLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgZm9ybWF0dGVkVmFsdWUgPSB2YWx1ZSA/XG4gICAgZm9ybWF0Q3VycmVuY3lTdHJpbmdGb3JMb2NhbGUodmFsdWUsIHtcbiAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0cyxcbiAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0cyxcbiAgICB9KSA6ICcnO1xuICAgIG9uQmx1ciAmJiBvbkJsdXIoeyB2YWx1ZTogZm9ybWF0dGVkVmFsdWUgfSk7XG5cbiAgICBvbkNoYW5nZSh7IHZhbHVlOiBmb3JtYXR0ZWRWYWx1ZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICBjdXJyZW5jeVN5bWJvbCxcbiAgICAgIC4uLm90aGVyc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgY3VycmVuY3lMYWJlbCA9IChcbiAgICAgIDxkaXYgc3R5bGU9e0NVUlJFTkNZX0xBQkVMX1NUWUxFfT5cbiAgICAgICAge2Ake2N1cnJlbmN5Q29kZX0gJHtjdXJyZW5jeVN5bWJvbCB8fCBjdXJyZW5jeUNvZGVUb1N5bWJvbE1hcFtjdXJyZW5jeUNvZGVdfWB9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgey4uLnBpY2sob3RoZXJzLCBrZXlzKFRleHRGaWVsZC5wcm9wVHlwZXMpKX1cbiAgICAgICAgX2JlZm9yZUNvbnRlbnQ9e2N1cnJlbmN5TGFiZWx9XG4gICAgICAgIG9uQmx1cj17dGhpcy5faGFuZGxlQmx1cn1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMuX2hhbmRsZUNoYW5nZX1cbiAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXIgfHwgdGhpcy5fcGxhY2Vob2xkZXJ9XG4gICAgICAgIHJlZj17dGhpcy5faGFuZGxlVGV4dEZpZWxkUmVmfVxuICAgICAgICB0ZXh0QWxpZ249eydyaWdodCd9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuVHhsQ3VycmVuY3lGaWVsZENvbnRyb2xsZWQuZGlzcGxheU5hbWUgPSAnVHhsQ3VycmVuY3lGaWVsZENvbnRyb2xsZWQnO1xuXG5UeGxDdXJyZW5jeUZpZWxkQ29udHJvbGxlZC5wcm9wVHlwZXMgPSB7XG4gIC4uLlRleHRGaWVsZC5wcm9wVHlwZXMsXG4gIGN1cnJlbmN5Q29kZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBjdXJyZW5jeVN5bWJvbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgbGFiZWw6IFRleHRGaWVsZC5wcm9wVHlwZXMubGFiZWwsXG4gIG1heGltdW1GcmFjdGlvbkRpZ2l0czogUHJvcFR5cGVzLm9uZU9mKFswLCAxLCAyLCAzLCA0LCA1XSksXG4gIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogUHJvcFR5cGVzLm9uZU9mKFswLCAxLCAyLCAzLCA0LCA1XSksXG4gIG9uQmx1cjogVGV4dEZpZWxkLnByb3BUeXBlcy5vbkJsdXIsXG4gIG9uQ2hhbmdlOiBUZXh0RmllbGQucHJvcFR5cGVzLm9uQ2hhbmdlLFxuICBvbkZvY3VzOiBUZXh0RmllbGQucHJvcFR5cGVzLm9uRm9jdXMsXG4gIHNlY29uZGFyeVRleHQ6IFRleHRGaWVsZC5wcm9wVHlwZXMuc2Vjb25kYXJ5VGV4dCxcbiAgdmFsaWRhdGlvblN0YXRlOiBUZXh0RmllbGQucHJvcFR5cGVzLnZhbGlkYXRpb25TdGF0ZSxcbiAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG59O1xuXG5UeGxDdXJyZW5jeUZpZWxkQ29udHJvbGxlZC5kZWZhdWx0UHJvcHMgPSB7XG4gIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMixcbiAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLFxufTtcbiJdfQ==