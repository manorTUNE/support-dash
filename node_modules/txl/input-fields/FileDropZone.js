'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _FileDropZoneControlled = require('./FileDropZoneControlled');

var _FileDropZoneControlled2 = _interopRequireDefault(_FileDropZoneControlled);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var TxlFileDropZone = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlFileDropZone, _React$Component);

  function TxlFileDropZone() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlFileDropZone);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlFileDropZone.__proto__ || (0, _getPrototypeOf2.default)(TxlFileDropZone)).call.apply(_ref, [this].concat(args)));

    _this.state = {
      dragging: false
    };
    return _this;
  }

  (0, _createClass3.default)(TxlFileDropZone, [{
    key: '_handleDragStart',
    value: function _handleDragStart(_ref2) {
      var event = _ref2.event;

      event.preventDefault();
    }
  }, {
    key: '_handleDragEnter',
    value: function _handleDragEnter(_ref3) {
      var event = _ref3.event;

      event.preventDefault();
      this.lastEntered = event.target;
      this.setState({ dragging: true });
    }
  }, {
    key: '_handleDragLeave',
    value: function _handleDragLeave(_ref4) {
      var event = _ref4.event;

      event.preventDefault();
      if (this.lastEntered === event.target) {
        this.setState({ dragging: false });
      }
    }
  }, {
    key: '_handleDragOver',
    value: function _handleDragOver(_ref5) {
      var event = _ref5.event;

      event.preventDefault();
    }
  }, {
    key: '_handleDrop',
    value: function _handleDrop(_ref6) {
      var event = _ref6.event;

      event.preventDefault();
      this.setState({ dragging: false });

      this._handleFilesSelected({ event: event });
    }
  }, {
    key: '_handleFilesSelected',
    value: function _handleFilesSelected(_ref7) {
      var event = _ref7.event;
      var dataTransfer = event.dataTransfer,
          target = event.target;

      var selectedFiles = dataTransfer ? dataTransfer.files : target.files;
      var selectedFilesList = [];
      var numberOfFilesToSelect = this.props.multiFile ? selectedFiles.length : 1;
      for (var i = 0; i < numberOfFilesToSelect; i++) {
        selectedFilesList.push(selectedFiles.item(i));
      }

      this.props.onFilesSelected({ files: selectedFilesList });
    }
  }, {
    key: 'render',
    value: function render() {
      var dragging = this.state.dragging;
      var _props = this.props,
          compact = _props.compact,
          disabled = _props.disabled,
          multiFile = _props.multiFile,
          showsBorder = _props.showsBorder;


      return _react2.default.createElement(_FileDropZoneControlled2.default, {
        'data-component': 'TxlFileDropZoneControlled',
        compact: compact,
        disabled: disabled,
        dragging: dragging,
        multiFile: multiFile,
        onDragEnter: this._handleDragEnter,
        onDragLeave: this._handleDragLeave,
        onDragOver: this._handleDragOver,
        onDragStart: this._handleDragStart,
        onDrop: this._handleDrop,
        onFilesSelected: this._handleFilesSelected,
        showsBorder: showsBorder
      });
    }
  }]);
  return TxlFileDropZone;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_handleDragStart', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDragStart'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDragEnter', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDragEnter'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDragLeave', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDragLeave'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDragOver', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDragOver'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDrop', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDrop'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFilesSelected', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFilesSelected'), _class2.prototype)), _class2)) || _class;

exports.default = TxlFileDropZone;


TxlFileDropZone.displayName = 'TxlFileDropZone';

TxlFileDropZone.propTypes = {
  compact: _react.PropTypes.bool,
  disabled: _react.PropTypes.bool,
  multiFile: _react.PropTypes.bool,
  onFilesSelected: _react.PropTypes.func.isRequired,
  showsBorder: _react.PropTypes.bool
};

TxlFileDropZone.defaultProps = {
  compact: false,
  disabled: false,
  multiFile: false,
  showsBorder: true
};

TxlFileDropZone.displayName = 'TxlFileDropZone';
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlFileDropZone, 'TxlFileDropZone', 'src/input-fields/FileDropZone.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvRmlsZURyb3Bab25lLmpzeCJdLCJuYW1lcyI6WyJUeGxGaWxlRHJvcFpvbmUiLCJhcmdzIiwic3RhdGUiLCJkcmFnZ2luZyIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJsYXN0RW50ZXJlZCIsInRhcmdldCIsInNldFN0YXRlIiwiX2hhbmRsZUZpbGVzU2VsZWN0ZWQiLCJkYXRhVHJhbnNmZXIiLCJzZWxlY3RlZEZpbGVzIiwiZmlsZXMiLCJzZWxlY3RlZEZpbGVzTGlzdCIsIm51bWJlck9mRmlsZXNUb1NlbGVjdCIsInByb3BzIiwibXVsdGlGaWxlIiwibGVuZ3RoIiwiaSIsInB1c2giLCJpdGVtIiwib25GaWxlc1NlbGVjdGVkIiwiY29tcGFjdCIsImRpc2FibGVkIiwic2hvd3NCb3JkZXIiLCJfaGFuZGxlRHJhZ0VudGVyIiwiX2hhbmRsZURyYWdMZWF2ZSIsIl9oYW5kbGVEcmFnT3ZlciIsIl9oYW5kbGVEcmFnU3RhcnQiLCJfaGFuZGxlRHJvcCIsIkNvbXBvbmVudCIsImRpc3BsYXlOYW1lIiwicHJvcFR5cGVzIiwiYm9vbCIsImZ1bmMiLCJpc1JlcXVpcmVkIiwiZGVmYXVsdFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBRUE7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBR3FCQSxlOzs7QUFDbkIsNkJBQXFCO0FBQUE7O0FBQUE7O0FBQUEsc0NBQU5DLElBQU07QUFBTkEsVUFBTTtBQUFBOztBQUFBLG1MQUNWQSxJQURVOztBQUduQixVQUFLQyxLQUFMLEdBQWE7QUFDWEMsZ0JBQVU7QUFEQyxLQUFiO0FBSG1CO0FBTXBCOzs7OzRDQUcyQjtBQUFBLFVBQVRDLEtBQVMsU0FBVEEsS0FBUzs7QUFDMUJBLFlBQU1DLGNBQU47QUFDRDs7OzRDQUcyQjtBQUFBLFVBQVRELEtBQVMsU0FBVEEsS0FB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b3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJhZGl1bSBmcm9tICdyYWRpdW0nO1xuXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2Jhc2UvQmFzZSc7XG5pbXBvcnQgRmlsZURyb3Bab25lQ29udHJvbGxlZCBmcm9tICcuL0ZpbGVEcm9wWm9uZUNvbnRyb2xsZWQnO1xuXG5AUmFkaXVtXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUeGxGaWxlRHJvcFpvbmUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZHJhZ2dpbmc6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZURyYWdTdGFydCh7IGV2ZW50IH0pIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVEcmFnRW50ZXIoeyBldmVudCB9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmxhc3RFbnRlcmVkID0gZXZlbnQudGFyZ2V0O1xuICAgIHRoaXMuc2V0U3RhdGUoeyBkcmFnZ2luZzogdHJ1ZSB9KTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRHJhZ0xlYXZlKHsgZXZlbnQgfSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMubGFzdEVudGVyZWQgPT09IGV2ZW50LnRhcmdldCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyYWdnaW5nOiBmYWxzZSB9KTtcbiAgICB9XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZURyYWdPdmVyKHsgZXZlbnQgfSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZURyb3AoeyBldmVudCB9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNldFN0YXRlKHsgZHJhZ2dpbmc6IGZhbHNlIH0pO1xuXG4gICAgdGhpcy5faGFuZGxlRmlsZXNTZWxlY3RlZCh7IGV2ZW50IH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVGaWxlc1NlbGVjdGVkKHsgZXZlbnQgfSkge1xuICAgIGNvbnN0IHsgZGF0YVRyYW5zZmVyLCB0YXJnZXQgfSA9IGV2ZW50O1xuICAgIGNvbnN0IHNlbGVjdGVkRmlsZXMgPSBkYXRhVHJhbnNmZXIgPyBkYXRhVHJhbnNmZXIuZmlsZXMgOiB0YXJnZXQuZmlsZXM7XG4gICAgY29uc3Qgc2VsZWN0ZWRGaWxlc0xpc3QgPSBbXTtcbiAgICBjb25zdCBudW1iZXJPZkZpbGVzVG9TZWxlY3QgPSB0aGlzLnByb3BzLm11bHRpRmlsZSA/IHNlbGVjdGVkRmlsZXMubGVuZ3RoIDogMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mRmlsZXNUb1NlbGVjdDsgaSsrKSB7XG4gICAgICBzZWxlY3RlZEZpbGVzTGlzdC5wdXNoKHNlbGVjdGVkRmlsZXMuaXRlbShpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5wcm9wcy5vbkZpbGVzU2VsZWN0ZWQoeyBmaWxlczogc2VsZWN0ZWRGaWxlc0xpc3QgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkcmFnZ2luZyB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGNvbXBhY3QsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIG11bHRpRmlsZSxcbiAgICAgIHNob3dzQm9yZGVyLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxGaWxlRHJvcFpvbmVDb250cm9sbGVkXG4gICAgICAgIGRhdGEtY29tcG9uZW50PVwiVHhsRmlsZURyb3Bab25lQ29udHJvbGxlZFwiXG4gICAgICAgIGNvbXBhY3Q9e2NvbXBhY3R9XG4gICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgZHJhZ2dpbmc9e2RyYWdnaW5nfVxuICAgICAgICBtdWx0aUZpbGU9e211bHRpRmlsZX1cbiAgICAgICAgb25EcmFnRW50ZXI9e3RoaXMuX2hhbmRsZURyYWdFbnRlcn1cbiAgICAgICAgb25EcmFnTGVhdmU9e3RoaXMuX2hhbmRsZURyYWdMZWF2ZX1cbiAgICAgICAgb25EcmFnT3Zlcj17dGhpcy5faGFuZGxlRHJhZ092ZXJ9XG4gICAgICAgIG9uRHJhZ1N0YXJ0PXt0aGlzLl9oYW5kbGVEcmFnU3RhcnR9XG4gICAgICAgIG9uRHJvcD17dGhpcy5faGFuZGxlRHJvcH1cbiAgICAgICAgb25GaWxlc1NlbGVjdGVkPXt0aGlzLl9oYW5kbGVGaWxlc1NlbGVjdGVkfVxuICAgICAgICBzaG93c0JvcmRlcj17c2hvd3NCb3JkZXJ9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuVHhsRmlsZURyb3Bab25lLmRpc3BsYXlOYW1lID0gJ1R4bEZpbGVEcm9wWm9uZSc7XG5cblR4bEZpbGVEcm9wWm9uZS5wcm9wVHlwZXMgPSB7XG4gIGNvbXBhY3Q6IFByb3BUeXBlcy5ib29sLFxuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gIG11bHRpRmlsZTogUHJvcFR5cGVzLmJvb2wsXG4gIG9uRmlsZXNTZWxlY3RlZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgc2hvd3NCb3JkZXI6IFByb3BUeXBlcy5ib29sLFxufTtcblxuVHhsRmlsZURyb3Bab25lLmRlZmF1bHRQcm9wcyA9IHtcbiAgY29tcGFjdDogZmFsc2UsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgbXVsdGlGaWxlOiBmYWxzZSxcbiAgc2hvd3NCb3JkZXI6IHRydWUsXG59O1xuXG5UeGxGaWxlRHJvcFpvbmUuZGlzcGxheU5hbWUgPSAnVHhsRmlsZURyb3Bab25lJztcbiJdfQ==