'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _moment = require('moment');

var _moment2 = _interopRequireDefault(_moment);

var _isEqual = require('lodash/isEqual');

var _isEqual2 = _interopRequireDefault(_isEqual);

var _Base = require('../base/Base');

var _TimeZones = require('../constants/_TimeZones');

var _CalendarUtils = require('../calendar-picker/_CalendarUtils');

var _propTypes = require('../utils/propTypes');

var _propTypes2 = _interopRequireDefault(_propTypes);

var _SingleSelect = require('../dropdowns/_SingleSelect');

var _SingleSelect2 = _interopRequireDefault(_SingleSelect);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var TxlTimePickerControlled = (0, _radium2.default)(_class = function (_React$Component) {
  (0, _inherits3.default)(TxlTimePickerControlled, _React$Component);

  function TxlTimePickerControlled() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlTimePickerControlled);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlTimePickerControlled.__proto__ || (0, _getPrototypeOf2.default)(TxlTimePickerControlled)).call.apply(_ref, [this].concat(args)));

    _this._handleItemSelect = function () {
      return _this.___handleItemSelect__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    var _this$props = _this.props,
        boundaryEnd = _this$props.boundaryEnd,
        boundaryStart = _this$props.boundaryStart,
        pattern = _this$props.pattern;

    // need to init these here because we need access to props

    _this._timeItems = (0, _CalendarUtils.buildTimeIntervalOptions)({ boundaryEnd: boundaryEnd, boundaryStart: boundaryStart, pattern: pattern });
    return _this;
  }

  (0, _createClass3.default)(TxlTimePickerControlled, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var _props = this.props,
          boundaryEnd = _props.boundaryEnd,
          boundaryStart = _props.boundaryStart,
          pattern = _props.pattern;

      // if boundaries change, we need to rebuild time options

      if (!(0, _isEqual2.default)(nextProps.boundaryStart, boundaryStart) || !(0, _isEqual2.default)(nextProps.boundaryEnd, boundaryEnd)) {
        this._timeItems = (0, _CalendarUtils.buildTimeIntervalOptions)({
          boundaryEnd: nextProps.boundaryEnd,
          boundaryStart: nextProps.boundaryStart,
          pattern: pattern
        });
      }
    }

    // handling both onChange and onItemCreate callbacks

  }, {
    key: '___handleItemSelect__REACT_HOT_LOADER__',
    value: function ___handleItemSelect__REACT_HOT_LOADER__() {
      return this.___handleItemSelect__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleItemSelect__REACT_HOT_LOADER__',
    value: function ___handleItemSelect__REACT_HOT_LOADER__() {
      return this.___handleItemSelect__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleItemSelect__REACT_HOT_LOADER__',
    value: function ___handleItemSelect__REACT_HOT_LOADER__(_ref2) {
      var value = _ref2.value;

      // value can be `undefined` if user clicks in search field, doesn't change text, hits enter.
      // value can be `null` if user clicks in search field, doesn't change text, hits delete.
      if (value === undefined || value === null) {
        return;
      }
      if (typeof value === 'string') {
        // If handling onItemCreate, value will be a string with the 'new' item value
        this.props.onItemSelect({ value: value });
      } else if (value.value) {
        // user arrows down or clicks on dropdown item, filtered or not
        this.props.onItemSelect({ value: value.value });
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props,
          closeDropdown = _props2.closeDropdown,
          label = _props2.label,
          open = _props2.open,
          openDropdown = _props2.openDropdown,
          pattern = _props2.pattern,
          placeholder = _props2.placeholder,
          secondaryText = _props2.secondaryText,
          textValue = _props2.textValue,
          time = _props2.time,
          validationState = _props2.validationState;

      // allow showing text while editing w/o changing selected time

      var displayTime = time ? (0, _moment2.default)(time).format(pattern) : '';
      var displayValue = {
        value: textValue !== undefined ? textValue : displayTime
      };

      return _react2.default.createElement(
        'div',
        { 'data-component': 'TxlTimePickerControlled' },
        _react2.default.createElement(_SingleSelect2.default, {
          closeDropdown: closeDropdown,
          items: this._timeItems,
          label: label,
          onChange: this._handleItemSelect,
          onItemCreate: this._handleItemSelect,
          open: open,
          openDropdown: openDropdown,
          placeholder: placeholder,
          secondaryText: secondaryText,
          showCreateNew: true,
          validationState: validationState,
          value: displayValue
        })
      );
    }
  }]);
  return TxlTimePickerControlled;
}(_react2.default.Component)) || _class;

exports.default = TxlTimePickerControlled;


TxlTimePickerControlled.propTypes = {
  boundaryEnd: _propTypes2.default.timeObj,
  boundaryStart: _propTypes2.default.timeObj,
  closeDropdown: _SingleSelect2.default.propTypes.closeDropdown,
  label: _react.PropTypes.string,
  onItemSelect: _react.PropTypes.func,
  open: _react.PropTypes.bool,
  openDropdown: _SingleSelect2.default.propTypes.openDropdown,
  pattern: _react.PropTypes.string,
  placeholder: _react.PropTypes.string,
  secondaryText: _react.PropTypes.string,
  setDefaultValue: _react.PropTypes.func,
  textValue: _react.PropTypes.string,
  time: _propTypes2.default.timeObj,
  validationState: _SingleSelect2.default.propTypes.validationState
};

TxlTimePickerControlled.defaultProps = {
  boundaryEnd: { hour: 23, minute: 59, second: 59 },
  boundaryStart: { hour: 0, minute: 0, second: 0 },
  onItemSelect: _Base.NOOP,
  open: false,
  pattern: _TimeZones.DEFAULT_TIME_PATTERN
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlTimePickerControlled, 'TxlTimePickerControlled', 'src/input-fields/TimePickerControlled.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvVGltZVBpY2tlckNvbnRyb2xsZWQuanN4Il0sIm5hbWVzIjpbIlR4bFRpbWVQaWNrZXJDb250cm9sbGVkIiwiYXJncyIsIl9oYW5kbGVJdGVtU2VsZWN0IiwicHJvcHMiLCJib3VuZGFyeUVuZCIsImJvdW5kYXJ5U3RhcnQiLCJwYXR0ZXJuIiwiX3RpbWVJdGVtcyIsIm5leHRQcm9wcyIsInZhbHVlIiwidW5kZWZpbmVkIiwib25JdGVtU2VsZWN0IiwiY2xvc2VEcm9wZG93biIsImxhYmVsIiwib3BlbiIsIm9wZW5Ecm9wZG93biIsInBsYWNlaG9sZGVyIiwic2Vjb25kYXJ5VGV4dCIsInRleHRWYWx1ZSIsInRpbWUiLCJ2YWxpZGF0aW9uU3RhdGUiLCJkaXNwbGF5VGltZSIsImZvcm1hdCIsImRpc3BsYXlWYWx1ZSIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsInRpbWVPYmoiLCJzdHJpbmciLCJmdW5jIiwiYm9vbCIsInNldERlZmF1bHRWYWx1ZSIsImRlZmF1bHRQcm9wcyIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUNBOzs7Ozs7SUFHcUJBLHVCOzs7QUFDbkIscUNBQXFCO0FBQUE7O0FBQUE7O0FBQUEsc0NBQU5DLElBQU07QUFBTkEsVUFBTTtBQUFBOztBQUFBLG1NQUNWQSxJQURVOztBQUFBLFVBK0JyQkMsaUJBL0JxQjtBQUFBO0FBQUE7O0FBQUEsc0JBTWYsTUFBS0MsS0FOVTtBQUFBLFFBR2pCQyxXQUhpQixlQUdqQkEsV0FIaUI7QUFBQSxRQUlqQkMsYUFKaUIsZUFJakJBLGFBSmlCO0FBQUEsUUFLakJDLE9BTGlCLGVBS2pCQSxPQUxpQjs7QUFRbkI7O0FBQ0EsVUFBS0MsVUFBTCxHQUFrQiw2Q0FBeUIsRUFBRUgs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VyxNQVRXO0FBVWxDVixpQkFBZSxpQkFBVVUsTUFWUztBQVdsQ0csbUJBQWlCLGlCQUFVRixJQVhPO0FBWWxDVixhQUFXLGlCQUFVUyxNQVphO0FBYWxDUixRQUFNLG9CQUFhTyxPQWJlO0FBY2xDTixtQkFBaUIsdUJBQWFLLFNBQWIsQ0FBdUJMO0FBZE4sQ0FBcEM7O0FBaUJBcEIsd0JBQXdCK0IsWUFBeEIsR0FBdUM7QUFDckMzQixlQUFhLEVBQUU0QixNQUFNLEVBQVIsRUFBWUMsUUFBUSxFQUFwQixFQUF3QkMsUUFBUSxFQUFoQyxFQUR3QjtBQUVyQzdCLGlCQUFlLEVBQUUyQixNQUFNLENBQVIsRUFBV0MsUUFBUSxDQUFuQixFQUFzQkMsUUFBUSxDQUE5QixFQUZzQjtBQUdyQ3ZCLDBCQUhxQztBQUlyQ0csUUFBTSxLQUorQjtBQUtyQ1I7QUFMcUMsQ0FBdkM7Ozs7Ozs7O2dDQXZHcUJOLHVCIiwiZmlsZSI6IlRpbWVQaWNrZXJDb250cm9sbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSYWRpdW0gZnJvbSAncmFkaXVtJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsJztcblxuaW1wb3J0IHsgTk9PUCB9IGZyb20gJy4uL2Jhc2UvQmFzZSc7XG5pbXBvcnQgeyBERUZBVUxUX1RJTUVfUEFUVEVSTiB9IGZyb20gJy4uL2NvbnN0YW50cy9fVGltZVpvbmVzJztcbmltcG9ydCB7IGJ1aWxkVGltZUludGVydmFsT3B0aW9ucyB9IGZyb20gJy4uL2NhbGVuZGFyLXBpY2tlci9fQ2FsZW5kYXJVdGlscyc7XG5pbXBvcnQgVHhsUHJvcFR5cGVzIGZyb20gJy4uL3V0aWxzL3Byb3BUeXBlcyc7XG5pbXBvcnQgU2luZ2xlU2VsZWN0IGZyb20gJy4uL2Ryb3Bkb3ducy9fU2luZ2xlU2VsZWN0JztcblxuQFJhZGl1bVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHhsVGltZVBpY2tlckNvbnRyb2xsZWQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gICAgY29uc3Qge1xuICAgICAgYm91bmRhcnlFbmQsXG4gICAgICBib3VuZGFyeVN0YXJ0LFxuICAgICAgcGF0dGVybixcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIG5lZWQgdG8gaW5pdCB0aGVzZSBoZXJlIGJlY2F1c2Ugd2UgbmVlZCBhY2Nlc3MgdG8gcHJvcHNcbiAgICB0aGlzLl90aW1lSXRlbXMgPSBidWlsZFRpbWVJbnRlcnZhbE9wdGlvbnMoeyBib3VuZGFyeUVuZCwgYm91bmRhcnlTdGFydCwgcGF0dGVybiB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgY29uc3Qge1xuICAgICAgYm91bmRhcnlFbmQsXG4gICAgICBib3VuZGFyeVN0YXJ0LFxuICAgICAgcGF0dGVybixcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIGlmIGJvdW5kYXJpZXMgY2hhbmdlLCB3ZSBuZWVkIHRvIHJlYnVpbGQgdGltZSBvcHRpb25zXG4gICAgaWYgKCFpc0VxdWFsKG5leHRQcm9wcy5ib3VuZGFyeVN0YXJ0LCBib3VuZGFyeVN0YXJ0KSB8fFxuICAgICAgIWlzRXF1YWwobmV4dFByb3BzLmJvdW5kYXJ5RW5kLCBib3VuZGFyeUVuZCkpIHtcbiAgICAgIHRoaXMuX3RpbWVJdGVtcyA9IGJ1aWxkVGltZUludGVydmFsT3B0aW9ucyh7XG4gICAgICAgIGJvdW5kYXJ5RW5kOiBuZXh0UHJvcHMuYm91bmRhcnlFbmQsXG4gICAgICAgIGJvdW5kYXJ5U3RhcnQ6IG5leHRQcm9wcy5ib3VuZGFyeVN0YXJ0LFxuICAgICAgICBwYXR0ZXJuLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gaGFuZGxpbmcgYm90aCBvbkNoYW5nZSBhbmQgb25JdGVtQ3JlYXRlIGNhbGxiYWNrc1xuICBfaGFuZGxlSXRlbVNlbGVjdCA9ICh7IHZhbHVlIH0pID0+IHtcbiAgICAvLyB2YWx1ZSBjYW4gYmUgYHVuZGVmaW5lZGAgaWYgdXNlciBjbGlja3MgaW4gc2VhcmNoIGZpZWxkLCBkb2Vzbid0IGNoYW5nZSB0ZXh0LCBoaXRzIGVudGVyLlxuICAgIC8vIHZhbHVlIGNhbiBiZSBgbnVsbGAgaWYgdXNlciBjbGlja3MgaW4gc2VhcmNoIGZpZWxkLCBkb2Vzbid0IGNoYW5nZSB0ZXh0LCBoaXRzIGRlbGV0ZS5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm47IH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gSWYgaGFuZGxpbmcgb25JdGVtQ3JlYXRlLCB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nIHdpdGggdGhlICduZXcnIGl0ZW0gdmFsdWVcbiAgICAgIHRoaXMucHJvcHMub25JdGVtU2VsZWN0KHsgdmFsdWUgfSk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZS52YWx1ZSkge1xuICAgICAgLy8gdXNlciBhcnJvd3MgZG93biBvciBjbGlja3Mgb24gZHJvcGRvd24gaXRlbSwgZmlsdGVyZWQgb3Igbm90XG4gICAgICB0aGlzLnByb3BzLm9uSXRlbVNlbGVjdCh7IHZhbHVlOiB2YWx1ZS52YWx1ZSB9KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgY2xvc2VEcm9wZG93bixcbiAgICAgIGxhYmVsLFxuICAgICAgb3BlbixcbiAgICAgIG9wZW5Ecm9wZG93bixcbiAgICAgIHBhdHRlcm4sXG4gICAgICBwbGFjZWhvbGRlcixcbiAgICAgIHNlY29uZGFyeVRleHQsXG4gICAgICB0ZXh0VmFsdWUsXG4gICAgICB0aW1lLFxuICAgICAgdmFsaWRhdGlvblN0YXRlLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgLy8gYWxsb3cgc2hvd2luZyB0ZXh0IHdoaWxlIGVkaXRpbmcgdy9vIGNoYW5naW5nIHNlbGVjdGVkIHRpbWVcbiAgICBjb25zdCBkaXNwbGF5VGltZSA9IHRpbWUgPyBtb21lbnQodGltZSkuZm9ybWF0KHBhdHRlcm4pIDogJyc7XG4gICAgY29uc3QgZGlzcGxheVZhbHVlID0ge1xuICAgICAgdmFsdWU6IHRleHRWYWx1ZSAhPT0gdW5kZWZpbmVkID8gdGV4dFZhbHVlIDogZGlzcGxheVRpbWUsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtY29tcG9uZW50PVwiVHhsVGltZVBpY2tlckNvbnRyb2xsZWRcIj5cbiAgICAgICAgPFNpbmdsZVNlbGVjdFxuICAgICAgICAgIGNsb3NlRHJvcGRvd249e2Nsb3NlRHJvcGRvd259XG4gICAgICAgICAgaXRlbXM9e3RoaXMuX3RpbWVJdGVtc31cbiAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX2hhbmRsZUl0ZW1TZWxlY3R9XG4gICAgICAgICAgb25JdGVtQ3JlYXRlPXt0aGlzLl9oYW5kbGVJdGVtU2VsZWN0fVxuICAgICAgICAgIG9wZW49e29wZW59XG4gICAgICAgICAgb3BlbkRyb3Bkb3duPXtvcGVuRHJvcGRvd259XG4gICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgIHNlY29uZGFyeVRleHQ9e3NlY29uZGFyeVRleHR9XG4gICAgICAgICAgc2hvd0NyZWF0ZU5ld1xuICAgICAgICAgIHZhbGlkYXRpb25TdGF0ZT17dmFsaWRhdGlvblN0YXRlfVxuICAgICAgICAgIHZhbHVlPXtkaXNwbGF5VmFsdWV9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cblR4bFRpbWVQaWNrZXJDb250cm9sbGVkLnByb3BUeXBlcyA9IHtcbiAgYm91bmRhcnlFbmQ6IFR4bFByb3BUeXBlcy50aW1lT2JqLFxuICBib3VuZGFyeVN0YXJ0OiBUeGxQcm9wVHlwZXMudGltZU9iaixcbiAgY2xvc2VEcm9wZG93bjogU2luZ2xlU2VsZWN0LnByb3BUeXBlcy5jbG9zZURyb3Bkb3duLFxuICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgb25JdGVtU2VsZWN0OiBQcm9wVHlwZXMuZnVuYyxcbiAgb3BlbjogUHJvcFR5cGVzLmJvb2wsXG4gIG9wZW5Ecm9wZG93bjogU2luZ2xlU2VsZWN0LnByb3BUeXBlcy5vcGVuRHJvcGRvd24sXG4gIHBhdHRlcm46IFByb3BUeXBlcy5zdHJpbmcsXG4gIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzZWNvbmRhcnlUZXh0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzZXREZWZhdWx0VmFsdWU6IFByb3BUeXBlcy5mdW5jLFxuICB0ZXh0VmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHRpbWU6IFR4bFByb3BUeXBlcy50aW1lT2JqLFxuICB2YWxpZGF0aW9uU3RhdGU6IFNpbmdsZVNlbGVjdC5wcm9wVHlwZXMudmFsaWRhdGlvblN0YXRlLFxufTtcblxuVHhsVGltZVBpY2tlckNvbnRyb2xsZWQuZGVmYXVsdFByb3BzID0ge1xuICBib3VuZGFyeUVuZDogeyBob3VyOiAyMywgbWludXRlOiA1OSwgc2Vjb25kOiA1OSB9LFxuICBib3VuZGFyeVN0YXJ0OiB7IGhvdXI6IDAsIG1pbnV0ZTogMCwgc2Vjb25kOiAwIH0sXG4gIG9uSXRlbVNlbGVjdDogTk9PUCxcbiAgb3BlbjogZmFsc2UsXG4gIHBhdHRlcm46IERFRkFVTFRfVElNRV9QQVRURVJOLFxufTtcbiJdfQ==