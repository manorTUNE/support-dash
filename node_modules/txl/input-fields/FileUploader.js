'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MULTIFILE_DROP_ZONE_HEIGHT = exports.SINGLE_FILE_DROP_ZONE_WIDTH = exports.SINGLE_FILE_DROP_ZONE_HEIGHT = undefined;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _helpers = require('../styles/helpers');

var _WithLabel = require('./_WithLabel');

var _WithLabel2 = _interopRequireDefault(_WithLabel);

var _FileDropZone = require('./FileDropZone');

var _FileDropZone2 = _interopRequireDefault(_FileDropZone);

var _FilePreviewWithDetailsModal = require('../file-preview/FilePreviewWithDetailsModal');

var _FilePreviewWithDetailsModal2 = _interopRequireDefault(_FilePreviewWithDetailsModal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SINGLE_FILE_DROP_ZONE_HEIGHT = exports.SINGLE_FILE_DROP_ZONE_HEIGHT = (0, _helpers.gridUnitsRaw)(26);
var SINGLE_FILE_DROP_ZONE_WIDTH = exports.SINGLE_FILE_DROP_ZONE_WIDTH = (0, _helpers.gridUnitsRaw)(40);

var MULTIFILE_DROP_ZONE_HEIGHT = exports.MULTIFILE_DROP_ZONE_HEIGHT = (0, _helpers.gridUnitsRaw)(57);
var FILE_PREVIEW_VERTICAL_PADDING = (0, _helpers.gridUnits)(4);
var FILE_PREVIEW_HORIZONTAL_PADDING = (0, _helpers.gridUnits)(2);

var PREVIEW_STYLE = {
  paddingLeft: FILE_PREVIEW_HORIZONTAL_PADDING,
  paddingRight: FILE_PREVIEW_HORIZONTAL_PADDING,
  paddingTop: FILE_PREVIEW_VERTICAL_PADDING
};

var PREVIEWS_CONTAINER_STYLE = {
  display: 'flex',
  flexFlow: 'row wrap',
  marginLeft: '-' + FILE_PREVIEW_HORIZONTAL_PADDING,
  marginTop: '-' + FILE_PREVIEW_VERTICAL_PADDING
};

var TxlFileUploader = function TxlFileUploader(props) {
  var requestedDropZoneHeight = props.dropZoneHeight,
      fileList = props.fileList,
      multiFile = props.multiFile,
      onFileCancelled = props.onFileCancelled,
      onFileDeleted = props.onFileDeleted,
      onFileReplaced = props.onFileReplaced,
      onFilesSelected = props.onFilesSelected,
      width = props.width;


  var hasSelectedFiles = fileList.length > 0;

  var dropZoneHeight = void 0;
  if (requestedDropZoneHeight) {
    dropZoneHeight = requestedDropZoneHeight + 'px';
  } else {
    dropZoneHeight = multiFile ? MULTIFILE_DROP_ZONE_HEIGHT + 'px' : SINGLE_FILE_DROP_ZONE_HEIGHT + 'px';
  }

  var uploaderWidth = void 0;
  if (width) {
    uploaderWidth = width + 'px';
  } else {
    uploaderWidth = multiFile ? '100%' : SINGLE_FILE_DROP_ZONE_WIDTH + 'px';
  }

  var isCompact = requestedDropZoneHeight < SINGLE_FILE_DROP_ZONE_HEIGHT || width < SINGLE_FILE_DROP_ZONE_WIDTH;

  var shouldDisableDropZone = false;
  var filePreviews = fileList.map(function (fileInfo, index) {
    if (fileInfo.uploading) {
      shouldDisableDropZone = true;
    }

    return _react2.default.createElement(
      'div',
      {
        style: PREVIEW_STYLE,
        key: index
      },
      _react2.default.createElement(_FilePreviewWithDetailsModal2.default, {
        fileInfo: fileInfo,
        onDelete: onFileDeleted,
        onEdit: onFileReplaced,
        onCancel: onFileCancelled
      })
    );
  });

  var fileDropZone = _react2.default.createElement(
    'div',
    {
      id: 'DropZoneContainer',
      style: { height: dropZoneHeight }
    },
    _react2.default.createElement(_FileDropZone2.default, {
      compact: isCompact,
      disabled: shouldDisableDropZone,
      multiFile: multiFile,
      onFilesSelected: onFilesSelected,
      showsBorder: !hasSelectedFiles
    })
  );

  var isSingleFileWithoutSelectedFiles = !multiFile && !hasSelectedFiles;
  var shouldShowDropZone = multiFile || isSingleFileWithoutSelectedFiles;
  return _react2.default.createElement(
    'div',
    {
      'data-component': 'TxlFileUploader',
      style: { width: uploaderWidth }
    },
    filePreviews.length > 0 && _react2.default.createElement(
      'div',
      {
        id: 'FilePreviewsContainer',
        style: PREVIEWS_CONTAINER_STYLE
      },
      filePreviews
    ),
    shouldShowDropZone && _react2.default.createElement(
      'div',
      null,
      fileDropZone
    )
  );
};

TxlFileUploader.displayName = 'TxlFileUploader';

TxlFileUploader.propTypes = {
  dropZoneHeight: _react.PropTypes.number,
  fileList: _react.PropTypes.array,
  labelText: _react.PropTypes.string,
  multiFile: _react.PropTypes.bool,
  onFileCancelled: _react.PropTypes.func,
  onFileDeleted: _react.PropTypes.func,
  onFileReplaced: _react.PropTypes.func,
  onFilesSelected: _react.PropTypes.func,
  secondaryText: _react.PropTypes.string,
  validationState: _react.PropTypes.oneOf(['base', 'error']),
  width: _react.PropTypes.number
};

TxlFileUploader.defaultProps = {
  fileList: [],
  multiFile: false,
  onFileCancelled: _Base.NOOP,
  onFileDeleted: _Base.NOOP,
  onFileReplaced: _Base.NOOP,
  onFilesSelected: _Base.NOOP
};

var _default = (0, _WithLabel2.default)({
  defaultPosition: 'top',
  padding: (0, _helpers.gridUnits)(3)
}, (0, _radium2.default)(TxlFileUploader));

exports.default = _default;
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(SINGLE_FILE_DROP_ZONE_HEIGHT, 'SINGLE_FILE_DROP_ZONE_HEIGHT', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(SINGLE_FILE_DROP_ZONE_WIDTH, 'SINGLE_FILE_DROP_ZONE_WIDTH', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(MULTIFILE_DROP_ZONE_HEIGHT, 'MULTIFILE_DROP_ZONE_HEIGHT', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(FILE_PREVIEW_VERTICAL_PADDING, 'FILE_PREVIEW_VERTICAL_PADDING', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(FILE_PREVIEW_HORIZONTAL_PADDING, 'FILE_PREVIEW_HORIZONTAL_PADDING', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(PREVIEW_STYLE, 'PREVIEW_STYLE', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(PREVIEWS_CONTAINER_STYLE, 'PREVIEWS_CONTAINER_STYLE', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(TxlFileUploader, 'TxlFileUploader', 'src/input-fields/FileUploader.jsx');

  __REACT_HOT_LOADER__.register(_default, 'default', 'src/input-fields/FileUploader.jsx');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvRmlsZVVwbG9hZGVyLmpzeCJdLCJuYW1lcyI6WyJTSU5HTEVfRklMRV9EUk9QX1pPTkVfSEVJR0hUIiwiU0lOR0xFX0ZJTEVfRFJPUF9aT05FX1dJRFRIIiwiTVVMVElGSUxFX0RST1BfWk9ORV9IRUlHSFQiLCJGSUxFX1BSRVZJRVdfVkVSVElDQUxfUEFERElORyIsIkZJTEVfUFJFVklFV19IT1JJWk9OVEFMX1BBRERJTkciLCJQUkVWSUVXX1NUWUxFIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJwYWRkaW5nVG9wIiwiUFJFVklFV1NfQ09OVEFJTkVSX1NUWUxFIiwiZGlzcGxheSIsImZsZXhGbG93IiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsIlR4bEZpbGVVcGxvYWRlciIsInByb3BzIiwicmVxdWVzdGVkRHJvcFpvbmVIZWlnaHQiLCJkcm9wWm9uZUhlaWdodCIsImZpbGVMaXN0IiwibXVsdGlGaWxlIiwib25GaWxlQ2FuY2VsbGVkIiwib25GaWxlRGVsZXRlZCIsIm9uRmlsZVJlcGxhY2VkIiwib25GaWxlc1NlbGVjdGVkIiwid2lkdGgiLCJoYXNTZWxlY3RlZEZpbGVzIiwibGVuZ3RoIiwidXBsb2FkZXJXaWR0aCIsImlzQ29tcGFjdCIsInNob3VsZERpc2FibGVEcm9wWm9uZSIsImZpbGVQcmV2aWV3cyIsIm1hcCIsImZpbGVJbmZvIiwiaW5kZXgiLCJ1cGxvYWRpbmciLCJmaWxlRHJvcFpvbmUiLCJoZWlnaHQiLCJpc1NpbmdsZUZpbGVXaXRob3V0U2VsZWN0ZWRGaWxlcyIsInNob3VsZFNob3dEcm9wWm9uZSIsImRpc3BsYXlOYW1lIiwicHJvcFR5cGVzIiwibnVtYmVyIiwiYXJyYXkiLCJsYWJlbFRleHQiLCJzdHJpbmciLCJib29sIiwiZnVuYyIsInNlY29uZGFyeVRleHQiLCJ2YWxpZGF0aW9uU3RhdGUiLCJvbmVPZiIsImRlZmF1bHRQcm9wcyIsImRlZmF1bHRQb3NpdGlvbiIsInBh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IkZpbGVVcGxvYWRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5cbmltcG9ydCB7IE5PT1AgfSBmcm9tICcuLi9iYXNlL0Jhc2UnO1xuaW1wb3J0IHtcbiAgZ3JpZFVuaXRzIGFzIGd1LFxuICBncmlkVW5pdHNSYXcgYXMgZ3VSYXcsXG59IGZyb20gJy4uL3N0eWxlcy9oZWxwZXJzJztcbmltcG9ydCBXaXRoTGFiZWwgZnJvbSAnLi9fV2l0aExhYmVsJztcbmltcG9ydCBGaWxlRHJvcFpvbmUgZnJvbSAnLi9GaWxlRHJvcFpvbmUnO1xuaW1wb3J0IEZpbGVQcmV2aWV3V2l0aERldGFpbHNNb2RhbCBmcm9tICcuLi9maWxlLXByZXZpZXcvRmlsZVByZXZpZXdXaXRoRGV0YWlsc01vZGFsJztcblxuZXhwb3J0IGNvbnN0IFNJTkdMRV9GSUxFX0RST1BfWk9ORV9IRUlHSFQgPSBndVJhdygyNik7XG5leHBvcnQgY29uc3QgU0lOR0xFX0ZJTEVfRFJPUF9aT05FX1dJRFRIID0gZ3VSYXcoNDApO1xuXG5leHBvcnQgY29uc3QgTVVMVElGSUxFX0RST1BfWk9ORV9IRUlHSFQgPSBndVJhdyg1Nyk7XG5jb25zdCBGSUxFX1BSRVZJRVdfVkVSVElDQUxfUEFERElORyA9IGd1KDQpO1xuY29uc3QgRklMRV9QUkVWSUVXX0hPUklaT05UQUxfUEFERElORyA9IGd1KDIpO1xuXG5jb25zdCBQUkVWSUVXX1NUWUxFID0ge1xuICBwYWRkaW5nTGVmdDogRklMRV9QUkVWSUVXX0hPUklaT05UQUxfUEFERElORyxcbiAgcGFkZGluZ1JpZ2h0OiBGSUxFX1BSRVZJRVdfSE9SSVpPTlRBTF9QQURESU5HLFxuICBwYWRkaW5nVG9wOiBGSUxFX1BSRVZJRVdfVkVSVElDQUxfUEFERElORyxcbn07XG5cbmNvbnN0IFBSRVZJRVdTX0NPTlRBSU5FUl9TVFlMRSA9IHtcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBmbGV4RmxvdzogJ3JvdyB3cmFwJyxcbiAgbWFyZ2luTGVmdDogYC0ke0ZJTEVfUFJFVklFV19IT1JJWk9OVEFMX1BBRERJTkd9YCxcbiAgbWFyZ2luVG9wOiBgLSR7RklMRV9QUkVWSUVXX1ZFUlRJQ0FMX1BBRERJTkd9YCxcbn07XG5cbmNvbnN0IFR4bEZpbGVVcGxvYWRlciA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7XG4gICAgZHJvcFpvbmVIZWlnaHQ6IHJlcXVlc3RlZERyb3Bab25lSGVpZ2h0LFxuICAgIGZpbGVMaXN0LFxuICAgIG11bHRpRmlsZSxcbiAgICBvbkZpbGVDYW5jZWxsZWQsXG4gICAgb25GaWxlRGVsZXRlZCxcbiAgICBvbkZpbGVSZXBsYWNlZCxcbiAgICBvbkZpbGVzU2VsZWN0ZWQsXG4gICAgd2lkdGgsXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCBoYXNTZWxlY3RlZEZpbGVzID0gZmlsZUxpc3QubGVuZ3RoID4gMDtcblxuICBsZXQgZHJvcFpvbmVIZWlnaHQ7XG4gIGlmIChyZXF1ZXN0ZWREcm9wWm9uZUhlaWdodCkge1xuICAgIGRyb3Bab25lSGVpZ2h0ID0gYCR7cmVxdWVzdGVkRHJvcFpvbmVIZWlnaHR9cHhgO1xuICB9IGVsc2Uge1xuICAgIGRyb3Bab25lSGVpZ2h0ID0gbXVsdGlGaWxlID9cbiAgICAgIGAke01VTFRJRklMRV9EUk9QX1pPTkVfSEVJR0hUfXB4YCA6XG4gICAgICBgJHtTSU5HTEVfRklMRV9EUk9QX1pPTkVfSEVJR0hUfXB4YDtcbiAgfVxuXG4gIGxldCB1cGxvYWRlcldpZHRoO1xuICBpZiAod2lkdGgpIHtcbiAgICB1cGxvYWRlcldpZHRoID0gYCR7d2lkdGh9cHhgO1xuICB9IGVsc2Uge1xuICAgIHVwbG9hZGVyV2lkdGggPSBtdWx0aUZpbGUgPyAnMTAwJScgOiBgJHtTSU5HTEVfRklMRV9EUk9QX1pPTkVfV0lEVEh9cHhgO1xuICB9XG5cbiAgY29uc3QgaXNDb21wYWN0ID0gcmVxdWVzdGVkRHJvcFpvbmVIZWlnaHQgPCBTSU5HTEVfRklMRV9EUk9QX1pPTkVfSEVJR0hUIHx8XG4gICAgd2lkdGggPCBTSU5HTEVfRklMRV9EUk9QX1pPTkVfV0lEVEg7XG5cbiAgbGV0IHNob3VsZERpc2FibGVEcm9wWm9uZSA9IGZhbHNlO1xuICBjb25zdCBmaWxlUHJldmlld3MgPSBmaWxlTGlzdC5tYXAoKGZpbGVJbmZvLCBpbmRleCkgPT4ge1xuICAgIGlmIChmaWxlSW5mby51cGxvYWRpbmcpIHtcbiAgICAgIHNob3VsZERpc2FibGVEcm9wWm9uZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9e1BSRVZJRVdfU1RZTEV9XG4gICAgICAgIGtleT17aW5kZXh9XG4gICAgICA+XG4gICAgICAgIDxGaWxlUHJldmlld1dpdGhEZXRhaWxzTW9kYWxcbiAgICAgICAgICBmaWxlSW5mbz17ZmlsZUluZm99XG4gICAgICAgICAgb25EZWxldGU9e29uRmlsZURlbGV0ZWR9XG4gICAgICAgICAgb25FZGl0PXtvbkZpbGVSZXBsYWNlZH1cbiAgICAgICAgICBvbkNhbmNlbD17b25GaWxlQ2FuY2VsbGVkfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSk7XG5cbiAgY29uc3QgZmlsZURyb3Bab25lID0gKFxuICAgIDxkaXZcbiAgICAgIGlkPVwiRHJvcFpvbmVDb250YWluZXJcIlxuICAgICAgc3R5bGU9e3sgaGVpZ2h0OiBkcm9wWm9uZUhlaWdodCB9fVxuICAgID5cbiAgICAgIDxGaWxlRHJvcFpvbmVcbiAgICAgICAgY29tcGFjdD17aXNDb21wYWN0fVxuICAgICAgICBkaXNhYmxlZD17c2hvdWxkRGlzYWJsZURyb3Bab25lfVxuICAgICAgICBtdWx0aUZpbGU9e211bHRpRmlsZX1cbiAgICAgICAgb25GaWxlc1NlbGVjdGVkPXtvbkZpbGVzU2VsZWN0ZWR9XG4gICAgICAgIHNob3dzQm9yZGVyPXshaGFzU2VsZWN0ZWRGaWxlc31cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgY29uc3QgaXNTaW5nbGVGaWxlV2l0aG91dFNlbGVjdGVkRmlsZXMgPSAhbXVsdGlGaWxlICYmICFoYXNTZWxlY3RlZEZpbGVzO1xuICBjb25zdCBzaG91bGRTaG93RHJvcFpvbmUgPSBtdWx0aUZpbGUgfHwgaXNTaW5nbGVGaWxlV2l0aG91dFNlbGVjdGVkRmlsZXM7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgZGF0YS1jb21wb25lbnQ9XCJUeGxGaWxlVXBsb2FkZXJcIlxuICAgICAgc3R5bGU9e3sgd2lkdGg6IHVwbG9hZGVyV2lkdGggfX1cbiAgICA+XG4gICAgICB7ZmlsZVByZXZpZXdzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGlkPVwiRmlsZVByZXZpZXdzQ29udGFpbmVyXCJcbiAgICAgICAgICBzdHlsZT17UFJFVklFV1NfQ09OVEFJTkVSX1NUWUxFfVxuICAgICAgICA+XG4gICAgICAgICAge2ZpbGVQcmV2aWV3c31cbiAgICAgICAgPC9kaXY+XG4gICAgICB9XG4gICAgICB7c2hvdWxkU2hvd0Ryb3Bab25lICYmXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge2ZpbGVEcm9wWm9uZX1cbiAgICAgICAgPC9kaXY+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5UeGxGaWxlVXBsb2FkZXIuZGlzcGxheU5hbWUgPSAnVHhsRmlsZVVwbG9hZGVyJztcblxuVHhsRmlsZVVwbG9hZGVyLnByb3BUeXBlcyA9IHtcbiAgZHJvcFpvbmVIZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gIGZpbGVMaXN0OiBQcm9wVHlwZXMuYXJyYXksXG4gIGxhYmVsVGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgbXVsdGlGaWxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgb25GaWxlQ2FuY2VsbGVkOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25GaWxlRGVsZXRlZDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRmlsZVJlcGxhY2VkOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25GaWxlc1NlbGVjdGVkOiBQcm9wVHlwZXMuZnVuYyxcbiAgc2Vjb25kYXJ5VGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgdmFsaWRhdGlvblN0YXRlOiBQcm9wVHlwZXMub25lT2YoWydiYXNlJywgJ2Vycm9yJ10pLFxuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbn07XG5cblR4bEZpbGVVcGxvYWRlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGZpbGVMaXN0OiBbXSxcbiAgbXVsdGlGaWxlOiBmYWxzZSxcbiAgb25GaWxlQ2FuY2VsbGVkOiBOT09QLFxuICBvbkZpbGVEZWxldGVkOiBOT09QLFxuICBvbkZpbGVSZXBsYWNlZDogTk9PUCxcbiAgb25GaWxlc1NlbGVjdGVkOiBOT09QLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgV2l0aExhYmVsKHtcbiAgZGVmYXVsdFBvc2l0aW9uOiAndG9wJyxcbiAgcGFkZGluZzogZ3UoMyksXG59LCBSYWRpdW0oVHhsRmlsZVVwbG9hZGVyKSk7XG4iXX0=