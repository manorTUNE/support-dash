'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TxlToggleSwitch = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _WithLabel = require('./_WithLabel');

var _WithLabel2 = _interopRequireDefault(_WithLabel);

var _LoadingIndicator = require('../progress-indicators/LoadingIndicator');

var _LoadingIndicator2 = _interopRequireDefault(_LoadingIndicator);

var _helpers = require('../styles/helpers');

var _theme = require('../styles/theme');

var _transitions = require('../styles/mixins/transitions');

var _type = require('../styles/mixins/type');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var CONTAINER_HEIGHT_UNITS = 5;
var CONTAINER_WIDTH_UNITS = 7;
var TRACK_HEIGHT_UNITS = 3;
var TRACK_WIDTH_UNITS = 6;
var THUMB_SIZE = '17px';

function midpointDifference(innerSize, outerSize) {
  var unit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'px';

  return '' + (outerSize / 2 - innerSize / 2) + unit;
}

var COLORS = {
  disabled: _theme.COLOR_NEUTRAL['200'],
  off: {
    base: _theme.COLOR_NEUTRAL['300'],
    hover: _theme.COLOR_NEUTRAL['400']
  },
  on: {
    base: _theme.COLOR_ACCENT['500'],
    hover: _theme.COLOR_ACCENT['600']
  }
};

var CONTAINER_STYLES = (0, _extends3.default)({}, _type.TYPE_SMALL, {
  color: COLORS.disabled,
  height: (0, _helpers.gridUnits)(CONTAINER_HEIGHT_UNITS),
  lineHeight: (0, _helpers.gridUnits)(CONTAINER_HEIGHT_UNITS),
  position: 'relative',
  textAlign: 'center',
  width: (0, _helpers.gridUnits)(CONTAINER_WIDTH_UNITS)
});

var LOADING_CONTAINER_STYLES = {
  alignItems: 'center',
  display: 'flex',
  justifyContent: 'center'
};

var TRACK_STYLES = {
  base: {
    borderRadius: '7.5px',
    height: (0, _helpers.gridUnits)(TRACK_HEIGHT_UNITS),
    left: midpointDifference((0, _helpers.gridUnitsRaw)(TRACK_WIDTH_UNITS), (0, _helpers.gridUnitsRaw)(CONTAINER_WIDTH_UNITS)),
    position: 'absolute',
    top: midpointDifference((0, _helpers.gridUnitsRaw)(TRACK_HEIGHT_UNITS), (0, _helpers.gridUnitsRaw)(CONTAINER_HEIGHT_UNITS)),
    transition: (0, _transitions.cubicTransition)('background-color'),
    width: (0, _helpers.gridUnits)(TRACK_WIDTH_UNITS)
  }
};

var THUMB_STYLES = {
  base: (0, _extends3.default)({}, (0, _helpers.square)(THUMB_SIZE), {
    backgroundColor: 'white',
    borderRadius: '50%',
    position: 'absolute',
    top: midpointDifference(17, (0, _helpers.gridUnitsRaw)(CONTAINER_HEIGHT_UNITS)),
    transition: (0, _transitions.cubicTransition)(['transform', 'border'])
  }),
  off: {
    transform: 'translateX(0)'
  },
  on: {
    transform: 'translateX(100%)'
  }
};

var CHECKBOX_STYLES = (0, _extends3.default)({}, (0, _helpers.square)('100%'), {
  cursor: 'pointer',
  left: 0,
  opacity: 0,
  position: 'absolute',
  top: 0
});

var TxlToggleSwitch = exports.TxlToggleSwitch = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlToggleSwitch, _React$Component);

  function TxlToggleSwitch() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlToggleSwitch);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlToggleSwitch.__proto__ || (0, _getPrototypeOf2.default)(TxlToggleSwitch)).call.apply(_ref, [this].concat(args)));

    _this.state = {
      hovered: false
    };
    return _this;
  }

  (0, _createClass3.default)(TxlToggleSwitch, [{
    key: '_handleChange',
    value: function _handleChange(e) {
      this.props.onChange({
        name: e.target.name,
        on: e.target.checked
      });
    }
  }, {
    key: '_handleMouseEnter',
    value: function _handleMouseEnter() {
      this.setState({ hovered: true });
    }
  }, {
    key: '_handleMouseLeave',
    value: function _handleMouseLeave() {
      this.setState({ hovered: false });
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          on = _props.on,
          disabled = _props.disabled,
          loading = _props.loading,
          restProps = (0, _objectWithoutProperties3.default)(_props, ['on', 'disabled', 'loading']);

      var isHovered = this.state.hovered;
      var content = void 0;
      if (disabled) {
        content = _react2.default.createElement(
          'div',
          {
            'data-component': 'TxlToggleSwitch',
            style: CONTAINER_STYLES
          },
          on ? 'On' : 'Off'
        );
      } else if (loading) {
        content = _react2.default.createElement(
          'div',
          {
            'data-component': 'TxlToggleSwitch',
            style: (0, _helpers.combineStyles)(CONTAINER_STYLES, LOADING_CONTAINER_STYLES)
          },
          _react2.default.createElement(_LoadingIndicator2.default, { size: 'small', shade: 'dark' })
        );
      } else {
        var toggleColor = COLORS[on ? 'on' : 'off'][isHovered ? 'hover' : 'base'];
        var trackStyles = (0, _helpers.combineStyles)(TRACK_STYLES.base, { backgroundColor: toggleColor });
        var thumbStyles = (0, _helpers.combineStyles)(THUMB_STYLES.base, on ? THUMB_STYLES.on : THUMB_STYLES.off, { border: '1px solid ' + toggleColor });
        content = _react2.default.createElement(
          'div',
          {
            'data-component': 'TxlToggleSwitch',
            style: CONTAINER_STYLES,
            onMouseEnter: this._handleMouseEnter,
            onMouseLeave: this._handleMouseLeave
          },
          _react2.default.createElement('div', { style: trackStyles }),
          _react2.default.createElement('div', { style: thumbStyles }),
          _react2.default.createElement('input', (0, _extends3.default)({}, restProps, {
            type: 'checkbox',
            onChange: this._handleChange,
            checked: on,
            style: CHECKBOX_STYLES
          }))
        );
      }
      return content;
    }
  }]);
  return TxlToggleSwitch;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_handleChange', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleChange'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleMouseEnter', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleMouseEnter'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleMouseLeave', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleMouseLeave'), _class2.prototype)), _class2)) || _class;

TxlToggleSwitch.propTypes = {
  disabled: _react2.default.PropTypes.bool,
  loading: _react2.default.PropTypes.bool,
  name: _react2.default.PropTypes.string.isRequired,
  on: _react2.default.PropTypes.bool.isRequired,
  onChange: _react2.default.PropTypes.func.isRequired,
  tabIndex: _react2.default.PropTypes.number
};

TxlToggleSwitch.defaultProps = {
  disabled: false,
  loading: false,
  onChange: _Base.NOOP,
  tabIndex: 0
};

var _default = (0, _WithLabel2.default)({
  clickable: true,
  defaultPosition: 'left',
  itemWidth: (0, _helpers.gridUnits)(CONTAINER_WIDTH_UNITS),
  padding: {
    left: (0, _helpers.gridUnits)(8),
    right: (0, _helpers.gridUnits)(2)
  }
}, TxlToggleSwitch);

exports.default = _default;
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(CONTAINER_HEIGHT_UNITS, 'CONTAINER_HEIGHT_UNITS', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(CONTAINER_WIDTH_UNITS, 'CONTAINER_WIDTH_UNITS', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(TRACK_HEIGHT_UNITS, 'TRACK_HEIGHT_UNITS', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(TRACK_WIDTH_UNITS, 'TRACK_WIDTH_UNITS', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(THUMB_SIZE, 'THUMB_SIZE', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(midpointDifference, 'midpointDifference', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(COLORS, 'COLORS', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(CONTAINER_STYLES, 'CONTAINER_STYLES', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(LOADING_CONTAINER_STYLES, 'LOADING_CONTAINER_STYLES', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(TRACK_STYLES, 'TRACK_STYLES', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(THUMB_STYLES, 'THUMB_STYLES', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(CHECKBOX_STYLES, 'CHECKBOX_STYLES', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(TxlToggleSwitch, 'TxlToggleSwitch', 'src/input-fields/ToggleSwitch.jsx');

  __REACT_HOT_LOADER__.register(_default, 'default', 'src/input-fields/ToggleSwitch.jsx');
}();

;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnB1dC1maWVsZHMvVG9nZ2xlU3dpdGNoLmpzeCJdLCJuYW1lcyI6WyJDT05UQUlORVJfSEVJR0hUX1VOSVRTIiwiQ09OVEFJTkVSX1dJRFRIX1VOSVRTIiwiVFJBQ0tfSEVJR0hUX1VOSVRTIiwiVFJBQ0tfV0lEVEhfVU5JVFMiLCJUSFVNQl9TSVpFIiwibWlkcG9pbnREaWZmZXJlbmNlIiwiaW5uZXJTaXplIiwib3V0ZXJTaXplIiwidW5pdCIsIkNPTE9SUyIsImRpc2FibGVkIiwib2ZmIiwiYmFzZSIsImhvdmVyIiwib24iLCJDT05UQUlORVJfU1RZTEVTIiwiY29sb3IiLCJoZWlnaHQiLCJsaW5lSGVpZ2h0IiwicG9zaXRpb24iLCJ0ZXh0QWxpZ24iLCJ3aWR0aCIsIkxPQURJTkdfQ09OVEFJTkVSX1NUWUxFUyIsImFsaWduSXRlbXMiLCJkaXNwbGF5IiwianVzdGlmeUNvbnRlbnQiLCJUUkFDS19TVFlMRVMiLCJib3JkZXJSYWRpdXMiLCJsZWZ0IiwidG9wIiwidHJhbnNpdGlvbiIsIlRIVU1CX1NUWUxFUyIsImJhY2tncm91bmRDb2xvciIsInRyYW5zZm9ybSIsIkNIRUNLQk9YX1NUWUxFUyIsImN1cnNvciIsIm9wYWNpdHkiLCJUeGxUb2dnbGVTd2l0Y2giLCJhcmdzIiwic3RhdGUiLCJob3ZlcmVkIiwiZSIsInByb3BzIiwib25DaGFuZ2UiLCJuYW1lIiwidGFyZ2V0IiwiY2hlY2tlZCIsInNldFN0YXRlIiwibG9hZGluZyIsInJlc3RQcm9wcyIsImlzSG92ZXJlZCIsImNvbnRlbnQiLCJ0b2dnbGVDb2xvciIsInRyYWNrU3R5bGVzIiwidGh1bWJTdHlsZXMiLCJib3JkZXIiLCJfaGFuZGxlTW91c2VFbnRlciIsIl9oYW5kbGVNb3VzZUxlYXZlIiwiX2hhbmRsZUNoYW5nZSIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImJvb2wiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwiZnVuYyIsInRhYkluZGV4IiwibnVtYmVyIiwiZGVmYXVsdFByb3BzIiwiY2xpY2thYmxlIiwiZGVmYXVsdFBvc2l0aW9uIiwiaXRlbVdpZHRoIiwicGFkZGluZyIsInJpZ2h0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFFQTs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7O0FBTUE7O0FBSUE7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlBLElBQU1BLHlCQUF5QixDQUEvQjtBQUNBLElBQU1DLHdCQUF3QixDQUE5QjtBQUNBLElBQU1DLHFCQUFxQixDQUEzQjtBQUNBLElBQU1DLG9CQUFvQixDQUExQjtBQUNBLElBQU1DLGFBQWEsTUFBbkI7O0FBRUEsU0FBU0Msa0JBQVQsQ0FBNEJDLFNBQTVCLEVBQXVDQyxTQUF2QyxFQUErRDtBQUFBLE1BQWJDLElBQWEsdUVBQU4sSUFBTTs7QUFDN0QsZUFBV0QsWUFBWSxDQUFiLEdBQW1CRCxZQUFZLENBQXpDLElBQThDRSxJQUE5QztBQUNEOztBQUVELElBQU1DLFNBQVM7QUFDYkMsWUFBVSxxQkFBYyxLQUFkLENBREc7QUFFYkMsT0FBSztBQUNIQyxVQUFNLHFCQUFjLEtBQWQsQ0FESDtBQUVIQyxXQUFPLHFCQUFjLEtBQWQ7QUFGSixHQUZRO0FBTWJDLE1BQUk7QUFDRkYsVUFBTSxvQkFBYSxLQUFiLENBREo7QUFFRkMsV0FBTyxvQkFBYSxLQUFiO0FBRkw7QUFOUyxDQUFmOztBQVlBLElBQU1FO0FBRUpDLFNBQU9QLE9BQU9DLFFBRlY7QUFHSk8sVUFBUSx3QkFBR2pCLHNCQUFILENBSEo7QUFJSmtCLGNBQVksd0JBQUdsQixzQkFBSCxDQUpSO0FBS0ptQixZQUFVLFVBTE47QUFNSkMsYUFBVyxRQU5QO0FBT0pDLFNBQU8sd0JBQUdwQixxQkFBSDtBQVBILEVBQU47O0FBVUEsSUFBTXFCLDJCQUEyQjtBQUMvQkMsY0FBWSxRQURtQjtBQUUvQkMsV0FBUyxNQUZzQjtBQUcvQkMs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O0FBQ1A1QyxVQUFNLHdCQUFHLENBQUgsQ0FEQztBQUVQNkMsV0FBTyx3QkFBRyxDQUFIO0FBRkE7QUFKYyxDQUFWLEVBUVpwQyxlQVJZLEM7Ozs7Ozs7Ozs7Z0NBcExUckMsc0I7O2dDQUNBQyxxQjs7Z0NBQ0FDLGtCOztnQ0FDQUMsaUI7O2dDQUNBQyxVOztnQ0FFR0Msa0I7O2dDQUlISSxNOztnQ0FZQU0sZ0I7O2dDQVVBTyx3Qjs7Z0NBTUFJLFk7O2dDQVlBSyxZOztnQ0FpQkFHLGU7O2dDQVVPRyxlIiwiZmlsZSI6IlRvZ2dsZVN3aXRjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5cbmltcG9ydCB7IGF1dG9iaW5kLCBOT09QIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCBXaXRoTGFiZWwgZnJvbSAnLi9fV2l0aExhYmVsJztcbmltcG9ydCBUeGxMb2FkaW5nSW5kaWNhdG9yIGZyb20gJy4uL3Byb2dyZXNzLWluZGljYXRvcnMvTG9hZGluZ0luZGljYXRvcic7XG5pbXBvcnQge1xuICBncmlkVW5pdHMgYXMgZ3UsXG4gIGdyaWRVbml0c1JhdyBhcyBndVJhdyxcbiAgY29tYmluZVN0eWxlcyxcbiAgc3F1YXJlLFxufSBmcm9tICcuLi9zdHlsZXMvaGVscGVycyc7XG5pbXBvcnQge1xuICBDT0xPUl9ORVVUUkFMLFxuICBDT0xPUl9BQ0NFTlQsXG59IGZyb20gJy4uL3N0eWxlcy90aGVtZSc7XG5pbXBvcnQge1xuICBjdWJpY1RyYW5zaXRpb24sXG59IGZyb20gJy4uL3N0eWxlcy9taXhpbnMvdHJhbnNpdGlvbnMnO1xuaW1wb3J0IHtcbiAgVFlQRV9TTUFMTCxcbn0gZnJvbSAnLi4vc3R5bGVzL21peGlucy90eXBlJztcblxuY29uc3QgQ09OVEFJTkVSX0hFSUdIVF9VTklUUyA9IDU7XG5jb25zdCBDT05UQUlORVJfV0lEVEhfVU5JVFMgPSA3O1xuY29uc3QgVFJBQ0tfSEVJR0hUX1VOSVRTID0gMztcbmNvbnN0IFRSQUNLX1dJRFRIX1VOSVRTID0gNjtcbmNvbnN0IFRIVU1CX1NJWkUgPSAnMTdweCc7XG5cbmZ1bmN0aW9uIG1pZHBvaW50RGlmZmVyZW5jZShpbm5lclNpemUsIG91dGVyU2l6ZSwgdW5pdCA9ICdweCcpIHtcbiAgcmV0dXJuIGAkeyhvdXRlclNpemUgLyAyKSAtIChpbm5lclNpemUgLyAyKX0ke3VuaXR9YDtcbn1cblxuY29uc3QgQ09MT1JTID0ge1xuICBkaXNhYmxlZDogQ09MT1JfTkVVVFJBTFsnMjAwJ10sXG4gIG9mZjoge1xuICAgIGJhc2U6IENPTE9SX05FVVRSQUxbJzMwMCddLFxuICAgIGhvdmVyOiBDT0xPUl9ORVVUUkFMWyc0MDAnXSxcbiAgfSxcbiAgb246IHtcbiAgICBiYXNlOiBDT0xPUl9BQ0NFTlRbJzUwMCddLFxuICAgIGhvdmVyOiBDT0xPUl9BQ0NFTlRbJzYwMCddLFxuICB9LFxufTtcblxuY29uc3QgQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgLi4uVFlQRV9TTUFMTCxcbiAgY29sb3I6IENPTE9SUy5kaXNhYmxlZCxcbiAgaGVpZ2h0OiBndShDT05UQUlORVJfSEVJR0hUX1VOSVRTKSxcbiAgbGluZUhlaWdodDogZ3UoQ09OVEFJTkVSX0hFSUdIVF9VTklUUyksXG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICB3aWR0aDogZ3UoQ09OVEFJTkVSX1dJRFRIX1VOSVRTKSxcbn07XG5cbmNvbnN0IExPQURJTkdfQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxufTtcblxuY29uc3QgVFJBQ0tfU1RZTEVTID0ge1xuICBiYXNlOiB7XG4gICAgYm9yZGVyUmFkaXVzOiAnNy41cHgnLFxuICAgIGhlaWdodDogZ3UoVFJBQ0tfSEVJR0hUX1VOSVRTKSxcbiAgICBsZWZ0OiBtaWRwb2ludERpZmZlcmVuY2UoZ3VSYXcoVFJBQ0tfV0lEVEhfVU5JVFMpLCBndVJhdyhDT05UQUlORVJfV0lEVEhfVU5JVFMpKSxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IG1pZHBvaW50RGlmZmVyZW5jZShndVJhdyhUUkFDS19IRUlHSFRfVU5JVFMpLCBndVJhdyhDT05UQUlORVJfSEVJR0hUX1VOSVRTKSksXG4gICAgdHJhbnNpdGlvbjogY3ViaWNUcmFuc2l0aW9uKCdiYWNrZ3JvdW5kLWNvbG9yJyksXG4gICAgd2lkdGg6IGd1KFRSQUNLX1dJRFRIX1VOSVRTKSxcbiAgfSxcbn07XG5cbmNvbnN0IFRIVU1CX1NUWUxFUyA9IHtcbiAgYmFzZToge1xuICAgIC4uLnNxdWFyZShUSFVNQl9TSVpFKSxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IG1pZHBvaW50RGlmZmVyZW5jZSgxNywgZ3VSYXcoQ09OVEFJTkVSX0hFSUdIVF9VTklUUykpLFxuICAgIHRyYW5zaXRpb246IGN1YmljVHJhbnNpdGlvbihbJ3RyYW5zZm9ybScsICdib3JkZXInXSksXG4gIH0sXG4gIG9mZjoge1xuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCknLFxuICB9LFxuICBvbjoge1xuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMTAwJSknLFxuICB9LFxufTtcblxuY29uc3QgQ0hFQ0tCT1hfU1RZTEVTID0ge1xuICAuLi5zcXVhcmUoJzEwMCUnKSxcbiAgY3Vyc29yOiAncG9pbnRlcicsXG4gIGxlZnQ6IDAsXG4gIG9wYWNpdHk6IDAsXG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICB0b3A6IDAsXG59O1xuXG5AUmFkaXVtXG5leHBvcnQgY2xhc3MgVHhsVG9nZ2xlU3dpdGNoIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBob3ZlcmVkOiBmYWxzZSxcbiAgICB9O1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVDaGFuZ2UoZSkge1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgbmFtZTogZS50YXJnZXQubmFtZSxcbiAgICAgIG9uOiBlLnRhcmdldC5jaGVja2VkLFxuICAgIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVNb3VzZUVudGVyKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiB0cnVlIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVNb3VzZUxlYXZlKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiBmYWxzZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBvbixcbiAgICAgIGRpc2FibGVkLFxuICAgICAgbG9hZGluZyxcbiAgICAgIC4uLnJlc3RQcm9wc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGlzSG92ZXJlZCA9IHRoaXMuc3RhdGUuaG92ZXJlZDtcbiAgICBsZXQgY29udGVudDtcbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBkYXRhLWNvbXBvbmVudD1cIlR4bFRvZ2dsZVN3aXRjaFwiXG4gICAgICAgICAgc3R5bGU9e0NPTlRBSU5FUl9TVFlMRVN9XG4gICAgICAgID5cbiAgICAgICAgICB7b24gPyAnT24nIDogJ09mZid9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGxvYWRpbmcpIHtcbiAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBkYXRhLWNvbXBvbmVudD1cIlR4bFRvZ2dsZVN3aXRjaFwiXG4gICAgICAgICAgc3R5bGU9e2NvbWJpbmVTdHlsZXMoQ09OVEFJTkVSX1NUWUxFUywgTE9BRElOR19DT05UQUlORVJfU1RZTEVTKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxUeGxMb2FkaW5nSW5kaWNhdG9yIHNpemU9XCJzbWFsbFwiIHNoYWRlPVwiZGFya1wiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG9nZ2xlQ29sb3IgPSBDT0xPUlNbb24gPyAnb24nIDogJ29mZiddW2lzSG92ZXJlZCA/ICdob3ZlcicgOiAnYmFzZSddO1xuICAgICAgY29uc3QgdHJhY2tTdHlsZXMgPSBjb21iaW5lU3R5bGVzKFxuICAgICAgICBUUkFDS19TVFlMRVMuYmFzZSxcbiAgICAgICAgeyBiYWNrZ3JvdW5kQ29sb3I6IHRvZ2dsZUNvbG9yIH1cbiAgICAgICk7XG4gICAgICBjb25zdCB0aHVtYlN0eWxlcyA9IGNvbWJpbmVTdHlsZXMoXG4gICAgICAgIFRIVU1CX1NUWUxFUy5iYXNlLFxuICAgICAgICBvbiA/IFRIVU1CX1NUWUxFUy5vbiA6IFRIVU1CX1NUWUxFUy5vZmYsXG4gICAgICAgIHsgYm9yZGVyOiBgMXB4IHNvbGlkICR7dG9nZ2xlQ29sb3J9YCB9XG4gICAgICApO1xuICAgICAgY29udGVudCA9IChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGRhdGEtY29tcG9uZW50PVwiVHhsVG9nZ2xlU3dpdGNoXCJcbiAgICAgICAgICBzdHlsZT17Q09OVEFJTkVSX1NUWUxFU31cbiAgICAgICAgICBvbk1vdXNlRW50ZXI9e3RoaXMuX2hhbmRsZU1vdXNlRW50ZXJ9XG4gICAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLl9oYW5kbGVNb3VzZUxlYXZlfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBzdHlsZT17dHJhY2tTdHlsZXN9IC8+XG4gICAgICAgICAgPGRpdiBzdHlsZT17dGh1bWJTdHlsZXN9IC8+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB7Li4ucmVzdFByb3BzfVxuICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICBjaGVja2VkPXtvbn1cbiAgICAgICAgICAgIHN0eWxlPXtDSEVDS0JPWF9TVFlMRVN9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxufVxuXG5UeGxUb2dnbGVTd2l0Y2gucHJvcFR5cGVzID0ge1xuICBkaXNhYmxlZDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gIGxvYWRpbmc6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxuICBuYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIG9uOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBvbkNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgdGFiSW5kZXg6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXG59O1xuXG5UeGxUb2dnbGVTd2l0Y2guZGVmYXVsdFByb3BzID0ge1xuICBkaXNhYmxlZDogZmFsc2UsXG4gIGxvYWRpbmc6IGZhbHNlLFxuICBvbkNoYW5nZTogTk9PUCxcbiAgdGFiSW5kZXg6IDAsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBXaXRoTGFiZWwoe1xuICBjbGlja2FibGU6IHRydWUsXG4gIGRlZmF1bHRQb3NpdGlvbjogJ2xlZnQnLFxuICBpdGVtV2lkdGg6IGd1KENPTlRBSU5FUl9XSURUSF9VTklUUyksXG4gIHBhZGRpbmc6IHtcbiAgICBsZWZ0OiBndSg4KSxcbiAgICByaWdodDogZ3UoMiksXG4gIH0sXG59LCBUeGxUb2dnbGVTd2l0Y2gpO1xuIl19