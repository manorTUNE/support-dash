'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _theme = require('../styles/theme');

var _helpers = require('../styles/helpers');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ICON_SIZE = 13;
// offset by half the width of the icon, accounting for width of line
var LINE_OFFSET = 6;
var GUTTER_WIDTH = ICON_SIZE + (0, _helpers.gridUnitsRaw)(2) + 'px';

var ITEM_CONTAINER_STYLES = {
  display: 'flex'
};

var ICON_CONTAINER_STYLES = {
  display: 'flex',
  minWidth: GUTTER_WIDTH,
  position: 'relative',
  width: GUTTER_WIDTH
};

var CONTENT_HEADER_BASE_STYLES = {
  display: 'flex',
  fontSize: '14px',
  fontWeight: 400,
  marginTop: '-2px'
};

var CONTENT_HEADER_EXPANDED_STYLES = (0, _extends3.default)({}, CONTENT_HEADER_BASE_STYLES, {
  marginBottom: (0, _helpers.gridUnits)(2)
});

// Content body won't be rendered in collapsed scenario, but we still want 20px of spacing
// between items
var CONTENT_HEADER_COLLAPSED_STYLES = (0, _extends3.default)({}, CONTENT_HEADER_BASE_STYLES, {
  marginBottom: (0, _helpers.gridUnits)(4)
});

var CONTENT_CONTAINER_STYLES = {
  marginBottom: (0, _helpers.gridUnits)(4)
};

var SUMMARY_CONTENT_STYLES = {
  color: _theme.COLOR_NEUTRAL['300'],
  marginLeft: (0, _helpers.gridUnits)(1)
};

var LINE_COMPONENT_STYLES = {
  borderLeftStyle: 'dotted',
  borderLeftWidth: '1px',
  bottom: 0,
  left: LINE_OFFSET,
  position: 'absolute',
  top: ICON_SIZE,
  width: GUTTER_WIDTH
};

var TxlConnectedItemList = function TxlConnectedItemList(props) {
  var items = props.items,
      color = props.color,
      collapsed = props.collapsed;


  var generatedItems = items.map(function (item, idx) {
    var isLast = idx === items.length - 1;
    var IconComponent = item.icon;
    var lineComponentStyles = (0, _extends3.default)({}, LINE_COMPONENT_STYLES, {
      borderLeftColor: color
    });
    var iconColor = item.color || color;

    // We want special behavior if no content was provided OR if the list is collapsed, so coerce
    // the collapsed case into the undefined case so we can treat them the same
    var content = collapsed ? undefined : item.content;

    // If we're collapsed, show the summary
    var summaryComponent = !content && item.summary ? _react2.default.createElement(
      'div',
      { style: SUMMARY_CONTENT_STYLES, 'data-test-connected-list-item-summary': true },
      item.summary
    ) : null;

    var lineComponent = _react2.default.createElement('div', {
      'data-test-connected-list-line': true,
      style: lineComponentStyles
    });
    var contentHeaderStyles = content ? CONTENT_HEADER_EXPANDED_STYLES : CONTENT_HEADER_COLLAPSED_STYLES;

    return _react2.default.createElement(
      'div',
      {
        'data-component': 'TxlConnectedItemListItem',
        key: 'connected-item-' + idx,
        style: ITEM_CONTAINER_STYLES
      },
      _react2.default.createElement(
        'div',
        { style: ICON_CONTAINER_STYLES },
        _react2.default.createElement(IconComponent, {
          'data-test-connected-list-item-icon': true,
          color: iconColor,
          scale: 1
        }),
        !isLast && lineComponent
      ),
      _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          'div',
          {
            'data-test-connected-list-item-header': true,
            style: contentHeaderStyles
          },
          item.header,
          summaryComponent
        ),
        !!content && _react2.default.createElement(
          'div',
          {
            'data-test-connected-list-item-content': true,
            style: CONTENT_CONTAINER_STYLES
          },
          content
        )
      )
    );
  });

  return _react2.default.createElement(
    'div',
    { 'data-component': 'TxlConnectedItemList' },
    generatedItems
  );
};

TxlConnectedItemList.defaultProps = {
  collapsed: false,
  color: _theme.COLOR_NEUTRAL['200']
};

TxlConnectedItemList.propTypes = {
  /* hides content for all items */
  collapsed: _react.PropTypes.bool,
  /* controls color of icons and connecting line */
  color: _react.PropTypes.string,
  items: _react.PropTypes.arrayOf(_react.PropTypes.shape({
    /* points to a TXL icon class */
    color: _react.PropTypes.string,
    content: _react.PropTypes.node,
    header: _react.PropTypes.node.isRequired,
    icon: _react.PropTypes.func.isRequired,
    summary: _react.PropTypes.node
  })).isRequired
};

var _default = (0, _radium2.default)(TxlConnectedItemList);

exports.default = _default;
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(ICON_SIZE, 'ICON_SIZE', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(LINE_OFFSET, 'LINE_OFFSET', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(GUTTER_WIDTH, 'GUTTER_WIDTH', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(ITEM_CONTAINER_STYLES, 'ITEM_CONTAINER_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(ICON_CONTAINER_STYLES, 'ICON_CONTAINER_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(CONTENT_HEADER_BASE_STYLES, 'CONTENT_HEADER_BASE_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(CONTENT_HEADER_EXPANDED_STYLES, 'CONTENT_HEADER_EXPANDED_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(CONTENT_HEADER_COLLAPSED_STYLES, 'CONTENT_HEADER_COLLAPSED_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(CONTENT_CONTAINER_STYLES, 'CONTENT_CONTAINER_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(SUMMARY_CONTENT_STYLES, 'SUMMARY_CONTENT_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(LINE_COMPONENT_STYLES, 'LINE_COMPONENT_STYLES', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(TxlConnectedItemList, 'TxlConnectedItemList', 'src/lists/ConnectedItemList.jsx');

  __REACT_HOT_LOADER__.register(_default, 'default', 'src/lists/ConnectedItemList.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saXN0cy9Db25uZWN0ZWRJdGVtTGlzdC5qc3giXSwibmFtZXMiOlsiSUNPTl9TSVpFIiwiTElORV9PRkZTRVQiLCJHVVRURVJfV0lEVEgiLCJJVEVNX0NPTlRBSU5FUl9TVFlMRVMiLCJkaXNwbGF5IiwiSUNPTl9DT05UQUlORVJfU1RZTEVTIiwibWluV2lkdGgiLCJwb3NpdGlvbiIsIndpZHRoIiwiQ09OVEVOVF9IRUFERVJfQkFTRV9TVFlMRVMiLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJtYXJnaW5Ub3AiLCJDT05URU5UX0hFQURFUl9FWFBBTkRFRF9TVFlMRVMiLCJtYXJnaW5Cb3R0b20iLCJDT05URU5UX0hFQURFUl9DT0xMQVBTRURfU1RZTEVTIiwiQ09OVEVOVF9DT05UQUlORVJfU1RZTEVTIiwiU1VNTUFSWV9DT05URU5UX1NUWUxFUyIsImNvbG9yIiwibWFyZ2luTGVmdCIsIkxJTkVfQ09NUE9ORU5UX1NUWUxFUyIsImJvcmRlckxlZnRTdHlsZSIsImJvcmRlckxlZnRXaWR0aCIsImJvdHRvbSIsImxlZnQiLCJ0b3AiLCJUeGxDb25uZWN0ZWRJdGVtTGlzdCIsInByb3BzIiwiaXRlbXMiLCJjb2xsYXBzZWQiLCJnZW5lcmF0ZWRJdGVtcyIsIm1hcCIsIml0ZW0iLCJpZHgiLCJpc0xhc3QiLCJsZW5ndGgiLCJJY29uQ29tcG9uZW50IiwiaWNvbiIsImxpbmVDb21wb25lbnRTdHlsZXMiLCJib3JkZXJMZWZ0Q29sb3IiLCJpY29uQ29sb3IiLCJjb250ZW50IiwidW5kZWZpbmVkIiwic3VtbWFyeUNvbXBvbmVudCIsInN1bW1hcnkiLCJsaW5lQ29tcG9uZW50IiwiY29udGVudEhlYWRlclN0eWxlcyIsImhlYWRlciIsImRlZmF1bHRQcm9wcyIsInByb3BUeXBlcyIsImJvb2wiLCJzdHJpbmciLCJhcnJheU9mIiwic2hhcGUiLCJub2RlIiwiaXNSZXF1aXJlZCIsImZ1bmMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7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Q0M7QUFBQTtBQUFBO0FBQ0UseURBREY7QUFFRSxtQkFBT3pCO0FBRlQ7QUFJR3lCO0FBSkg7QUFUSjtBQWJGLEtBREY7QUFpQ0QsR0EvRHNCLENBQXZCOztBQWlFQSxTQUNFO0FBQUE7QUFBQSxNQUFLLGtCQUFlLHNCQUFwQjtBQUNHWDtBQURILEdBREY7QUFLRCxDQXpFRDs7QUEyRUFKLHFCQUFxQnNCLFlBQXJCLEdBQW9DO0FBQ2xDbkIsYUFBVyxLQUR1QjtBQUVsQ1gsU0FBTyxxQkFBYyxLQUFkO0FBRjJCLENBQXBDOztBQUtBUSxxQkFBcUJ1QixTQUFyQixHQUFpQztBQUMvQjtBQUNBcEIsYUFBVyxpQkFBVXFCLElBRlU7QUFHL0I7QUFDQWhDLFNBQU8saUJBQVVpQyxNQUpjO0FBSy9CdkIsU0FBTyxpQkFBVXdCLE9BQVYsQ0FBa0IsaUJBQVVDLEtBQVYsQ0FBZ0I7QUFDdkM7QUFDQW5DLFdBQU8saUJBQVVpQyxNQUZzQjtBQUd2Q1YsYUFBUyxpQkFBVWEsSUFIb0I7QUFJdkNQLFlBQVEsaUJBQVVPLElBQVYsQ0FBZUMsVUFKZ0I7QUFLdkNsQixVQUFNLGlCQUFVbUIsSUFBVixDQUFlRCxVQUxrQjtBQU12Q1gsYUFBUyxpQkFBVVU7QUFOb0IsR0FBaEIsQ0FBbEIsRUFPSEM7QUFaMkIsQ0FBakM7O2VBZWUsc0JBQU83QixvQkFBUCxDOzs7Ozs7Ozs7O2dDQXJKVDFCLFM7O2dDQUVBQyxXOztnQ0FDQUMsWTs7Z0NBRUFDLHFCOztnQ0FJQUUscUI7O2dDQU9BSSwwQjs7Z0NBT0FJLDhCOztnQ0FPQUUsK0I7O2dDQUtBQyx3Qjs7Z0NBSUFDLHNCOztnQ0FLQUcscUI7O2dDQVVBTSxvQiIsImZpbGUiOiJDb25uZWN0ZWRJdGVtTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5cbmltcG9ydCB7XG4gIENPTE9SX05FVVRSQUwsXG59IGZyb20gJy4uL3N0eWxlcy90aGVtZSc7XG5pbXBvcnQge1xuICBncmlkVW5pdHMgYXMgZ3UsXG4gIGdyaWRVbml0c1JhdyBhcyBndVJhdyxcbn0gZnJvbSAnLi4vc3R5bGVzL2hlbHBlcnMnO1xuXG5jb25zdCBJQ09OX1NJWkUgPSAxMztcbi8vIG9mZnNldCBieSBoYWxmIHRoZSB3aWR0aCBvZiB0aGUgaWNvbiwgYWNjb3VudGluZyBmb3Igd2lkdGggb2YgbGluZVxuY29uc3QgTElORV9PRkZTRVQgPSA2O1xuY29uc3QgR1VUVEVSX1dJRFRIID0gYCR7SUNPTl9TSVpFICsgZ3VSYXcoMil9cHhgO1xuXG5jb25zdCBJVEVNX0NPTlRBSU5FUl9TVFlMRVMgPSB7XG4gIGRpc3BsYXk6ICdmbGV4Jyxcbn07XG5cbmNvbnN0IElDT05fQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBtaW5XaWR0aDogR1VUVEVSX1dJRFRILFxuICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgd2lkdGg6IEdVVFRFUl9XSURUSCxcbn07XG5cbmNvbnN0IENPTlRFTlRfSEVBREVSX0JBU0VfU1RZTEVTID0ge1xuICBkaXNwbGF5OiAnZmxleCcsXG4gIGZvbnRTaXplOiAnMTRweCcsXG4gIGZvbnRXZWlnaHQ6IDQwMCxcbiAgbWFyZ2luVG9wOiAnLTJweCcsXG59O1xuXG5jb25zdCBDT05URU5UX0hFQURFUl9FWFBBTkRFRF9TVFlMRVMgPSB7XG4gIC4uLkNPTlRFTlRfSEVBREVSX0JBU0VfU1RZTEVTLFxuICBtYXJnaW5Cb3R0b206IGd1KDIpLFxufTtcblxuLy8gQ29udGVudCBib2R5IHdvbid0IGJlIHJlbmRlcmVkIGluIGNvbGxhcHNlZCBzY2VuYXJpbywgYnV0IHdlIHN0aWxsIHdhbnQgMjBweCBvZiBzcGFjaW5nXG4vLyBiZXR3ZWVuIGl0ZW1zXG5jb25zdCBDT05URU5UX0hFQURFUl9DT0xMQVBTRURfU1RZTEVTID0ge1xuICAuLi5DT05URU5UX0hFQURFUl9CQVNFX1NUWUxFUyxcbiAgbWFyZ2luQm90dG9tOiBndSg0KSxcbn07XG5cbmNvbnN0IENPTlRFTlRfQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgbWFyZ2luQm90dG9tOiBndSg0KSxcbn07XG5cbmNvbnN0IFNVTU1BUllfQ09OVEVOVF9TVFlMRVMgPSB7XG4gIGNvbG9yOiBDT0xPUl9ORVVUUkFMWyczMDAnXSxcbiAgbWFyZ2luTGVmdDogZ3UoMSksXG59O1xuXG5jb25zdCBMSU5FX0NPTVBPTkVOVF9TVFlMRVMgPSB7XG4gIGJvcmRlckxlZnRTdHlsZTogJ2RvdHRlZCcsXG4gIGJvcmRlckxlZnRXaWR0aDogJzFweCcsXG4gIGJvdHRvbTogMCxcbiAgbGVmdDogTElORV9PRkZTRVQsXG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICB0b3A6IElDT05fU0laRSxcbiAgd2lkdGg6IEdVVFRFUl9XSURUSCxcbn07XG5cbmNvbnN0IFR4bENvbm5lY3RlZEl0ZW1MaXN0ID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHsgaXRlbXMsIGNvbG9yLCBjb2xsYXBzZWQgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGdlbmVyYXRlZEl0ZW1zID0gaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICBjb25zdCBpc0xhc3QgPSBpZHggPT09IGl0ZW1zLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgSWNvbkNvbXBvbmVudCA9IGl0ZW0uaWNvbjtcbiAgICBjb25zdCBsaW5lQ29tcG9uZW50U3R5bGVzID0ge1xuICAgICAgLi4uTElORV9DT01QT05FTlRfU1RZTEVTLFxuICAgICAgYm9yZGVyTGVmdENvbG9yOiBjb2xvcixcbiAgICB9O1xuICAgIGNvbnN0IGljb25Db2xvciA9IGl0ZW0uY29sb3IgfHwgY29sb3I7XG5cbiAgICAvLyBXZSB3YW50IHNwZWNpYWwgYmVoYXZpb3IgaWYgbm8gY29udGVudCB3YXMgcHJvdmlkZWQgT1IgaWYgdGhlIGxpc3QgaXMgY29sbGFwc2VkLCBzbyBjb2VyY2VcbiAgICAvLyB0aGUgY29sbGFwc2VkIGNhc2UgaW50byB0aGUgdW5kZWZpbmVkIGNhc2Ugc28gd2UgY2FuIHRyZWF0IHRoZW0gdGhlIHNhbWVcbiAgICBjb25zdCBjb250ZW50ID0gY29sbGFwc2VkID8gdW5kZWZpbmVkIDogaXRlbS5jb250ZW50O1xuXG4gICAgLy8gSWYgd2UncmUgY29sbGFwc2VkLCBzaG93IHRoZSBzdW1tYXJ5XG4gICAgY29uc3Qgc3VtbWFyeUNvbXBvbmVudCA9ICghY29udGVudCAmJiBpdGVtLnN1bW1hcnkpID8gKFxuICAgICAgPGRpdiBzdHlsZT17U1VNTUFSWV9DT05URU5UX1NUWUxFU30gZGF0YS10ZXN0LWNvbm5lY3RlZC1saXN0LWl0ZW0tc3VtbWFyeT5cbiAgICAgICAge2l0ZW0uc3VtbWFyeX1cbiAgICAgIDwvZGl2PlxuICAgICkgOiBudWxsO1xuXG4gICAgY29uc3QgbGluZUNvbXBvbmVudCA9IChcbiAgICAgIDxkaXZcbiAgICAgICAgZGF0YS10ZXN0LWNvbm5lY3RlZC1saXN0LWxpbmVcbiAgICAgICAgc3R5bGU9e2xpbmVDb21wb25lbnRTdHlsZXN9XG4gICAgICAvPlxuICAgICk7XG4gICAgY29uc3QgY29udGVudEhlYWRlclN0eWxlcyA9IGNvbnRlbnQgP1xuICAgICAgQ09OVEVOVF9IRUFERVJfRVhQQU5ERURfU1RZTEVTIDpcbiAgICAgIENPTlRFTlRfSEVBREVSX0NPTExBUFNFRF9TVFlMRVM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBkYXRhLWNvbXBvbmVudD1cIlR4bENvbm5lY3RlZEl0ZW1MaXN0SXRlbVwiXG4gICAgICAgIGtleT17YGNvbm5lY3RlZC1pdGVtLSR7aWR4fWB9XG4gICAgICAgIHN0eWxlPXtJVEVNX0NPTlRBSU5FUl9TVFlMRVN9XG4gICAgICA+XG4gICAgICAgIDxkaXYgc3R5bGU9e0lDT05fQ09OVEFJTkVSX1NUWUxFU30+XG4gICAgICAgICAgPEljb25Db21wb25lbnRcbiAgICAgICAgICAgIGRhdGEtdGVzdC1jb25uZWN0ZWQtbGlzdC1pdGVtLWljb25cbiAgICAgICAgICAgIGNvbG9yPXtpY29uQ29sb3J9XG4gICAgICAgICAgICBzY2FsZT17MX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHshaXNMYXN0ICYmIGxpbmVDb21wb25lbnR9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGRhdGEtdGVzdC1jb25uZWN0ZWQtbGlzdC1pdGVtLWhlYWRlclxuICAgICAgICAgICAgc3R5bGU9e2NvbnRlbnRIZWFkZXJTdHlsZXN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2l0ZW0uaGVhZGVyfVxuICAgICAgICAgICAge3N1bW1hcnlDb21wb25lbnR9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgeyEhY29udGVudCAmJiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGRhdGEtdGVzdC1jb25uZWN0ZWQtbGlzdC1pdGVtLWNvbnRlbnRcbiAgICAgICAgICAgICAgc3R5bGU9e0NPTlRFTlRfQ09OVEFJTkVSX1NUWUxFU31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2NvbnRlbnR9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBkYXRhLWNvbXBvbmVudD1cIlR4bENvbm5lY3RlZEl0ZW1MaXN0XCI+XG4gICAgICB7Z2VuZXJhdGVkSXRlbXN9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5UeGxDb25uZWN0ZWRJdGVtTGlzdC5kZWZhdWx0UHJvcHMgPSB7XG4gIGNvbGxhcHNlZDogZmFsc2UsXG4gIGNvbG9yOiBDT0xPUl9ORVVUUkFMWycyMDAnXSxcbn07XG5cblR4bENvbm5lY3RlZEl0ZW1MaXN0LnByb3BUeXBlcyA9IHtcbiAgLyogaGlkZXMgY29udGVudCBmb3IgYWxsIGl0ZW1zICovXG4gIGNvbGxhcHNlZDogUHJvcFR5cGVzLmJvb2wsXG4gIC8qIGNvbnRyb2xzIGNvbG9yIG9mIGljb25zIGFuZCBjb25uZWN0aW5nIGxpbmUgKi9cbiAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGl0ZW1zOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc2hhcGUoe1xuICAgIC8qIHBvaW50cyB0byBhIFRYTCBpY29uIGNsYXNzICovXG4gICAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY29udGVudDogUHJvcFR5cGVzLm5vZGUsXG4gICAgaGVhZGVyOiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkLFxuICAgIGljb246IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgc3VtbWFyeTogUHJvcFR5cGVzLm5vZGUsXG4gIH0pKS5pc1JlcXVpcmVkLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgUmFkaXVtKFR4bENvbm5lY3RlZEl0ZW1MaXN0KTtcbiJdfQ==