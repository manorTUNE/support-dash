'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _Close = require('../icons/Close');

var _Close2 = _interopRequireDefault(_Close);

var _KeyCodes = require('../constants/KeyCodes');

var _Chip = require('./Chip.style');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var TxlChip = (0, _radium2.default)(_class = function (_React$Component) {
  (0, _inherits3.default)(TxlChip, _React$Component);

  function TxlChip() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlChip);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlChip.__proto__ || (0, _getPrototypeOf2.default)(TxlChip)).call.apply(_ref, [this].concat(args)));

    _this.focus = function () {
      return _this.__focus__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this.hasFocus = function () {
      return _this.__hasFocus__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleButtonMouseEnter = function () {
      return _this.___handleButtonMouseEnter__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleButtonMouseLeave = function () {
      return _this.___handleButtonMouseLeave__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleChipBlur = function () {
      return _this.___handleChipBlur__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleChipFocus = function () {
      return _this.___handleChipFocus__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleDismissClick = function () {
      return _this.___handleDismissClick__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleKeyDown = function () {
      return _this.___handleKeyDown__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleRef = function () {
      return _this.___handleRef__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this.state = {
      buttonHovered: false,
      chipFocused: false
    };
    return _this;
  }

  (0, _createClass3.default)(TxlChip, [{
    key: '__focus__REACT_HOT_LOADER__',
    value: function __focus__REACT_HOT_LOADER__() {
      return this.__focus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '__focus__REACT_HOT_LOADER__',
    value: function __focus__REACT_HOT_LOADER__() {
      return this.__focus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '__focus__REACT_HOT_LOADER__',
    value: function __focus__REACT_HOT_LOADER__() {
      var _this2 = this;

      if (!this.props.disabled) {
        this.setState({ chipFocused: true }, function () {
          return _this2._chip.focus();
        });
      }
    }
  }, {
    key: '__hasFocus__REACT_HOT_LOADER__',
    value: function __hasFocus__REACT_HOT_LOADER__() {
      return this.__hasFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '__hasFocus__REACT_HOT_LOADER__',
    value: function __hasFocus__REACT_HOT_LOADER__() {
      return this.__hasFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '__hasFocus__REACT_HOT_LOADER__',
    value: function __hasFocus__REACT_HOT_LOADER__() {
      return this.state.chipFocused;
    }
  }, {
    key: '___handleButtonMouseEnter__REACT_HOT_LOADER__',
    value: function ___handleButtonMouseEnter__REACT_HOT_LOADER__() {
      return this.___handleButtonMouseEnter__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleButtonMouseEnter__REACT_HOT_LOADER__',
    value: function ___handleButtonMouseEnter__REACT_HOT_LOADER__() {
      return this.___handleButtonMouseEnter__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleButtonMouseEnter__REACT_HOT_LOADER__',
    value: function ___handleButtonMouseEnter__REACT_HOT_LOADER__() {
      this.setState({ buttonHovered: true });
    }
  }, {
    key: '___handleButtonMouseLeave__REACT_HOT_LOADER__',
    value: function ___handleButtonMouseLeave__REACT_HOT_LOADER__() {
      return this.___handleButtonMouseLeave__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleButtonMouseLeave__REACT_HOT_LOADER__',
    value: function ___handleButtonMouseLeave__REACT_HOT_LOADER__() {
      return this.___handleButtonMouseLeave__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleButtonMouseLeave__REACT_HOT_LOADER__',
    value: function ___handleButtonMouseLeave__REACT_HOT_LOADER__() {
      this.setState({ buttonHovered: false });
    }
  }, {
    key: '___handleChipBlur__REACT_HOT_LOADER__',
    value: function ___handleChipBlur__REACT_HOT_LOADER__() {
      return this.___handleChipBlur__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleChipBlur__REACT_HOT_LOADER__',
    value: function ___handleChipBlur__REACT_HOT_LOADER__() {
      return this.___handleChipBlur__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleChipBlur__REACT_HOT_LOADER__',
    value: function ___handleChipBlur__REACT_HOT_LOADER__() {
      this.setState({ chipFocused: false });
    }
  }, {
    key: '___handleChipFocus__REACT_HOT_LOADER__',
    value: function ___handleChipFocus__REACT_HOT_LOADER__() {
      return this.___handleChipFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleChipFocus__REACT_HOT_LOADER__',
    value: function ___handleChipFocus__REACT_HOT_LOADER__() {
      return this.___handleChipFocus__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleChipFocus__REACT_HOT_LOADER__',
    value: function ___handleChipFocus__REACT_HOT_LOADER__() {
      this.setState({ chipFocused: true });
    }
  }, {
    key: '___handleDismissClick__REACT_HOT_LOADER__',
    value: function ___handleDismissClick__REACT_HOT_LOADER__() {
      return this.___handleDismissClick__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleDismissClick__REACT_HOT_LOADER__',
    value: function ___handleDismissClick__REACT_HOT_LOADER__() {
      return this.___handleDismissClick__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleDismissClick__REACT_HOT_LOADER__',
    value: function ___handleDismissClick__REACT_HOT_LOADER__(e) {
      this.props.onDismiss(e);
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',
    value: function ___handleKeyDown__REACT_HOT_LOADER__() {
      return this.___handleKeyDown__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',
    value: function ___handleKeyDown__REACT_HOT_LOADER__() {
      return this.___handleKeyDown__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleKeyDown__REACT_HOT_LOADER__',
    value: function ___handleKeyDown__REACT_HOT_LOADER__(_ref2) {
      var keyCode = _ref2.keyCode;

      if (keyCode === _KeyCodes.BACKSPACE) {
        this.props.onDismiss();
      }
    }
  }, {
    key: '___handleRef__REACT_HOT_LOADER__',
    value: function ___handleRef__REACT_HOT_LOADER__() {
      return this.___handleRef__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleRef__REACT_HOT_LOADER__',
    value: function ___handleRef__REACT_HOT_LOADER__() {
      return this.___handleRef__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleRef__REACT_HOT_LOADER__',
    value: function ___handleRef__REACT_HOT_LOADER__(ref) {
      this._chip = ref;
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          children = _props.children,
          disabled = _props.disabled,
          id = _props.id;
      var _state = this.state,
          buttonHovered = _state.buttonHovered,
          chipFocused = _state.chipFocused;


      var chipStyles = chipFocused && !disabled ? _Chip.CHIP_HOVER_STYLES : _Chip.CHIP_STYLES;

      var closeIconStyles = _Chip.CLOSE_ICON_STYLES;
      if (disabled) {
        closeIconStyles = _Chip.CLOSE_ICON_DISABLED_STYLES;
      } else if (buttonHovered) {
        closeIconStyles = _Chip.CLOSE_ICON_HOVER_STYLES;
      }

      var dismissHandler = !disabled ? this._handleDismissClick : _Base.NOOP;
      var keyDownHandler = !disabled ? this._handleKeyDown : _Base.NOOP;

      return _react2.default.createElement(
        'div',
        {
          'data-component': 'TxlChip',
          id: id,
          onBlur: this._handleChipBlur,
          onFocus: this._handleChipFocus,
          onKeyDown: keyDownHandler,
          ref: this._handleRef,
          style: chipStyles,
          tabIndex: 1
        },
        _react2.default.createElement(
          'div',
          null,
          children
        ),
        _react2.default.createElement(
          'span',
          {
            'data-test-chip-x-wrapper': true,
            onClick: dismissHandler,
            onMouseEnter: this._handleButtonMouseEnter,
            onMouseLeave: this._handleButtonMouseLeave,
            style: closeIconStyles
          },
          _react2.default.createElement(_Close2.default, {
            color: closeIconStyles.color
          })
        )
      );
    }
  }]);
  return TxlChip;
}(_react2.default.Component)) || _class;

exports.default = TxlChip;


TxlChip.displayName = 'TxlChip';

TxlChip.propTypes = {
  children: _react.PropTypes.node,
  disabled: _react.PropTypes.bool,
  id: _react.PropTypes.string,
  onDismiss: _react.PropTypes.func.isRequired
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlChip, 'TxlChip', 'src/chip/Chip.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jaGlwL0NoaXAuanN4Il0sIm5hbWVzIjpbIlR4bENoaXAiLCJhcmdzIiwiZm9jdXMiLCJoYXNGb2N1cyIsIl9oYW5kbGVCdXR0b25Nb3VzZUVudGVyIiwiX2hhbmRsZUJ1dHRvbk1vdXNlTGVhdmUiLCJfaGFuZGxlQ2hpcEJsdXIiLCJfaGFuZGxlQ2hpcEZvY3VzIiwiX2hhbmRsZURpc21pc3NDbGljayIsIl9oYW5kbGVLZXlEb3duIiwiX2hhbmRsZVJlZiIsInN0YXRlIiwiYnV0dG9uSG92ZXJlZCIsImNoaXBGb2N1c2VkIiwicHJvcHMiLCJkaXNhYmxlZCIsInNldFN0YXRlIiwiX2NoaXAiLCJlIiwib25EaXNtaXNzIiwia2V5Q29kZSIsInJlZiIsImNoaWxkcmVuIiwiaWQiLCJjaGlwU3R5bGVzIiwiY2xvc2VJY29uU3R5bGVzIiwiZGlzbWlzc0hhbmRsZXIiLCJrZXlEb3duSGFuZGxlciIsImNvbG9yIiwiQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJub2RlIiwiYm9vbCIsInN0cmluZyIsImZ1bmMiLCJpc1JlcXVpcmVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFFQTs7QUFDQTs7OztBQUNBOztBQUNBOzs7O0lBU3FCQSxPOzs7QUFDbkIscUJBQXFCO0FBQUE7O0FBQUE7O0FBQUEsc0NBQU5DLElBQU07QUFBTkEsVUFBTTtBQUFBOztBQUFBLG1LQUNWQSxJQURVOztBQUFBLFVBUXJCQyxLQVJxQjtBQUFBO0FBQUE7O0FBQUEsVUFjckJDLFFBZHFCO0FBQUE7QUFBQTs7QUFBQSxVQWdCckJDLHVCQWhCcUI7QUFBQTtBQUFBOztBQUFBLFVBb0JyQkMsdUJBcEJxQjtBQUFBO0FBQUE7O0FBQUEsVUF3QnJCQyxlQXhCcUI7QUFBQTtBQUFBOztBQUFBLFVBNEJyQkMsZ0JBNUJxQjtBQUFBO0FBQUE7O0FBQUEsVUFnQ3JCQyxtQkFoQ3FCO0FBQUE7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QUFHbEJWLE1BQUksaUJBQVVXLE1BSEk7QUFJbEJmLGFBQVcsaUJBQVVnQixJQUFWLENBQWVDO0FBSlIsQ0FBcEI7Ozs7Ozs7O2dDQXJHcUJwQyxPIiwiZmlsZSI6IkNoaXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJhZGl1bSBmcm9tICdyYWRpdW0nO1xuXG5pbXBvcnQgeyBOT09QIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCBJY29uQ2xvc2UgZnJvbSAnLi4vaWNvbnMvQ2xvc2UnO1xuaW1wb3J0IHsgQkFDS1NQQUNFIH0gZnJvbSAnLi4vY29uc3RhbnRzL0tleUNvZGVzJztcbmltcG9ydCB7XG4gIENISVBfSE9WRVJfU1RZTEVTLFxuICBDSElQX1NUWUxFUyxcbiAgQ0xPU0VfSUNPTl9TVFlMRVMsXG4gIENMT1NFX0lDT05fRElTQUJMRURfU1RZTEVTLFxuICBDTE9TRV9JQ09OX0hPVkVSX1NUWUxFUyxcbn0gZnJvbSAnLi9DaGlwLnN0eWxlJztcblxuQFJhZGl1bVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHhsQ2hpcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYnV0dG9uSG92ZXJlZDogZmFsc2UsXG4gICAgICBjaGlwRm9jdXNlZDogZmFsc2UsXG4gICAgfTtcbiAgfVxuXG4gIGZvY3VzID0gKCkgPT4ge1xuICAgIGlmICghdGhpcy5wcm9wcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNoaXBGb2N1c2VkOiB0cnVlIH0sICgpID0+IHRoaXMuX2NoaXAuZm9jdXMoKSk7XG4gICAgfVxuICB9XG5cbiAgaGFzRm9jdXMgPSAoKSA9PiB0aGlzLnN0YXRlLmNoaXBGb2N1c2VkXG5cbiAgX2hhbmRsZUJ1dHRvbk1vdXNlRW50ZXIgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGJ1dHRvbkhvdmVyZWQ6IHRydWUgfSk7XG4gIH1cblxuICBfaGFuZGxlQnV0dG9uTW91c2VMZWF2ZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgYnV0dG9uSG92ZXJlZDogZmFsc2UgfSk7XG4gIH1cblxuICBfaGFuZGxlQ2hpcEJsdXIgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGNoaXBGb2N1c2VkOiBmYWxzZSB9KTtcbiAgfVxuXG4gIF9oYW5kbGVDaGlwRm9jdXMgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGNoaXBGb2N1c2VkOiB0cnVlIH0pO1xuICB9XG5cbiAgX2hhbmRsZURpc21pc3NDbGljayA9IChlKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkRpc21pc3MoZSk7XG4gIH1cblxuICBfaGFuZGxlS2V5RG93biA9ICh7IGtleUNvZGUgfSkgPT4ge1xuICAgIGlmIChrZXlDb2RlID09PSBCQUNLU1BBQ0UpIHtcbiAgICAgIHRoaXMucHJvcHMub25EaXNtaXNzKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZVJlZiA9IChyZWYpID0+IHtcbiAgICB0aGlzLl9jaGlwID0gcmVmO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICBpZCxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IHtcbiAgICAgIGJ1dHRvbkhvdmVyZWQsXG4gICAgICBjaGlwRm9jdXNlZCxcbiAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGNvbnN0IGNoaXBTdHlsZXMgPSBjaGlwRm9jdXNlZCAmJiAhZGlzYWJsZWQgPyBDSElQX0hPVkVSX1NUWUxFUyA6IENISVBfU1RZTEVTO1xuXG4gICAgbGV0IGNsb3NlSWNvblN0eWxlcyA9IENMT1NFX0lDT05fU1RZTEVTO1xuICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgY2xvc2VJY29uU3R5bGVzID0gQ0xPU0VfSUNPTl9ESVNBQkxFRF9TVFlMRVM7XG4gICAgfSBlbHNlIGlmIChidXR0b25Ib3ZlcmVkKSB7XG4gICAgICBjbG9zZUljb25TdHlsZXMgPSBDTE9TRV9JQ09OX0hPVkVSX1NUWUxFUztcbiAgICB9XG5cbiAgICBjb25zdCBkaXNtaXNzSGFuZGxlciA9ICFkaXNhYmxlZCA/IHRoaXMuX2hhbmRsZURpc21pc3NDbGljayA6IE5PT1A7XG4gICAgY29uc3Qga2V5RG93bkhhbmRsZXIgPSAhZGlzYWJsZWQgPyB0aGlzLl9oYW5kbGVLZXlEb3duIDogTk9PUDtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGRhdGEtY29tcG9uZW50PVwiVHhsQ2hpcFwiXG4gICAgICAgIGlkPXtpZH1cbiAgICAgICAgb25CbHVyPXt0aGlzLl9oYW5kbGVDaGlwQmx1cn1cbiAgICAgICAgb25Gb2N1cz17dGhpcy5faGFuZGxlQ2hpcEZvY3VzfVxuICAgICAgICBvbktleURvd249e2tleURvd25IYW5kbGVyfVxuICAgICAgICByZWY9e3RoaXMuX2hhbmRsZVJlZn1cbiAgICAgICAgc3R5bGU9e2NoaXBTdHlsZXN9XG4gICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgPlxuICAgICAgICA8ZGl2PntjaGlsZHJlbn08L2Rpdj5cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICBkYXRhLXRlc3QtY2hpcC14LXdyYXBwZXJcbiAgICAgICAgICBvbkNsaWNrPXtkaXNtaXNzSGFuZGxlcn1cbiAgICAgICAgICBvbk1vdXNlRW50ZXI9e3RoaXMuX2hhbmRsZUJ1dHRvbk1vdXNlRW50ZXJ9XG4gICAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLl9oYW5kbGVCdXR0b25Nb3VzZUxlYXZlfVxuICAgICAgICAgIHN0eWxlPXtjbG9zZUljb25TdHlsZXN9XG4gICAgICAgID5cbiAgICAgICAgICA8SWNvbkNsb3NlXG4gICAgICAgICAgICBjb2xvcj17Y2xvc2VJY29uU3R5bGVzLmNvbG9yfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuVHhsQ2hpcC5kaXNwbGF5TmFtZSA9ICdUeGxDaGlwJztcblxuVHhsQ2hpcC5wcm9wVHlwZXMgPSB7XG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgb25EaXNtaXNzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufTtcbiJdfQ==