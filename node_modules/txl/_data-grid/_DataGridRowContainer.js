'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _defineProperty2 = require('babel-runtime/helpers/defineProperty');

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _ReactUtils = require('../ReactUtils');

var _DataGridStyles = require('./DataGridStyles');

var _attributes = require('./_attributes');

var _Base = require('../base/Base');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var TxlDataGridRowContainer = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlDataGridRowContainer, _React$Component);

  function TxlDataGridRowContainer() {
    (0, _classCallCheck3.default)(this, TxlDataGridRowContainer);
    return (0, _possibleConstructorReturn3.default)(this, (TxlDataGridRowContainer.__proto__ || (0, _getPrototypeOf2.default)(TxlDataGridRowContainer)).apply(this, arguments));
  }

  (0, _createClass3.default)(TxlDataGridRowContainer, [{
    key: '_updateHeights',
    value: function _updateHeights() {
      if (!this.refs.pinnedColumns) return;
      var unpinnedContainer = (0, _ReactUtils.findDOMNode)(this.refs.unpinnedColumns);
      var pinnedContainer = (0, _ReactUtils.findDOMNode)(this.refs.pinnedColumns);
      var pinnedContainerHeight = pinnedContainer.getBoundingClientRect().height;
      var unpinnedContainerHeight = unpinnedContainer.getBoundingClientRect().height;
      var maxHeight = Math.max(pinnedContainerHeight, unpinnedContainerHeight);
      var changedNode = void 0;

      // only set the height of the shortest container
      if (pinnedContainerHeight > unpinnedContainerHeight) {
        changedNode = unpinnedContainer;
      } else {
        changedNode = pinnedContainer;
      }
      changedNode.style.height = maxHeight + 'px';
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      this._updateHeights();
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate() {
      this._updateHeights();
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          index = _props.index,
          pinnedCells = _props.pinnedCells,
          unpinnedCells = _props.unpinnedCells,
          style = _props.style,
          componentName = _props.componentName;

      var PINNED_ATTR = (0, _defineProperty3.default)({}, _attributes.PINNED_WRAPPER_ATTR, true);
      var UNPINNED_ATTR = (0, _defineProperty3.default)({}, _attributes.UNPINNED_WRAPPER_ATTR, true);

      return _react2.default.createElement(
        'div',
        {
          'data-component': componentName,
          'data-row': index,
          style: style,
          key: index
        },
        !!pinnedCells.length && _react2.default.createElement(
          'div',
          (0, _extends3.default)({}, PINNED_ATTR, {
            style: (0, _extends3.default)({}, _DataGridStyles.CELL_WRAPPER, {
              left: 0,
              position: 'absolute'
            }),
            ref: 'pinnedColumns'
          }),
          pinnedCells
        ),
        _react2.default.createElement(
          'div',
          (0, _extends3.default)({}, UNPINNED_ATTR, {
            style: _DataGridStyles.CELL_WRAPPER,
            ref: 'unpinnedColumns'
          }),
          unpinnedCells
        )
      );
    }
  }]);
  return TxlDataGridRowContainer;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_updateHeights', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_updateHeights'), _class2.prototype)), _class2)) || _class;

exports.default = TxlDataGridRowContainer;


TxlDataGridRowContainer.propTypes = {
  componentName: _react.PropTypes.string.isRequired,
  index: _react.PropTypes.number,
  pinnedCells: _react.PropTypes.arrayOf(_react.PropTypes.node),
  style: _react.PropTypes.obj,
  unpinnedCells: _react.PropTypes.arrayOf(_react.PropTypes.node)
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlDataGridRowContainer, 'TxlDataGridRowContainer', 'src/_data-grid/_DataGridRowContainer.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fZGF0YS1ncmlkL19EYXRhR3JpZFJvd0NvbnRhaW5lci5qc3giXSwibmFtZXMiOlsiVHhsRGF0YUdyaWRSb3dDb250YWluZXIiLCJyZWZzIiwicGlubmVkQ29sdW1ucyIsInVucGlubmVkQ29udGFpbmVyIiwidW5waW5uZWRDb2x1bW5zIiwicGlubmVkQ29udGFpbmVyIiwicGlubmVkQ29udGFpbmVySGVpZ2h0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0IiwidW5waW5uZWRDb250YWluZXJIZWlnaHQiLCJtYXhIZWlnaHQiLCJNYXRoIiwibWF4IiwiY2hhbmdlZE5vZGUiLCJzdHlsZSIsIl91cGRhdGVIZWlnaHRzIiwicHJvcHMiLCJpbmRleCIsInBpbm5lZENlbGxzIiwidW5waW5uZWRDZWxscyIsImNvbXBvbmVudE5hbWUiLCJQSU5ORURfQVRUUiIsIlVOUElOTkVEX0FUVFIiLCJsZW5ndGgiLCJsZWZ0IiwicG9zaXRpb24iLCJDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwibnVtYmVyIiwiYXJyYXlPZiIsIm5vZGUiLCJvYmoiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUVBOztBQUNBOztBQUdBOztBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFHcUJBLHVCOzs7Ozs7Ozs7O3FDQUdGO0FBQ2YsVUFBSSxDQUFDLEtBQUtDLElBQUwsQ0FBVUMsYUFBZixFQUE4QjtBQUM5QixVQUFNQyxvQkFBb0IsNkJBQVksS0FBS0YsSUFBTCxDQUFVRyxlQUF0QixDQUExQjtBQUNBLFVBQU1DLGtCQUFrQiw2QkFBWSxLQUFLSixJQUFMLENBQVVDLGFBQXRCLENBQXhCO0FBQ0EsVUFBTUksd0JBQXdCRCxnQkFBZ0JFLHFCQUFoQixHQUF3Q0MsTUFBdEU7QUFDQSxVQUFNQywwQkFBMEJOLGtCQUFrQkkscUJBQWxCLEdBQTBDQyxNQUExRTtBQUNBLFVBQU1FLFlBQVlDLEtBQUtDLEdBQUwsQ0FBU04scUJBQVQsRUFBZ0NHLHVCQUFoQyxDQUFsQjtBQUNBLFVBQUlJLG9CQUFKOztBQUVBO0FBQ0EsVUFBSVAsd0JBQXdCRyx1QkFBNUIsRUFBcUQ7QUFDbkRJLHNCQUFjVixpQkFBZDtBQUNELE9BRkQsTUFFTztBQUNMVSxzQkFBY1IsZUFBZDtBQUNEO0FBQ0RRLGtCQUFZQyxLQUFaLENBQWtCTixNQUFsQixHQUE4QkUsU0FBOUI7QUFDRDs7O3dDQUVtQjtBQUNsQixXQUFLSyxjQUFMO0FBQ0Q7Ozt5Q0FFb0I7QUFDbkIsV0FBS0EsY0FBTDtBQUNEOzs7NkJBRVE7QUFBQSxtQkFDNkQsS0FBS0MsS0FEbEU7QUFBQSxVQUNDQyxLQURELFVBQ0NBLEtBREQ7QUFBQSxVQUNRQyxXQURSLFVBQ1FBLFdBRFI7QUFBQSxVQUNxQkMsYUFEckIsVUFDcUJBLGFBRHJCO0FBQUEsVUFDb0NMLEtBRHBDLFVBQ29DQSxLQURwQztBQUFBLFVBQzJDTSxhQUQzQyxVQUMyQ0EsYUFEM0M7O0FBRVAsVUFBTUMsaUZBQXVDLElBQXZDLENBQU47QUFDQSxVQUFNQyxxRkFBMkMsSUFBM0MsQ0FBTjs7QUFFQSxhQUNFO0FBQUE7QUFBQTtBQUNFLDRCQUFnQkYsYUFEbEI7QUFFRSxzQkFBVUgsS0FGWjtBQUdFLGlCQUFPSCxLQUhUO0FBSUUsZUFBS0c7QUFKUDtBQU9HLFNBQUMsQ0FBQ0MsWUFBWUssTUFBZCxJQUNDO0FBQUE7QUFBQSxxQ0FDTUYsV0FETjtBQUVFLDRFQUVLO0FBQ0RHLG9CQUFNLENBREw7QUFFREMsd0JBQVU7QUFGVCxhQUZMLENBRkY7QUFTRSxpQkFBSTtBQVROO0FBV0dQO0FBWEgsU0FSSjtBQXVCRTtBQUFBO0FBQUEscUNBQ01JLGFBRE47QUFFRSwrQ0FGRjtBQUdFLGlCQUFJO0FBSE47QUFLR0g7QUFMSDtBQXZCRixPQURGO0FBaUNEOzs7RUFuRWtELGdCQUFNTyxTOztrQkFBdEMxQix1Qjs7O0FBc0VyQkEsd0JBQXdCMkIsU0FBeEIsR0FBb0M7QUFDbENQLGlCQUFlLGlCQUFVUSxNQUFWLENBQWlCQyxVQURFO0FBRWxDWixTQUFPLGlCQUFVYSxNQUZpQjtBQUdsQ1osZUFBYSxpQkFBVWEsT0FBVixDQUFrQixpQkFBVUMsSUFBNUIsQ0FIcUI7QUFJbENsQixTQUFPLGlCQUFVbUIsR0FKaUI7QUFLbENkLGlCQUFlLGlCQUFVWSxPQUFWLENBQWtCLGlCQUFVQyxJQUE1QjtBQUxtQixDQUFwQzs7Ozs7Ozs7Z0NBdEVxQmhDLHVCIiwiZmlsZSI6Il9EYXRhR3JpZFJvd0NvbnRhaW5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5cbmltcG9ydCB7IGZpbmRET01Ob2RlIH0gZnJvbSAnLi4vUmVhY3RVdGlscyc7XG5pbXBvcnQge1xuICBDRUxMX1dSQVBQRVIsXG59IGZyb20gJy4vRGF0YUdyaWRTdHlsZXMnO1xuaW1wb3J0IHtcbiAgUElOTkVEX1dSQVBQRVJfQVRUUixcbiAgVU5QSU5ORURfV1JBUFBFUl9BVFRSLFxufSBmcm9tICcuL19hdHRyaWJ1dGVzJztcbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcblxuQFJhZGl1bVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHhsRGF0YUdyaWRSb3dDb250YWluZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gIEBhdXRvYmluZFxuICBfdXBkYXRlSGVpZ2h0cygpIHtcbiAgICBpZiAoIXRoaXMucmVmcy5waW5uZWRDb2x1bW5zKSByZXR1cm47XG4gICAgY29uc3QgdW5waW5uZWRDb250YWluZXIgPSBmaW5kRE9NTm9kZSh0aGlzLnJlZnMudW5waW5uZWRDb2x1bW5zKTtcbiAgICBjb25zdCBwaW5uZWRDb250YWluZXIgPSBmaW5kRE9NTm9kZSh0aGlzLnJlZnMucGlubmVkQ29sdW1ucyk7XG4gICAgY29uc3QgcGlubmVkQ29udGFpbmVySGVpZ2h0ID0gcGlubmVkQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICBjb25zdCB1bnBpbm5lZENvbnRhaW5lckhlaWdodCA9IHVucGlubmVkQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICBjb25zdCBtYXhIZWlnaHQgPSBNYXRoLm1heChwaW5uZWRDb250YWluZXJIZWlnaHQsIHVucGlubmVkQ29udGFpbmVySGVpZ2h0KTtcbiAgICBsZXQgY2hhbmdlZE5vZGU7XG5cbiAgICAvLyBvbmx5IHNldCB0aGUgaGVpZ2h0IG9mIHRoZSBzaG9ydGVzdCBjb250YWluZXJcbiAgICBpZiAocGlubmVkQ29udGFpbmVySGVpZ2h0ID4gdW5waW5uZWRDb250YWluZXJIZWlnaHQpIHtcbiAgICAgIGNoYW5nZWROb2RlID0gdW5waW5uZWRDb250YWluZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoYW5nZWROb2RlID0gcGlubmVkQ29udGFpbmVyO1xuICAgIH1cbiAgICBjaGFuZ2VkTm9kZS5zdHlsZS5oZWlnaHQgPSBgJHttYXhIZWlnaHR9cHhgO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5fdXBkYXRlSGVpZ2h0cygpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMuX3VwZGF0ZUhlaWdodHMoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGluZGV4LCBwaW5uZWRDZWxscywgdW5waW5uZWRDZWxscywgc3R5bGUsIGNvbXBvbmVudE5hbWUgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgUElOTkVEX0FUVFIgPSB7IFtQSU5ORURfV1JBUFBFUl9BVFRSXTogdHJ1ZSB9O1xuICAgIGNvbnN0IFVOUElOTkVEX0FUVFIgPSB7IFtVTlBJTk5FRF9XUkFQUEVSX0FUVFJdOiB0cnVlIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBkYXRhLWNvbXBvbmVudD17Y29tcG9uZW50TmFtZX1cbiAgICAgICAgZGF0YS1yb3c9e2luZGV4fVxuICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgIGtleT17aW5kZXh9XG4gICAgICA+XG5cbiAgICAgICAgeyEhcGlubmVkQ2VsbHMubGVuZ3RoICYmXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgey4uLlBJTk5FRF9BVFRSfVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgLi4uQ0VMTF9XUkFQUEVSLFxuICAgICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICByZWY9XCJwaW5uZWRDb2x1bW5zXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cGlubmVkQ2VsbHN9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgey4uLlVOUElOTkVEX0FUVFJ9XG4gICAgICAgICAgc3R5bGU9e0NFTExfV1JBUFBFUn1cbiAgICAgICAgICByZWY9XCJ1bnBpbm5lZENvbHVtbnNcIlxuICAgICAgICA+XG4gICAgICAgICAge3VucGlubmVkQ2VsbHN9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5UeGxEYXRhR3JpZFJvd0NvbnRhaW5lci5wcm9wVHlwZXMgPSB7XG4gIGNvbXBvbmVudE5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgaW5kZXg6IFByb3BUeXBlcy5udW1iZXIsXG4gIHBpbm5lZENlbGxzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubm9kZSksXG4gIHN0eWxlOiBQcm9wVHlwZXMub2JqLFxuICB1bnBpbm5lZENlbGxzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubm9kZSksXG59O1xuIl19