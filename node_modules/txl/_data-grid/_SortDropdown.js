'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _keys = require('babel-runtime/core-js/object/keys');

var _keys2 = _interopRequireDefault(_keys);

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _desc, _value, _class;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _helpers = require('../styles/helpers');

var _layers = require('../styles/mixins/layers');

var _Base = require('../base/Base');

var _createDropdown = require('../dropdowns/_createDropdown');

var _createDropdown2 = _interopRequireDefault(_createDropdown);

var _DropdownList = require('../dropdowns/_DropdownList');

var _DropdownList2 = _interopRequireDefault(_DropdownList);

var _FlyoutTargetBase = require('../dropdowns/_FlyoutTargetBase');

var _FlyoutTargetBase2 = _interopRequireDefault(_FlyoutTargetBase);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var FILL_COLOR = 'white';

var WRAPPER_STYLE = (0, _extends3.default)({}, (0, _helpers.square)((0, _helpers.gridUnits)(7)), {
  alignItems: 'center',
  cursor: 'pointer',
  display: 'flex',
  justifyContent: 'center',
  position: 'relative'
});

var SVG_STYLE = {
  display: 'block'
};

var ICON_BASE_STYLE = (0, _extends3.default)({}, (0, _helpers.square)('13px'), {
  display: 'block'
});

var FLYOUT_STYLE = (0, _extends3.default)({}, _layers.LAYER_2, {
  minWidth: (0, _helpers.gridUnits)(20)
});

var FLYOUT_CONTENT_STYLE = {
  backgroundColor: 'white',
  zIndex: 3
};

var RESTING_HOVER_OPACITY = 0.75;
var RESTING_OPACITY = 0.2;
var SORTED_DIRECTION_OPACITY = 1;

var TYPE_OPTIONS = {
  age: {
    asc: 'Oldest to Newest',
    desc: 'Newest to Oldest'
  },
  alpha: {
    asc: 'A-Z',
    desc: 'Z-A'
  },
  number: {
    asc: 'Ascending',
    desc: 'Descending'
  }
};

function getSortMenu(type) {
  var TYPES = TYPE_OPTIONS[type];
  if (type === 'age') {
    return [{
      label: TYPES.desc,
      value: 'DESC'
    }, {
      label: TYPES.asc,
      value: 'ASC'
    }];
  }
  return [{
    label: TYPES.asc,
    value: 'ASC'
  }, {
    label: TYPES.desc,
    value: 'DESC'
  }];
}

// @TODO: Should probably rename this file / component class to represent that
// this is a flyout and not a dropdown.
var TXLDataGridSortDropdown = (_class = function (_React$Component) {
  (0, _inherits3.default)(TXLDataGridSortDropdown, _React$Component);

  function TXLDataGridSortDropdown() {
    var _ref;

    (0, _classCallCheck3.default)(this, TXLDataGridSortDropdown);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TXLDataGridSortDropdown.__proto__ || (0, _getPrototypeOf2.default)(TXLDataGridSortDropdown)).call.apply(_ref, [this].concat(args)));

    _this.state = (0, _extends3.default)({}, _this.state, {
      hovered: false
    });
    return _this;
  }

  (0, _createClass3.default)(TXLDataGridSortDropdown, [{
    key: '_toggleDropdown',
    value: function _toggleDropdown() {
      this.props.updateDropdown({ open: !this.props.open });
    }
  }, {
    key: '_handleMouseEnter',
    value: function _handleMouseEnter() {
      this.setState({ hovered: true });
    }
  }, {
    key: '_handleMouseLeave',
    value: function _handleMouseLeave() {
      this.setState({ hovered: false });
    }
  }, {
    key: '_handleItemClick',
    value: function _handleItemClick(obj) {
      var direction = obj.value;
      this.props.onSortRequested({ direction: direction });
      this.props.updateDropdown({ open: false });
    }
  }, {
    key: 'render',
    value: function render() {
      var restingOpacity = this.state.hovered ? RESTING_HOVER_OPACITY : RESTING_OPACITY;

      var topOpacity = this.props.direction === 'ASC' ? SORTED_DIRECTION_OPACITY : restingOpacity;

      var bottomOpacity = this.props.direction === 'DESC' ? SORTED_DIRECTION_OPACITY : restingOpacity;

      var dropdownItems = getSortMenu(this.props.type);

      var flyoutContent = _react2.default.createElement(
        'div',
        { style: FLYOUT_STYLE },
        _react2.default.createElement(
          'div',
          { style: FLYOUT_CONTENT_STYLE },
          _react2.default.createElement(_DropdownList2.default, {
            items: dropdownItems,
            onClick: this._handleItemClick,
            selectedValues: [this.props.direction]
          })
        )
      );

      return _react2.default.createElement(
        _FlyoutTargetBase2.default,
        {
          onClick: this._toggleDropdown,
          onMouseEnter: this._handleMouseEnter,
          onMouseLeave: this._handleMouseLeave,
          componentName: 'TxlDataGrid_SortFlyout',
          id: this.props.id,
          style: WRAPPER_STYLE,
          visible: this.props.open,
          content: flyoutContent
        },
        _react2.default.createElement(
          'i',
          { style: ICON_BASE_STYLE },
          _react2.default.createElement(
            'svg',
            {
              style: SVG_STYLE,
              viewBox: '0 0 13 13'
            },
            _react2.default.createElement('path', {
              fill: FILL_COLOR,
              fillOpacity: bottomOpacity,
              d: 'M6.5 13l3.9-4.3H2.6z'
            }),
            _react2.default.createElement('path', {
              fill: FILL_COLOR,
              fillOpacity: topOpacity,
              d: 'M6.5 0L2.6 4.3h7.8z'
            })
          )
        )
      );
    }
  }]);
  return TXLDataGridSortDropdown;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, '_toggleDropdown', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_toggleDropdown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, '_handleMouseEnter', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleMouseEnter'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, '_handleMouseLeave', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleMouseLeave'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, '_handleItemClick', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleItemClick'), _class.prototype)), _class);


TXLDataGridSortDropdown.propTypes = {
  direction: _react.PropTypes.oneOf(['ASC', 'DESC']),
  id: _react.PropTypes.string,
  onSortRequested: _react.PropTypes.func.isRequired,
  open: _react.PropTypes.bool,
  type: _react.PropTypes.oneOf((0, _keys2.default)(TYPE_OPTIONS)).isRequired,
  updateDropdown: _react.PropTypes.func
};

TXLDataGridSortDropdown.defaultProps = {
  onSortRequested: _Base.NOOP,
  updateDropdown: _Base.NOOP
};

var _default = (0, _createDropdown2.default)(TXLDataGridSortDropdown);

exports.default = _default;
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(FILL_COLOR, 'FILL_COLOR', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(WRAPPER_STYLE, 'WRAPPER_STYLE', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(SVG_STYLE, 'SVG_STYLE', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(ICON_BASE_STYLE, 'ICON_BASE_STYLE', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(FLYOUT_STYLE, 'FLYOUT_STYLE', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(FLYOUT_CONTENT_STYLE, 'FLYOUT_CONTENT_STYLE', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(RESTING_HOVER_OPACITY, 'RESTING_HOVER_OPACITY', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(RESTING_OPACITY, 'RESTING_OPACITY', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(SORTED_DIRECTION_OPACITY, 'SORTED_DIRECTION_OPACITY', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(TYPE_OPTIONS, 'TYPE_OPTIONS', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(getSortMenu, 'getSortMenu', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(TXLDataGridSortDropdown, 'TXLDataGridSortDropdown', 'src/_data-grid/_SortDropdown.jsx');

  __REACT_HOT_LOADER__.register(_default, 'default', 'src/_data-grid/_SortDropdown.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fZGF0YS1ncmlkL19Tb3J0RHJvcGRvd24uanN4Il0sIm5hbWVzIjpbIkZJTExfQ09MT1IiLCJXUkFQUEVSX1NUWUxFIiwiYWxpZ25JdGVtcyIsImN1cnNvciIsImRpc3BsYXkiLCJqdXN0aWZ5Q29udGVudCIsInBvc2l0aW9uIiwiU1ZHX1NUWUxFIiwiSUNPTl9CQVNFX1NUWUxFIiwiRkxZT1VUX1NUWUxFIiwibWluV2lkdGgiLCJGTFlPVVRfQ09OVEVOVF9TVFlMRSIsImJhY2tncm91bmRDb2xvciIsInpJbmRleCIsIlJFU1RJTkdfSE9WRVJfT1BBQ0lUWSIsIlJFU1RJTkdfT1BBQ0lUWSIsIlNPUlRFRF9ESVJFQ1RJT05fT1BBQ0lUWSIsIlRZUEVfT1BUSU9OUyIsImFnZSIsImFzYyIsImRlc2MiLCJhbHBoYSIsIm51bWJlciIsImdldFNvcnRNZW51IiwidHlwZSIsIlRZUEVTIiwibGFiZWwiLCJ2YWx1ZSIsIlRYTERhdGFHcmlkU29ydERyb3Bkb3duIiwiYXJncyIsInN0YXRlIiwiaG92ZXJlZCIsInByb3BzIiwidXBkYXRlRHJvcGRvd24iLCJvcGVuIiwic2V0U3RhdGUiLCJvYmoiLCJkaXJlY3Rpb24iLCJvblNvcnRSZXF1ZXN0ZWQiLCJyZXN0aW5nT3BhY2l0eSIsInRvcE9wYWNpdHkiLCJib3R0b21PcGFjaXR5IiwiZHJvcGRvd25JdGVtcyIsImZseW91dENvbnRlbnQiLCJfaGFuZGxlSXRlbUNsaWNrIiwiX3RvZ2dsZURyb3Bkb3duIiwiX2hhbmRsZU1vdXNlRW50ZXIiLCJfaGFuZGxlTW91c2VMZWF2ZSIsImlkIiwiQ29tcG9uZW50IiwicHJvcFR5cGVzIiwib25lT2YiLCJzdHJpbmciLCJmdW5jIiwiaXNSZXF1aXJlZCIsImJvb2wiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUVBOztBQUlBOztBQUNBOztBQUNBOzs7O0FBQ0E7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O0FBVFEsQ0FBcEM7O0FBWUF6Qix3QkFBd0I0QixZQUF4QixHQUF1QztBQUNyQ2xCLDZCQURxQztBQUVyQ0w7QUFGcUMsQ0FBdkM7O2VBS2UsOEJBQWVMLHVCQUFmLEM7Ozs7Ozs7Ozs7Z0NBdkxUNUIsVTs7Z0NBRUFDLGE7O2dDQVNBTSxTOztnQ0FJQUMsZTs7Z0NBS0FDLFk7O2dDQUtBRSxvQjs7Z0NBS0FHLHFCOztnQ0FDQUMsZTs7Z0NBQ0FDLHdCOztnQ0FFQUMsWTs7Z0NBZUdNLFc7O2dDQTBCSEssdUIiLCJmaWxlIjoiX1NvcnREcm9wZG93bi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7XG4gIHNxdWFyZSxcbiAgZ3JpZFVuaXRzIGFzIGd1LFxufSBmcm9tICcuLi9zdHlsZXMvaGVscGVycyc7XG5pbXBvcnQgeyBMQVlFUl8yIH0gZnJvbSAnLi4vc3R5bGVzL21peGlucy9sYXllcnMnO1xuaW1wb3J0IHsgYXV0b2JpbmQsIE5PT1AgfSBmcm9tICcuLi9iYXNlL0Jhc2UnO1xuaW1wb3J0IGNyZWF0ZURyb3Bkb3duIGZyb20gJy4uL2Ryb3Bkb3ducy9fY3JlYXRlRHJvcGRvd24nO1xuaW1wb3J0IERyb3Bkb3duTGlzdCBmcm9tICcuLi9kcm9wZG93bnMvX0Ryb3Bkb3duTGlzdCc7XG5pbXBvcnQgRmx5b3V0VGFyZ2V0QmFzZSBmcm9tICcuLi9kcm9wZG93bnMvX0ZseW91dFRhcmdldEJhc2UnO1xuXG5jb25zdCBGSUxMX0NPTE9SID0gJ3doaXRlJztcblxuY29uc3QgV1JBUFBFUl9TVFlMRSA9IHtcbiAgLi4uc3F1YXJlKGd1KDcpKSxcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIGN1cnNvcjogJ3BvaW50ZXInLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG59O1xuXG5jb25zdCBTVkdfU1RZTEUgPSB7XG4gIGRpc3BsYXk6ICdibG9jaycsXG59O1xuXG5jb25zdCBJQ09OX0JBU0VfU1RZTEUgPSB7XG4gIC4uLnNxdWFyZSgnMTNweCcpLFxuICBkaXNwbGF5OiAnYmxvY2snLFxufTtcblxuY29uc3QgRkxZT1VUX1NUWUxFID0ge1xuICAuLi5MQVlFUl8yLFxuICBtaW5XaWR0aDogZ3UoMjApLFxufTtcblxuY29uc3QgRkxZT1VUX0NPTlRFTlRfU1RZTEUgPSB7XG4gIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgekluZGV4OiAzLFxufTtcblxuY29uc3QgUkVTVElOR19IT1ZFUl9PUEFDSVRZID0gMC43NTtcbmNvbnN0IFJFU1RJTkdfT1BBQ0lUWSA9IDAuMjtcbmNvbnN0IFNPUlRFRF9ESVJFQ1RJT05fT1BBQ0lUWSA9IDE7XG5cbmNvbnN0IFRZUEVfT1BUSU9OUyA9IHtcbiAgYWdlOiB7XG4gICAgYXNjOiAnT2xkZXN0IHRvIE5ld2VzdCcsXG4gICAgZGVzYzogJ05ld2VzdCB0byBPbGRlc3QnLFxuICB9LFxuICBhbHBoYToge1xuICAgIGFzYzogJ0EtWicsXG4gICAgZGVzYzogJ1otQScsXG4gIH0sXG4gIG51bWJlcjoge1xuICAgIGFzYzogJ0FzY2VuZGluZycsXG4gICAgZGVzYzogJ0Rlc2NlbmRpbmcnLFxuICB9LFxufTtcblxuZnVuY3Rpb24gZ2V0U29ydE1lbnUodHlwZSkge1xuICBjb25zdCBUWVBFUyA9IFRZUEVfT1BUSU9OU1t0eXBlXTtcbiAgaWYgKHR5cGUgPT09ICdhZ2UnKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgbGFiZWw6IFRZUEVTLmRlc2MsXG4gICAgICAgIHZhbHVlOiAnREVTQycsXG4gICAgICB9LCB7XG4gICAgICAgIGxhYmVsOiBUWVBFUy5hc2MsXG4gICAgICAgIHZhbHVlOiAnQVNDJyxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIGxhYmVsOiBUWVBFUy5hc2MsXG4gICAgICB2YWx1ZTogJ0FTQycsXG4gICAgfSwge1xuICAgICAgbGFiZWw6IFRZUEVTLmRlc2MsXG4gICAgICB2YWx1ZTogJ0RFU0MnLFxuICAgIH0sXG4gIF07XG59XG5cbi8vIEBUT0RPOiBTaG91bGQgcHJvYmFibHkgcmVuYW1lIHRoaXMgZmlsZSAvIGNvbXBvbmVudCBjbGFzcyB0byByZXByZXNlbnQgdGhhdFxuLy8gdGhpcyBpcyBhIGZseW91dCBhbmQgbm90IGEgZHJvcGRvd24uXG5jbGFzcyBUWExEYXRhR3JpZFNvcnREcm9wZG93biBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgIGhvdmVyZWQ6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX3RvZ2dsZURyb3Bkb3duKCkge1xuICAgIHRoaXMucHJvcHMudXBkYXRlRHJvcGRvd24oeyBvcGVuOiAhdGhpcy5wcm9wcy5vcGVuIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVNb3VzZUVudGVyKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiB0cnVlIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVNb3VzZUxlYXZlKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiBmYWxzZSB9KTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlSXRlbUNsaWNrKG9iaikge1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IG9iai52YWx1ZTtcbiAgICB0aGlzLnByb3BzLm9uU29ydFJlcXVlc3RlZCh7IGRpcmVjdGlvbiB9KTtcbiAgICB0aGlzLnByb3BzLnVwZGF0ZURyb3Bkb3duKHsgb3BlbjogZmFsc2UgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcmVzdGluZ09wYWNpdHkgPSB0aGlzLnN0YXRlLmhvdmVyZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVTVElOR19IT1ZFUl9PUEFDSVRZIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFU1RJTkdfT1BBQ0lUWTtcblxuICAgIGNvbnN0IHRvcE9wYWNpdHkgPSB0aGlzLnByb3BzLmRpcmVjdGlvbiA9PT0gJ0FTQycgP1xuICAgICAgICAgICAgICAgICAgICAgICBTT1JURURfRElSRUNUSU9OX09QQUNJVFkgOlxuICAgICAgICAgICAgICAgICAgICAgICByZXN0aW5nT3BhY2l0eTtcblxuICAgIGNvbnN0IGJvdHRvbU9wYWNpdHkgPSB0aGlzLnByb3BzLmRpcmVjdGlvbiA9PT0gJ0RFU0MnID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgU09SVEVEX0RJUkVDVElPTl9PUEFDSVRZIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdGluZ09wYWNpdHk7XG5cbiAgICBjb25zdCBkcm9wZG93bkl0ZW1zID0gZ2V0U29ydE1lbnUodGhpcy5wcm9wcy50eXBlKTtcblxuICAgIGNvbnN0IGZseW91dENvbnRlbnQgPSAoXG4gICAgICA8ZGl2IHN0eWxlPXtGTFlPVVRfU1RZTEV9PlxuICAgICAgICA8ZGl2IHN0eWxlPXtGTFlPVVRfQ09OVEVOVF9TVFlMRX0+XG4gICAgICAgICAgPERyb3Bkb3duTGlzdFxuICAgICAgICAgICAgaXRlbXM9e2Ryb3Bkb3duSXRlbXN9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9oYW5kbGVJdGVtQ2xpY2t9XG4gICAgICAgICAgICBzZWxlY3RlZFZhbHVlcz17W3RoaXMucHJvcHMuZGlyZWN0aW9uXX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEZseW91dFRhcmdldEJhc2VcbiAgICAgICAgb25DbGljaz17dGhpcy5fdG9nZ2xlRHJvcGRvd259XG4gICAgICAgIG9uTW91c2VFbnRlcj17dGhpcy5faGFuZGxlTW91c2VFbnRlcn1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLl9oYW5kbGVNb3VzZUxlYXZlfVxuICAgICAgICBjb21wb25lbnROYW1lPVwiVHhsRGF0YUdyaWRfU29ydEZseW91dFwiXG4gICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxuICAgICAgICBzdHlsZT17V1JBUFBFUl9TVFlMRX1cbiAgICAgICAgdmlzaWJsZT17dGhpcy5wcm9wcy5vcGVufVxuICAgICAgICBjb250ZW50PXtmbHlvdXRDb250ZW50fVxuICAgICAgPlxuICAgICAgICA8aSBzdHlsZT17SUNPTl9CQVNFX1NUWUxFfT5cbiAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICBzdHlsZT17U1ZHX1NUWUxFfVxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAxMyAxM1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgZmlsbD17RklMTF9DT0xPUn1cbiAgICAgICAgICAgICAgZmlsbE9wYWNpdHk9e2JvdHRvbU9wYWNpdHl9XG4gICAgICAgICAgICAgIGQ9XCJNNi41IDEzbDMuOS00LjNIMi42elwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgZmlsbD17RklMTF9DT0xPUn1cbiAgICAgICAgICAgICAgZmlsbE9wYWNpdHk9e3RvcE9wYWNpdHl9XG4gICAgICAgICAgICAgIGQ9XCJNNi41IDBMMi42IDQuM2g3Ljh6XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvaT5cbiAgICAgIDwvRmx5b3V0VGFyZ2V0QmFzZT5cbiAgICApO1xuICB9XG59XG5cblRYTERhdGFHcmlkU29ydERyb3Bkb3duLnByb3BUeXBlcyA9IHtcbiAgZGlyZWN0aW9uOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICdBU0MnLFxuICAgICdERVNDJyxcbiAgXSksXG4gIGlkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBvblNvcnRSZXF1ZXN0ZWQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9wZW46IFByb3BUeXBlcy5ib29sLFxuICB0eXBlOiBQcm9wVHlwZXMub25lT2YoT2JqZWN0LmtleXMoVFlQRV9PUFRJT05TKSkuaXNSZXF1aXJlZCxcbiAgdXBkYXRlRHJvcGRvd246IFByb3BUeXBlcy5mdW5jLFxufTtcblxuVFhMRGF0YUdyaWRTb3J0RHJvcGRvd24uZGVmYXVsdFByb3BzID0ge1xuICBvblNvcnRSZXF1ZXN0ZWQ6IE5PT1AsXG4gIHVwZGF0ZURyb3Bkb3duOiBOT09QLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRHJvcGRvd24oVFhMRGF0YUdyaWRTb3J0RHJvcGRvd24pO1xuIl19