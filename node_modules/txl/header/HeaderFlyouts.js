'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _desc, _value, _class;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _HeaderFlyoutsControlled = require('./HeaderFlyoutsControlled');

var _HeaderFlyoutsControlled2 = _interopRequireDefault(_HeaderFlyoutsControlled);

var _Base = require('../base/Base');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var TxlHeaderFlyouts = (_class = function (_React$Component) {
  (0, _inherits3.default)(TxlHeaderFlyouts, _React$Component);

  function TxlHeaderFlyouts() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlHeaderFlyouts);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlHeaderFlyouts.__proto__ || (0, _getPrototypeOf2.default)(TxlHeaderFlyouts)).call.apply(_ref, [this].concat(args)));

    _this.state = {
      selectedFlyoutIndex: null
    };
    return _this;
  }

  (0, _createClass3.default)(TxlHeaderFlyouts, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      window.addEventListener('click', this._handleWindowClick);
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      window.removeEventListener('click', this._handleWindowClick);
    }
  }, {
    key: '_handleWindowClick',
    value: function _handleWindowClick() {
      this._setSelectedFlyoutIndex(null);
    }
  }, {
    key: '_handleFlyoutContentClick',
    value: function _handleFlyoutContentClick(obj) {
      if (obj.event.target.getAttribute('data-close-header-flyout') !== null) {
        this.setState({ selectedFlyoutIndex: null });
      } else {
        obj.event.stopPropagation();
      }
    }
  }, {
    key: '_handleFlyoutTargetClick',
    value: function _handleFlyoutTargetClick(obj) {
      var index = obj.index;
      var shouldClose = this.state.selectedFlyoutIndex === index;

      obj.event.stopPropagation();

      this._setSelectedFlyoutIndex(shouldClose ? null : index);
    }
  }, {
    key: '_setSelectedFlyoutIndex',
    value: function _setSelectedFlyoutIndex(selectedFlyoutIndex) {
      this.setState({ selectedFlyoutIndex: selectedFlyoutIndex });
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(_HeaderFlyoutsControlled2.default, {
        items: this.props.items,
        selectedFlyoutIndex: this.state.selectedFlyoutIndex,
        onFlyoutContentClick: this._handleFlyoutContentClick,
        onFlyoutTargetClick: this._handleFlyoutTargetClick
      });
    }
  }]);
  return TxlHeaderFlyouts;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, '_handleWindowClick', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleWindowClick'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, '_handleFlyoutContentClick', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleFlyoutContentClick'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, '_handleFlyoutTargetClick', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleFlyoutTargetClick'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, '_setSelectedFlyoutIndex', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_setSelectedFlyoutIndex'), _class.prototype)), _class);
exports.default = TxlHeaderFlyouts;


TxlHeaderFlyouts.propTypes = {
  items: _HeaderFlyoutsControlled2.default.propTypes.items
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlHeaderFlyouts, 'TxlHeaderFlyouts', 'src/header/HeaderFlyouts.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWFkZXIvSGVhZGVyRmx5b3V0cy5qc3giXSwibmFtZXMiOlsiVHhsSGVhZGVyRmx5b3V0cyIsImFyZ3MiLCJzdGF0ZSIsInNlbGVjdGVkRmx5b3V0SW5kZXgiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZVdpbmRvd0NsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9zZXRTZWxlY3RlZEZseW91dEluZGV4Iiwib2JqIiwiZXZlbnQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJzZXRTdGF0ZSIsInN0b3BQcm9wYWdhdGlvbiIsImluZGV4Iiwic2hvdWxkQ2xvc2UiLCJwcm9wcyIsIml0ZW1zIiwiX2hhbmRsZUZseW91dENvbnRlbnRDbGljayIsIl9oYW5kbGVGbHlvdXRUYXJnZXRDbGljayIsIkNvbXBvbmVudCIsInByb3BUeXBlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFFQTs7OztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFFcUJBLGdCOzs7QUFDbkIsOEJBQXFCO0FBQUE7O0FBQUE7O0FBQUEsc0NBQU5DLElBQU07QUFBTkEsVUFBTTtBQUFBOztBQUFBLHFMQUNWQSxJQURVOztBQUduQixVQUFLQyxLQUFMLEdBQWE7QUFDWEMsMkJBQXFCO0FBRFYsS0FBYjtBQUhtQjtBQU1wQjs7Ozt3Q0FFbUI7QUFDbEJDLGFBQU9DLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLEtBQUtDLGtCQUF0QztBQUNEOzs7MkNBRXNCO0FBQ3JCRixhQUFPRyxtQkFBUCxDQUEyQixPQUEzQixFQUFvQyxLQUFLRCxrQkFBekM7QUFDRDs7O3lDQUdvQjtBQUNuQixXQUFLRSx1QkFBTCxDQUE2QixJQUE3QjtBQUNEOzs7OENBR3lCQyxHLEVBQUs7QUFDN0IsVUFBSUEsSUFBSUMsS0FBSixDQUFVQyxNQUFWLENBQWlCQyxZQUFqQixDQUE4QiwwQkFBOUIsTUFBOEQsSUFBbEUsRUFBd0U7QUFDdEUsYUFBS0MsUUFBTCxDQUFjLEVBQUVWLHFCQUFxQixJQUF2QixFQUFkO0FBQ0QsT0FGRCxNQUVPO0FBQ0xNLFlBQUlDLEtBQUosQ0FBVUksZUFBVjtBQUNEO0FBQ0Y7Ozs2Q0FHd0JMLEcsRUFBSztBQUM1QixVQUFNTSxRQUFRTixJQUFJTSxLQUFsQjtBQUNBLFVBQU1DLGNBQWMsS0FBS2QsS0FBTCxDQUFXQyxtQkFBWCxLQUFtQ1ksS0FBdkQ7O0FBRUFOLFVBQUlDLEtBQUosQ0FBVUksZUFBVjs7QUFFQSxXQUFLTix1QkFBTCxDQUE2QlEsY0FBYyxJQUFkLEdBQXFCRCxLQUFsRDtBQUNEOzs7NENBR3VCWixtQixFQUFxQjtBQUMzQyxXQUFLVSxRQUFMLENBQWMsRUFBRVYsd0NBQUYsRUFBZDtBQUNEOzs7NkJBRVE7QUFDUCxhQUNFO0FBQ0UsZUFBTyxLQUFLYyxLQUFMLENBQVdDLEtBRHBCO0FBRUUsNkJBQXFCLEtBQUtoQixLQUFMLENBQVdDLG1CQUZsQztBQUdFLDhCQUFzQixLQUFLZ0IseUJBSDdCO0FBSUUsNkJBQXFCLEtBQUtDO0FBSjVCLFFBREY7QUFRRDs7O0VBdkQyQyxnQkFBTUMsUztrQkFBL0JyQixnQjs7O0FBMERyQkEsaUJBQWlCc0IsU0FBakIsR0FBNkI7QUFDM0JKLFNBQU8sa0NBQXdCSSxTQUF4QixDQUFrQ0o7QUFEZCxDQUE3Qjs7Ozs7Ozs7Z0NBMURxQmxCLGdCIiwiZmlsZSI6IkhlYWRlckZseW91dHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgSGVhZGVyRmx5b3V0c0NvbnRyb2xsZWQgZnJvbSAnLi9IZWFkZXJGbHlvdXRzQ29udHJvbGxlZCc7XG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2Jhc2UvQmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR4bEhlYWRlckZseW91dHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2VsZWN0ZWRGbHlvdXRJbmRleDogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlV2luZG93Q2xpY2spO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlV2luZG93Q2xpY2spO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVXaW5kb3dDbGljaygpIHtcbiAgICB0aGlzLl9zZXRTZWxlY3RlZEZseW91dEluZGV4KG51bGwpO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVGbHlvdXRDb250ZW50Q2xpY2sob2JqKSB7XG4gICAgaWYgKG9iai5ldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNsb3NlLWhlYWRlci1mbHlvdXQnKSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkRmx5b3V0SW5kZXg6IG51bGwgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iai5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZUZseW91dFRhcmdldENsaWNrKG9iaikge1xuICAgIGNvbnN0IGluZGV4ID0gb2JqLmluZGV4O1xuICAgIGNvbnN0IHNob3VsZENsb3NlID0gdGhpcy5zdGF0ZS5zZWxlY3RlZEZseW91dEluZGV4ID09PSBpbmRleDtcblxuICAgIG9iai5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIHRoaXMuX3NldFNlbGVjdGVkRmx5b3V0SW5kZXgoc2hvdWxkQ2xvc2UgPyBudWxsIDogaW5kZXgpO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9zZXRTZWxlY3RlZEZseW91dEluZGV4KHNlbGVjdGVkRmx5b3V0SW5kZXgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRGbHlvdXRJbmRleCB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEhlYWRlckZseW91dHNDb250cm9sbGVkXG4gICAgICAgIGl0ZW1zPXt0aGlzLnByb3BzLml0ZW1zfVxuICAgICAgICBzZWxlY3RlZEZseW91dEluZGV4PXt0aGlzLnN0YXRlLnNlbGVjdGVkRmx5b3V0SW5kZXh9XG4gICAgICAgIG9uRmx5b3V0Q29udGVudENsaWNrPXt0aGlzLl9oYW5kbGVGbHlvdXRDb250ZW50Q2xpY2t9XG4gICAgICAgIG9uRmx5b3V0VGFyZ2V0Q2xpY2s9e3RoaXMuX2hhbmRsZUZseW91dFRhcmdldENsaWNrfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5cblR4bEhlYWRlckZseW91dHMucHJvcFR5cGVzID0ge1xuICBpdGVtczogSGVhZGVyRmx5b3V0c0NvbnRyb2xsZWQucHJvcFR5cGVzLml0ZW1zLFxufTtcbiJdfQ==