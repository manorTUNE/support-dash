'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _helpers = require('../styles/helpers');

var _TooltipContent = require('./_TooltipContent');

var _TooltipContent2 = _interopRequireDefault(_TooltipContent);

var _TetheredPopoverTarget = require('../_popover/_TetheredPopoverTarget');

var _TetheredPopoverTarget2 = _interopRequireDefault(_TetheredPopoverTarget);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var TETHER_CONFIGURATION = {
  attachment: 'bottom center',
  constraints: [{
    attachment: 'both',
    pin: true,
    to: 'window'
  }],
  offset: (0, _helpers.gridUnits)(1) + ' 0',
  optimizations: {
    moveElement: false
  },
  targetAttachment: 'top center',
  targetOffset: '0 0'
};

var TxlTooltipTargetBase = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlTooltipTargetBase, _React$Component);

  function TxlTooltipTargetBase() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlTooltipTargetBase);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlTooltipTargetBase.__proto__ || (0, _getPrototypeOf2.default)(TxlTooltipTargetBase)).call.apply(_ref, [this].concat(args)));

    _this._timeout = null;
    _this.state = { visible: false };
    _this._mounted = false;
    return _this;
  }

  (0, _createClass3.default)(TxlTooltipTargetBase, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      this._mounted = true;
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      this._mounted = false;
    }
  }, {
    key: '_showTooltip',
    value: function _showTooltip() {
      var _this2 = this;

      this._timeout = setTimeout(function () {
        if (_this2._mounted) {
          _this2.setState({ visible: true });
        }
      }, this.props.delay);
    }
  }, {
    key: '_hideTooltip',
    value: function _hideTooltip() {
      clearTimeout(this._timeout);
      this.setState({ visible: false });
    }
  }, {
    key: '_handleMouseMove',
    value: function _handleMouseMove() {
      if (this.state.visible || this._timeout) return;

      this._showTooltip();
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          children = _props.children,
          message = _props.message,
          otherProps = (0, _objectWithoutProperties3.default)(_props, ['children', 'message']);


      var mouseProps = {
        onMouseEnter: this._showTooltip,
        onMouseLeave: this._hideTooltip,
        onMouseMove: this._handleMouseMove
      };

      var tooltipContent = _react2.default.createElement(_TooltipContent2.default, { message: message });

      return _react2.default.createElement(
        _TetheredPopoverTarget2.default,
        (0, _extends3.default)({}, mouseProps, otherProps, {
          configuration: TETHER_CONFIGURATION,
          visible: this.state.visible,
          content: tooltipContent,
          popoverZIndex: this.props.popoverZIndex
        }),
        children
      );
    }
  }]);
  return TxlTooltipTargetBase;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_showTooltip', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_showTooltip'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_hideTooltip', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_hideTooltip'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleMouseMove', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleMouseMove'), _class2.prototype)), _class2)) || _class;

exports.default = TxlTooltipTargetBase;


TxlTooltipTargetBase.propTypes = {
  children: _TetheredPopoverTarget2.default.propTypes.children,
  componentName: _TetheredPopoverTarget2.default.propTypes.componentName,
  delay: _react.PropTypes.number,
  message: _TooltipContent2.default.propTypes.message,
  popoverZIndex: _TetheredPopoverTarget2.default.propTypes.popoverZIndex,
  style: _TetheredPopoverTarget2.default.propTypes.style
};

TxlTooltipTargetBase.defaultProps = {
  delay: 0
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TETHER_CONFIGURATION, 'TETHER_CONFIGURATION', 'src/_tooltips/_TooltipTargetBase.jsx');

  __REACT_HOT_LOADER__.register(TxlTooltipTargetBase, 'TxlTooltipTargetBase', 'src/_tooltips/_TooltipTargetBase.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fdG9vbHRpcHMvX1Rvb2x0aXBUYXJnZXRCYXNlLmpzeCJdLCJuYW1lcyI6WyJURVRIRVJfQ09ORklHVVJBVElPTiIsImF0dGFjaG1lbnQiLCJjb25zdHJhaW50cyIsInBpbiIsInRvIiwib2Zmc2V0Iiwib3B0aW1pemF0aW9ucyIsIm1vdmVFbGVtZW50IiwidGFyZ2V0QXR0YWNobWVudCIsInRhcmdldE9mZnNldCIsIlR4bFRvb2x0aXBUYXJnZXRCYXNlIiwiYXJncyIsIl90aW1lb3V0Iiwic3RhdGUiLCJ2aXNpYmxlIiwiX21vdW50ZWQiLCJzZXRUaW1lb3V0Iiwic2V0U3RhdGUiLCJwcm9wcyIsImRlbGF5IiwiY2xlYXJUaW1lb3V0IiwiX3Nob3dUb29sdGlwIiwiY2hpbGRyZW4iLCJtZXNzYWdlIiwib3RoZXJQcm9wcyIsIm1vdXNlUHJvcHMiLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlTGVhdmUiLCJfaGlkZVRvb2x0aXAiLCJvbk1vdXNlTW92ZSIsIl9oYW5kbGVNb3VzZU1vdmUiLCJ0b29sdGlwQ29udGVudCIsInBvcG92ZXJaSW5kZXgiLCJDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJjb21wb25lbnROYW1lIiwibnVtYmVyIiwic3R5bGUiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUVBOztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsSUFBTUEsdUJBQXVCO0FBQzNCQyxjQUFZLGVBRGU7QUFFM0JDLGVBQWEsQ0FBQztBQUNaRCxnQkFBWSxNQURBO0FBRVpFLFNBQUssSUFGTztBQUdaQyxRQUFJO0FBSFEsR0FBRCxDQUZjO0FBTzNCQyxVQUFXLHdCQUFHLENBQUgsQ0FBWCxPQVAyQjtBQVEzQkMsaUJBQWU7QUFDYkMsaUJBQWE7QUFEQSxHQVJZO0FBVzNCQyxvQkFBa0IsWUFYUztBQVkzQkMsZ0JBQWM7QUFaYSxDQUE3Qjs7SUFnQnFCQyxvQjs7O0FBQ25CLGtDQUFxQjtBQUFBOztBQUFBOztBQUFBLHNDQUFOQyxJQUFNO0FBQU5BLFVBQU07QUFBQTs7QUFBQSw2TEFDVkEsSUFEVTs7QUFHbkIsVUFBS0MsUUFBTCxHQUFnQixJQUFoQjtBQUNBLFVBQUtDLEtBQUwsR0FBYSxFQUFFQyxTQUFTLEtBQVgsRUFBYjtBQUNBLFVBQUtDLFFBQUwsR0FBZ0IsS0FBaEI7QUFMbUI7QUFNcEI7Ozs7d0NBRW1CO0FBQ2xCLFdBQUtBLFFBQUwsR0FBZ0IsSUFBaEI7QUFDRDs7OzJDQUVzQjtBQUNyQixXQUFLQSxRQUFMLEdBQWdCLEtBQWhCO0FBQ0Q7OzttQ0FHYztBQUFBOztBQUNiLFdBQUtILFFBQUwsR0FBZ0JJLFdBQVcsWUFBTTtBQUMvQixZQUFJLE9BQUtELFFBQVQsRUFBbUI7QUFDakIsaUJBQUtFLFFBQUwsQ0FBYyxFQUFFSCxTQUFTLElBQVgsRUFBZDtBQUNEO0FBQ0YsT0FKZSxFQUliLEtBQUtJLEtBQUwsQ0FBV0MsS0FKRSxDQUFoQjtBQUtEOzs7bUNBR2M7QUFDYkMsbUJBQWEsS0FBS1IsUUFBbEI7QUFDQSxXQUFLSyxRQUFMLENBQWMsRUFBRUgsU0FBUyxLQUFYLEVBQWQ7QUFDRDs7O3VDQUdrQjtBQUNqQixVQUFJLEtBQUtELEtBQUwsQ0FBV0MsT0FBWCxJQUFzQixLQUFLRixRQUEvQixFQUF5Qzs7QUFFekMsV0FBS1MsWUFBTDtBQUNEOzs7NkJBRVE7QUFBQSxtQkFLSCxLQUFLSCxLQUxGO0FBQUEsVUFFTEksUUFGSyxVQUVMQSxRQUZLO0FBQUEsVUFHTEMsT0FISyxVQUdMQSxPQUhLO0FBQUEsVUFJRkMsVUFKRTs7O0FBT1AsVUFBTUMsYUFBYTtBQUNqQkMsc0JBQWMsS0FBS0wsWUFERjtBQUVqQk0sc0JBQWMsS0FBS0MsWUFGRjtBQUdqQkMscUJBQWEsS0FBS0M7QUFIRCxPQUFuQjs7QUFNQSxVQUFNQyxpQkFBaUIsMERBQWdCLFNBQVNSLE9BQXpCLEdBQXZCOztBQUVBLGFBQ0U7QUFBQTtBQUFBLG1DQUNNRSxVQUROLEVBRU1ELFVBRk47QUFHRSx5QkFBZXhCLG9CQUhqQjtBQUlFLG1CQUFTLEtBQUthLEtBQUwsQ0FBV0MsT0FKdEI7QUFLRSxtQkFBU2lCLGNBTFg7QUFNRSx5QkFBZSxLQUFLYixLQUFMLENBQVdjO0FBTjVCO0FBUUdWO0FBUkgsT0FERjtBQVlEOzs7RUFsRStDLGdCQUFNVyxTOztrQkFBbkN2QixvQjs7O0FBcUVyQkEscUJBQXFCd0IsU0FBckIsR0FBaUM7QUFDL0JaLFlBQVUsZ0NBQXNCWSxTQUF0QixDQUFnQ1osUUFEWDtBQUUvQmEsaUJBQWUsZ0NBQXNCRCxTQUF0QixDQUFnQ0MsYUFGaEI7QUFHL0JoQixTQUFPLGlCQUFVaUIsTUFIYztBQUkvQmIsV0FBUyx5QkFBZVcsU0FBZixDQUF5QlgsT0FKSDtBQUsvQlMsaUJBQWUsZ0NBQXNCRSxTQUF0QixDQUFnQ0YsYUFMaEI7QUFNL0JLLFNBQU8sZ0NBQXNCSCxTQUF0QixDQUFnQ0c7QUFOUixDQUFqQzs7QUFTQTNCLHFCQUFxQjRCLFlBQXJCLEdBQW9DO0FBQ2xDbkIsU0FBTztBQUQyQixDQUFwQzs7Ozs7Ozs7Z0NBOUZNbkIsb0I7O2dDQWdCZVUsb0IiLCJmaWxlIjoiX1Rvb2x0aXBUYXJnZXRCYXNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSYWRpdW0gZnJvbSAncmFkaXVtJztcblxuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tICcuLi9iYXNlL0Jhc2UnO1xuaW1wb3J0IHsgZ3JpZFVuaXRzIGFzIGd1IH0gZnJvbSAnLi4vc3R5bGVzL2hlbHBlcnMnO1xuaW1wb3J0IFRvb2x0aXBDb250ZW50IGZyb20gJy4vX1Rvb2x0aXBDb250ZW50JztcbmltcG9ydCBUZXRoZXJlZFBvcG92ZXJUYXJnZXQgZnJvbSAnLi4vX3BvcG92ZXIvX1RldGhlcmVkUG9wb3ZlclRhcmdldCc7XG5cbmNvbnN0IFRFVEhFUl9DT05GSUdVUkFUSU9OID0ge1xuICBhdHRhY2htZW50OiAnYm90dG9tIGNlbnRlcicsXG4gIGNvbnN0cmFpbnRzOiBbe1xuICAgIGF0dGFjaG1lbnQ6ICdib3RoJyxcbiAgICBwaW46IHRydWUsXG4gICAgdG86ICd3aW5kb3cnLFxuICB9XSxcbiAgb2Zmc2V0OiBgJHtndSgxKX0gMGAsXG4gIG9wdGltaXphdGlvbnM6IHtcbiAgICBtb3ZlRWxlbWVudDogZmFsc2UsXG4gIH0sXG4gIHRhcmdldEF0dGFjaG1lbnQ6ICd0b3AgY2VudGVyJyxcbiAgdGFyZ2V0T2Zmc2V0OiAnMCAwJyxcbn07XG5cbkBSYWRpdW1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR4bFRvb2x0aXBUYXJnZXRCYXNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuXG4gICAgdGhpcy5fdGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5zdGF0ZSA9IHsgdmlzaWJsZTogZmFsc2UgfTtcbiAgICB0aGlzLl9tb3VudGVkID0gZmFsc2U7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLl9tb3VudGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuX21vdW50ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfc2hvd1Rvb2x0aXAoKSB7XG4gICAgdGhpcy5fdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX21vdW50ZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZpc2libGU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfSwgdGhpcy5wcm9wcy5kZWxheSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hpZGVUb29sdGlwKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICB0aGlzLnNldFN0YXRlKHsgdmlzaWJsZTogZmFsc2UgfSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZU1vdXNlTW92ZSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS52aXNpYmxlIHx8IHRoaXMuX3RpbWVvdXQpIHJldHVybjtcblxuICAgIHRoaXMuX3Nob3dUb29sdGlwKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgY2hpbGRyZW4sXG4gICAgICBtZXNzYWdlLFxuICAgICAgLi4ub3RoZXJQcm9wc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgbW91c2VQcm9wcyA9IHtcbiAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5fc2hvd1Rvb2x0aXAsXG4gICAgICBvbk1vdXNlTGVhdmU6IHRoaXMuX2hpZGVUb29sdGlwLFxuICAgICAgb25Nb3VzZU1vdmU6IHRoaXMuX2hhbmRsZU1vdXNlTW92ZSxcbiAgICB9O1xuXG4gICAgY29uc3QgdG9vbHRpcENvbnRlbnQgPSA8VG9vbHRpcENvbnRlbnQgbWVzc2FnZT17bWVzc2FnZX0gLz47XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFRldGhlcmVkUG9wb3ZlclRhcmdldFxuICAgICAgICB7Li4ubW91c2VQcm9wc31cbiAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgIGNvbmZpZ3VyYXRpb249e1RFVEhFUl9DT05GSUdVUkFUSU9OfVxuICAgICAgICB2aXNpYmxlPXt0aGlzLnN0YXRlLnZpc2libGV9XG4gICAgICAgIGNvbnRlbnQ9e3Rvb2x0aXBDb250ZW50fVxuICAgICAgICBwb3BvdmVyWkluZGV4PXt0aGlzLnByb3BzLnBvcG92ZXJaSW5kZXh9XG4gICAgICA+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvVGV0aGVyZWRQb3BvdmVyVGFyZ2V0PlxuICAgICk7XG4gIH1cbn1cblxuVHhsVG9vbHRpcFRhcmdldEJhc2UucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogVGV0aGVyZWRQb3BvdmVyVGFyZ2V0LnByb3BUeXBlcy5jaGlsZHJlbixcbiAgY29tcG9uZW50TmFtZTogVGV0aGVyZWRQb3BvdmVyVGFyZ2V0LnByb3BUeXBlcy5jb21wb25lbnROYW1lLFxuICBkZWxheTogUHJvcFR5cGVzLm51bWJlcixcbiAgbWVzc2FnZTogVG9vbHRpcENvbnRlbnQucHJvcFR5cGVzLm1lc3NhZ2UsXG4gIHBvcG92ZXJaSW5kZXg6IFRldGhlcmVkUG9wb3ZlclRhcmdldC5wcm9wVHlwZXMucG9wb3ZlclpJbmRleCxcbiAgc3R5bGU6IFRldGhlcmVkUG9wb3ZlclRhcmdldC5wcm9wVHlwZXMuc3R5bGUsXG59O1xuXG5UeGxUb29sdGlwVGFyZ2V0QmFzZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGRlbGF5OiAwLFxufTtcbiJdfQ==