'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _throttle2 = require('lodash/throttle');

var _throttle3 = _interopRequireDefault(_throttle2);

var _class, _temp;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _invariant = require('invariant');

var _invariant2 = _interopRequireDefault(_invariant);

var _reactAddonsShallowCompare = require('react-addons-shallow-compare');

var _reactAddonsShallowCompare2 = _interopRequireDefault(_reactAddonsShallowCompare);

var _ = require('./');

var _createHeaders = require('./records/createHeaders');

var _createHeaders2 = _interopRequireDefault(_createHeaders);

var _ScrollState = require('./records/ScrollState');

var _ScrollState2 = _interopRequireDefault(_ScrollState);

var _ScrollingTableContainer = require('./ScrollingTableContainer');

var _ScrollingTableContainer2 = _interopRequireDefault(_ScrollingTableContainer);

var _ScrollingTableSizing = require('./ScrollingTableSizing');

var _ScrollingTableSizing2 = _interopRequireDefault(_ScrollingTableSizing);

var _ScrollingTableHeaders = require('./ScrollingTableHeaders');

var _ScrollingTableHeaders2 = _interopRequireDefault(_ScrollingTableHeaders);

var _ScrollingTable = require('./ScrollingTable.style');

var _ScrollingTable2 = require('./ScrollingTable.css');

var _ScrollingTable3 = _interopRequireDefault(_ScrollingTable2);

var _constants = require('./constants');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var babelPluginFlowReactPropTypes_proptype_Rows = require('./').babelPluginFlowReactPropTypes_proptype_Rows || require('react').PropTypes.any;

var babelPluginFlowReactPropTypes_proptype_Headers = require('./').babelPluginFlowReactPropTypes_proptype_Headers || require('react').PropTypes.any;

var ScrollingTable = (_temp = _class = function (_Component) {
  (0, _inherits3.default)(ScrollingTable, _Component);

  function ScrollingTable(props, context) {
    (0, _classCallCheck3.default)(this, ScrollingTable);

    var _this = (0, _possibleConstructorReturn3.default)(this, (ScrollingTable.__proto__ || (0, _getPrototypeOf2.default)(ScrollingTable)).call(this, props, context));

    _this._handleHeaderUpdate = function () {
      return _this.___handleHeaderUpdate__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._onResize = function () {
      return _this.___onResize__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    _this._handleScroll = function () {
      return _this.___handleScroll__REACT_HOT_LOADER__.apply(_this, arguments);
    };

    var initialScrollState = {};

    if (props.currentRow) {
      (0, _invariant2.default)(props.currentRow <= props.totalRows, 'The currently selected row is greater then the total number of rows.');
      (0, _invariant2.default)(props.currentRow >= 0, 'The currently selected row number must be positive');
      initialScrollState.offset = props.currentRow;
    }

    if (props.totalRows != null) {
      (0, _invariant2.default)(props.totalRows >= 0, 'The total number of rows must be positive.');

      (0, _invariant2.default)(props.rows.size <= props.totalRows, 'The total number of rows must be greater than or equal to the number of rows.');
    }

    if (props.width != null && props.width !== 'auto') {
      (0, _invariant2.default)(props.width >= 0, 'Width must be greater than 0');
    }

    if (props.height != null && props.height !== 'auto') {
      (0, _invariant2.default)(props.height >= 0, 'Height must be greater than 0');
    }

    _this.state = {
      headers: (0, _createHeaders2.default)(props.headers),
      rowHeight: _constants.ROW_INITIAL_HEIGHT,
      scroll: new _ScrollState2.default(initialScrollState),
      tableBodyHeight: props.height,
      viewSizeInRows: _constants.INITIAL_ROW_MAX
    };

    _this._ticking = false;
    _this._headers = null;
    return _this;
  }

  (0, _createClass3.default)(ScrollingTable, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      if (this.props.onInit != null) {
        this.props.onInit();
      }
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      if (nextProps.currentRow != null && this.props.currentRow !== nextProps.currentRow) {
        this.setState({
          scroll: this.state.scroll.set('offset', nextProps.currentRow)
        });
      }
    }
  }, {
    key: 'shouldComponentUpdate',
    value: function shouldComponentUpdate(nextProps, nextState) {
      return (0, _reactAddonsShallowCompare2.default)(this, nextProps, nextState);
    }
  }, {
    key: '___handleHeaderUpdate__REACT_HOT_LOADER__',
    value: function ___handleHeaderUpdate__REACT_HOT_LOADER__() {
      return this.___handleHeaderUpdate__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleHeaderUpdate__REACT_HOT_LOADER__',
    value: function ___handleHeaderUpdate__REACT_HOT_LOADER__(update) {
      var onHeaderUpdate = this.props.onHeaderUpdate;


      this.setState(function (prevState) {
        var headers = update(prevState.headers);

        onHeaderUpdate && onHeaderUpdate(headers.toJS());

        return { headers: headers };
      });
    }
  }, {
    key: '___onResize__REACT_HOT_LOADER__',
    value: function ___onResize__REACT_HOT_LOADER__() {
      return this.___onResize__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___onResize__REACT_HOT_LOADER__',
    value: function ___onResize__REACT_HOT_LOADER__(rowHeight, viewSizeInRows, tableBodyHeight) {
      this.setState({
        rowHeight: rowHeight,
        tableBodyHeight: tableBodyHeight,
        viewSizeInRows: viewSizeInRows
      });
    }
  }, {
    key: '___handleScroll__REACT_HOT_LOADER__',
    value: function ___handleScroll__REACT_HOT_LOADER__() {
      return this.___handleScroll__REACT_HOT_LOADER__.apply(this, arguments);
    }
  }, {
    key: '___handleScroll__REACT_HOT_LOADER__',
    value: function ___handleScroll__REACT_HOT_LOADER__(event) {
      var _this3 = this;

      if (event.target.scrollLeft >= 0 && this._headers != null) {
        this._headers.scrollLeft = event.target.scrollLeft;
      }

      function updateOffset(target) {
        var _this2 = this;

        var scrollTop = target.scrollTop;
        this.setState(function (prevState) {
          var offset = Math.floor(scrollTop / prevState.rowHeight);
          var scroll = prevState.scroll.setOffset(offset);

          if (_this2.props.onScrollStateUpdate != null && scroll !== prevState.scroll) {
            _this2.props.onScrollStateUpdate(scroll.toJS(), _this2.state.viewSizeInRows);
          }

          return { scroll: scroll };
        });

        this._ticking = false;
      }

      if (!this._ticking) {
        (function () {
          var target = event.target;
          window.requestAnimationFrame(function () {
            (0, _throttle3.default)(updateOffset.bind(_this3), _constants.SCROLLING_REFRESH_RATE)(target);
          });
        })();
      }
      this._ticking = true;
    }
  }, {
    key: '_hasRows',
    value: function _hasRows() {
      return this.props.rows != null && this.props.rows.size !== 0;
    }
  }, {
    key: '_renderHeaders',
    value: function _renderHeaders() {
      var _this4 = this;

      return _react2.default.createElement(
        'div',
        {
          style: { overflow: 'hidden', width: '100%' },
          ref: function ref(n) {
            _this4._headers = n;
          }
        },
        _react2.default.createElement(_ScrollingTableHeaders2.default, {
          headers: this.state.headers,
          onHeaderUpdate: this._handleHeaderUpdate
        })
      );
    }
  }, {
    key: '_renderScrollingTable',
    value: function _renderScrollingTable() {
      return _react2.default.createElement(
        'div',
        {
          style: (0, _extends3.default)({}, _ScrollingTable.CONTAINER_STYLES, { height: this.state.tableBodyHeight }),
          onScroll: this._handleScroll
        },
        _react2.default.createElement(_ScrollingTableContainer2.default, {
          headers: this.state.headers,
          loading: this.props.loading,
          viewSizeInRows: this.state.viewSizeInRows,
          rowHeight: this.state.rowHeight,
          rows: this.props.rows,
          scrollState: this.state.scroll,
          totalRows: this.props.totalRows || this.props.rows.size
        })
      );
    }
  }, {
    key: '_renderScrollingTableSizing',
    value: function _renderScrollingTableSizing() {
      if (!this._hasRows()) {
        return null;
      }
      var _props = this.props,
          rows = _props.rows,
          width = _props.width,
          height = _props.height;


      return _react2.default.createElement(_ScrollingTableSizing2.default, {
        rows: rows,
        headers: this.state.headers,
        width: width === 'auto' ? '100%' : width,
        height: height === 'auto' ? '100%' : height,
        onResize: this._onResize,
        onHeaderUpdate: this._handleHeaderUpdate
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var width = this.props.width;


      return _react2.default.createElement(
        'div',
        {
          style: {
            position: 'relative',
            width: width === 'auto' ? '100%' : width
          },
          className: 'scrolling-table'
        },
        _react2.default.createElement(
          'style',
          null,
          _ScrollingTable3.default
        ),
        this._renderHeaders(),
        this._renderScrollingTable(),
        this._renderScrollingTableSizing()
      );
    }
  }]);
  return ScrollingTable;
}(_react.Component), _class.defaultProps = {
  height: 'auto',
  width: 'auto'
}, _temp);
ScrollingTable.propTypes = {
  currentRow: require('react').PropTypes.number,
  headers: require('react').PropTypes.arrayOf(require('react').PropTypes.any).isRequired,
  height: require('react').PropTypes.oneOfType([require('react').PropTypes.number, require('react').PropTypes.oneOf(['auto'])]).isRequired,
  rows: babelPluginFlowReactPropTypes_proptype_Rows,
  loading: require('react').PropTypes.bool.isRequired,
  totalRows: require('react').PropTypes.number,
  width: require('react').PropTypes.oneOfType([require('react').PropTypes.number, require('react').PropTypes.oneOf(['auto'])]).isRequired,
  onScrollStateUpdate: require('react').PropTypes.func,
  onHeaderUpdate: require('react').PropTypes.func,
  onInit: require('react').PropTypes.func
};
exports.default = ScrollingTable;
;

var _temp2 = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(ScrollingTable, 'ScrollingTable', 'src/scrolling-table/ScrollingTable.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY3JvbGxpbmctdGFibGUvU2Nyb2xsaW5nVGFibGUuanN4Il0sIm5hbWVzIjpbIlNjcm9sbGluZ1RhYmxlIiwicHJvcHMiLCJjb250ZXh0IiwiX2hhbmRsZUhlYWRlclVwZGF0ZSIsIl9vblJlc2l6ZSIsIl9oYW5kbGVTY3JvbGwiLCJpbml0aWFsU2Nyb2xsU3RhdGUiLCJjdXJyZW50Um93IiwidG90YWxSb3dzIiwib2Zmc2V0Iiwicm93cyIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsInN0YXRlIiwiaGVhZGVycyIsInJvd0hlaWdodCIsInNjcm9sbCIsInRhYmxlQm9keUhlaWdodCIsInZpZXdTaXplSW5Sb3dzIiwiX3RpY2tpbmciLCJfaGVhZGVycyIsIm9uSW5pdCIsIm5leHRQcm9wcyIsInNldFN0YXRlIiwic2V0IiwibmV4dFN0YXRlIiwidXBkYXRlIiwib25IZWFkZXJVcGRhdGUiLCJwcmV2U3RhdGUiLCJ0b0pTIiwiZXZlbnQiLCJ0YXJnZXQiLCJzY3JvbGxMZWZ0IiwidXBkYXRlT2Zmc2V0Iiwic2Nyb2xsVG9wIiwiTWF0aCIsImZsb29yIiwic2V0T2Zmc2V0Iiwib25TY3JvbGxTdGF0ZVVwZGF0ZSIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJvdmVyZmxvdyIsIm4iLCJsb2FkaW5nIiwiX2hhc1Jvd3MiLCJwb3NpdGlvbiIsIl9yZW5kZXJIZWFkZXJzIiwiX3JlbmRlclNjcm9sbGluZ1RhYmxlIiwiX3JlbmRlclNjcm9sbGluZ1RhYmxlU2l6aW5nIiwiZGVmYXVsdFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7Ozs7QUFFQTs7OztBQUNBOzs7O0FBRUE7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOztBQUdBOzs7O0FBQ0E7Ozs7Ozs7O0lBc0RxQkEsYzs7O0FBV25CLDBCQUFZQyxLQUFaLEVB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QUFtQixNQUFuQixHQUE0QkEsS0FIckM7QUFJRSxnQkFBUUMsV0FBVyxNQUFYLEdBQW9CLE1BQXBCLEdBQTZCQSxNQUp2QztBQUtFLGtCQUFVLEtBQUtULFNBTGpCO0FBTUUsd0JBQWdCLEtBQUtEO0FBTnZCLFFBREY7QUFVRDs7OzZCQUU0QjtBQUFBLFVBQ25CUyxLQURtQixHQUNULEtBQUtYLEtBREksQ0FDbkJXLEtBRG1COzs7QUFHM0IsYUFDRTtBQUFBO0FBQUE7QUFDRSxpQkFBTztBQUNMbUMsc0JBQVUsVUFETDtBQUVMbkMsbUJBQU9BLFVBQVUsTUFBVixHQUFtQixNQUFuQixHQUE0QkE7QUFGOUIsV0FEVDtBQUtFLHFCQUFVO0FBTFo7QUFPRTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBUEY7QUFVRyxhQUFLb0MsY0FBTCxFQVZIO0FBV0csYUFBS0MscUJBQUwsRUFYSDtBQVlHLGFBQUtDLDJCQUFMO0FBWkgsT0FERjtBQWdCRDs7OzRCQTFNTUMsWSxHQUFlO0FBQ3BCdEMsVUFBUSxNQURZO0FBRXBCRCxTQUFPO0FBRmEsQzs7Ozs7Ozs7Ozs7OztrQkFKSFosYzs7Ozs7Ozs7Z0NBQUFBLGMiLCJmaWxlIjoiU2Nyb2xsaW5nVGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0IHNoYWxsb3dDb21wYXJlIGZyb20gJ3JlYWN0LWFkZG9ucy1zaGFsbG93LWNvbXBhcmUnO1xuXG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICcuLyc7XG5pbXBvcnQgY3JlYXRlSGVhZGVycyBmcm9tICcuL3JlY29yZHMvY3JlYXRlSGVhZGVycyc7XG5pbXBvcnQgU2Nyb2xsU3RhdGUgZnJvbSAnLi9yZWNvcmRzL1Njcm9sbFN0YXRlJztcbmltcG9ydCBTY3JvbGxpbmdUYWJsZUNvbnRhaW5lciBmcm9tICcuL1Njcm9sbGluZ1RhYmxlQ29udGFpbmVyJztcbmltcG9ydCBUYWJsZVNpemluZyBmcm9tICcuL1Njcm9sbGluZ1RhYmxlU2l6aW5nJztcbmltcG9ydCBUYWJsZUhlYWRlcnMgZnJvbSAnLi9TY3JvbGxpbmdUYWJsZUhlYWRlcnMnO1xuaW1wb3J0IHtcbiAgQ09OVEFJTkVSX1NUWUxFUyxcbn0gZnJvbSAnLi9TY3JvbGxpbmdUYWJsZS5zdHlsZSc7XG5pbXBvcnQgUkFXX0NTUyBmcm9tICcuL1Njcm9sbGluZ1RhYmxlLmNzcyc7XG5pbXBvcnQge1xuICBJTklUSUFMX1JPV19NQVgsXG4gIFJPV19JTklUSUFMX0hFSUdIVCxcbiAgU0NST0xMSU5HX1JFRlJFU0hfUkFURSxcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHR5cGUge1xuICBIZWFkZXJzLFxuICBSb3dzLFxufSBmcm9tICcuLyc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIC8qKlxuICAgKiBPcHRpb25hbCB0aGUgY3VycmVudCByb3cgdG8gc3RhcnQgYXQuXG4gICAqL1xuICBjdXJyZW50Um93PzogbnVtYmVyLFxuICBoZWFkZXJzOiBBcnJheTxIZWFkZXI+LFxuICAvKipcbiAgICogaGVpZ2h0IGluIHBpeGVsc1xuICAgKi9cbiAgaGVpZ2h0OiBudW1iZXIgfCAnYXV0bycsXG4gIC8qKlxuICAgKiByb3dzIHJlcHJlc2VudHMgdGhlIGN1cnJlbnRseSBsb2FkZWQgcm93cyBpbiBhIHNwYXJzZSBtYXBcbiAgICogd2l0aCBNYXA8cm93TnVtYmVyLCByb3cgZGF0YT5cbiAgICovXG4gIHJvd3M6IFJvd3MsXG4gIC8qKlxuICAgKiBTaG93IGEgbG9hZGluZyBpbmRpY2F0b3JcbiAgICovXG4gIGxvYWRpbmc6IGJvb2xlYW4sXG4gIC8qKlxuICAgKiB0b3RhbFJvd3MgaXMgdGhlIHRvdGFsIG51bWJlciBvZiByb3dzIHRoYXQgaXMgZXhwZWN0ZWQuXG4gICAqL1xuICB0b3RhbFJvd3M/OiBudW1iZXIsXG4gIC8qKlxuICAgKiB3aWR0aCBpbiBwaXhlbHNcbiAgICovXG4gIHdpZHRoOiBudW1iZXIgfCAnYXV0bycsXG4gIC8vIEZ1bmN0aW9ucyBmb3IgdXBkYXRpbmdcbiAgb25TY3JvbGxTdGF0ZVVwZGF0ZT86IChcbiAgICBzY3JvbGxTdGF0ZTogeyBkaXJlY3Rpb246ICd1cCcgfCAnZG93bicsIG9mZnNldDogbnVtYmVyIH0sXG4gICAgdmlld1NpemVJblJvd3M6IG51bWJlclxuICApID0+IHZvaWQsXG4gIG9uSGVhZGVyVXBkYXRlPzogKGhlYWRlcnM6IEFycmF5PEhlYWRlcj4pID0+IHZvaWQsXG4gIG9uSW5pdD86ICgpID0+IHZvaWQsXG59O1xuXG50eXBlIFN0YXRlID0ge1xuICBoZWFkZXJzOiBIZWFkZXJzLFxuICByb3dIZWlnaHQ6IG51bWJlcixcbiAgc2Nyb2xsOiBTY3JvbGxTdGF0ZSxcbiAgdGFibGVCb2R5SGVpZ2h0OiBudW1iZXIsXG4gIHZpZXdTaXplSW5Sb3dzOiBudW1iZXIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY3JvbGxpbmdUYWJsZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByb3BzOiBQcm9wcztcbiAgc3RhdGU6IFN0YXRlO1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgd2lkdGg6ICdhdXRvJyxcbiAgfTtcblxuICBfdGlja2luZzogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMsIGNvbnRleHQ6IE9iamVjdCkge1xuICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcblxuICAgIGNvbnN0IGluaXRpYWxTY3JvbGxTdGF0ZSA9IHt9O1xuXG4gICAgaWYgKHByb3BzLmN1cnJlbnRSb3cpIHtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgcHJvcHMuY3VycmVudFJvdyA8PSBwcm9wcy50b3RhbFJvd3MsXG4gICAgICAgICdUaGUgY3VycmVudGx5IHNlbGVjdGVkIHJvdyBpcyBncmVhdGVyIHRoZW4gdGhlIHRvdGFsIG51bWJlciBvZiByb3dzLidcbiAgICAgICk7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIHByb3BzLmN1cnJlbnRSb3cgPj0gMCxcbiAgICAgICAgJ1RoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcm93IG51bWJlciBtdXN0IGJlIHBvc2l0aXZlJ1xuICAgICAgKTtcbiAgICAgIGluaXRpYWxTY3JvbGxTdGF0ZS5vZmZzZXQgPSBwcm9wcy5jdXJyZW50Um93O1xuICAgIH1cblxuICAgIGlmIChwcm9wcy50b3RhbFJvd3MgIT0gbnVsbCkge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICBwcm9wcy50b3RhbFJvd3MgPj0gMCxcbiAgICAgICAgJ1RoZSB0b3RhbCBudW1iZXIgb2Ygcm93cyBtdXN0IGJlIHBvc2l0aXZlLidcbiAgICAgICk7XG5cbiAgICAgIGludmFyaWFudChcbiAgICAgICAgcHJvcHMucm93cy5zaXplIDw9IHByb3BzLnRvdGFsUm93cyxcbiAgICAgICAgJ1RoZSB0b3RhbCBudW1iZXIgb2Ygcm93cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIHJvd3MuJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcHMud2lkdGggIT0gbnVsbCAmJiBwcm9wcy53aWR0aCAhPT0gJ2F1dG8nKSB7XG4gICAgICBpbnZhcmlhbnQocHJvcHMud2lkdGggPj0gMCwgJ1dpZHRoIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcHMuaGVpZ2h0ICE9IG51bGwgJiYgcHJvcHMuaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgIGludmFyaWFudChwcm9wcy5oZWlnaHQgPj0gMCwgJ0hlaWdodCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGhlYWRlcnM6IGNyZWF0ZUhlYWRlcnMocHJvcHMuaGVhZGVycyksXG4gICAgICByb3dIZWlnaHQ6IFJPV19JTklUSUFMX0hFSUdIVCxcbiAgICAgIHNjcm9sbDogbmV3IFNjcm9sbFN0YXRlKGluaXRpYWxTY3JvbGxTdGF0ZSksXG4gICAgICB0YWJsZUJvZHlIZWlnaHQ6IHByb3BzLmhlaWdodCxcbiAgICAgIHZpZXdTaXplSW5Sb3dzOiBJTklUSUFMX1JPV19NQVgsXG4gICAgfTtcblxuICAgIHRoaXMuX3RpY2tpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9oZWFkZXJzID0gbnVsbDtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLm9uSW5pdCAhPSBudWxsKSB7XG4gICAgICB0aGlzLnByb3BzLm9uSW5pdCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xuICAgIGlmIChuZXh0UHJvcHMuY3VycmVudFJvdyAhPSBudWxsICYmIHRoaXMucHJvcHMuY3VycmVudFJvdyAhPT0gbmV4dFByb3BzLmN1cnJlbnRSb3cpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzY3JvbGw6IHRoaXMuc3RhdGUuc2Nyb2xsLnNldCgnb2Zmc2V0JywgbmV4dFByb3BzLmN1cnJlbnRSb3cpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wczogUHJvcHMsIG5leHRTdGF0ZTogU3RhdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc2hhbGxvd0NvbXBhcmUodGhpcywgbmV4dFByb3BzLCBuZXh0U3RhdGUpO1xuICB9XG5cbiAgX2hhbmRsZUhlYWRlclVwZGF0ZSA9ICh1cGRhdGU6IChoZWFkZXJzOiBIZWFkZXJzKSA9PiBIZWFkZXJzKSA9PiB7XG4gICAgY29uc3QgeyBvbkhlYWRlclVwZGF0ZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZTogU3RhdGUpID0+IHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB1cGRhdGUocHJldlN0YXRlLmhlYWRlcnMpO1xuXG4gICAgICBvbkhlYWRlclVwZGF0ZSAmJiBvbkhlYWRlclVwZGF0ZShoZWFkZXJzLnRvSlMoKSk7XG5cbiAgICAgIHJldHVybiB7IGhlYWRlcnMgfTtcbiAgICB9KTtcbiAgfTtcblxuICBfb25SZXNpemUgPSAoXG4gICAgcm93SGVpZ2h0OiBudW1iZXIsXG4gICAgdmlld1NpemVJblJvd3M6IG51bWJlcixcbiAgICB0YWJsZUJvZHlIZWlnaHQ6IG51bWJlclxuICApID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHJvd0hlaWdodCxcbiAgICAgIHRhYmxlQm9keUhlaWdodCxcbiAgICAgIHZpZXdTaXplSW5Sb3dzLFxuICAgIH0pO1xuICB9O1xuXG4gIF9oYW5kbGVTY3JvbGwgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuc2Nyb2xsTGVmdCA+PSAwICYmIHRoaXMuX2hlYWRlcnMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5faGVhZGVycy5zY3JvbGxMZWZ0ID0gZXZlbnQudGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlT2Zmc2V0KHRhcmdldDogSFRNTEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IHRhcmdldC5zY3JvbGxUb3A7XG4gICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGU6IFN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGguZmxvb3Ioc2Nyb2xsVG9wIC8gcHJldlN0YXRlLnJvd0hlaWdodCk7XG4gICAgICAgIGNvbnN0IHNjcm9sbCA9IHByZXZTdGF0ZS5zY3JvbGwuc2V0T2Zmc2V0KG9mZnNldCk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25TY3JvbGxTdGF0ZVVwZGF0ZSAhPSBudWxsICYmIHNjcm9sbCAhPT0gcHJldlN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25TY3JvbGxTdGF0ZVVwZGF0ZShzY3JvbGwudG9KUygpLCB0aGlzLnN0YXRlLnZpZXdTaXplSW5Sb3dzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHNjcm9sbCB9O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3RpY2tpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3RpY2tpbmcpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB0aHJvdHRsZSh1cGRhdGVPZmZzZXQuYmluZCh0aGlzKSwgU0NST0xMSU5HX1JFRlJFU0hfUkFURSkodGFyZ2V0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLl90aWNraW5nID0gdHJ1ZTtcbiAgfTtcblxuICBfaGFzUm93cygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5yb3dzICE9IG51bGwgJiYgdGhpcy5wcm9wcy5yb3dzLnNpemUgIT09IDA7XG4gIH1cblxuICBfcmVuZGVySGVhZGVycygpOiA/UmVhY3QuRWxlbWVudDxhbnk+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT17eyBvdmVyZmxvdzogJ2hpZGRlbicsIHdpZHRoOiAnMTAwJScgfX1cbiAgICAgICAgcmVmPXsobjogSFRNTEVsZW1lbnQpID0+IHsgdGhpcy5faGVhZGVycyA9IG47IH19XG4gICAgICA+XG4gICAgICAgIDxUYWJsZUhlYWRlcnNcbiAgICAgICAgICBoZWFkZXJzPXt0aGlzLnN0YXRlLmhlYWRlcnN9XG4gICAgICAgICAgb25IZWFkZXJVcGRhdGU9e3RoaXMuX2hhbmRsZUhlYWRlclVwZGF0ZX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBfcmVuZGVyU2Nyb2xsaW5nVGFibGUoKTogP1JlYWN0LkVsZW1lbnQ8YW55PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9e3sgLi4uQ09OVEFJTkVSX1NUWUxFUywgaGVpZ2h0OiB0aGlzLnN0YXRlLnRhYmxlQm9keUhlaWdodCB9fVxuICAgICAgICBvblNjcm9sbD17dGhpcy5faGFuZGxlU2Nyb2xsfVxuICAgICAgPlxuICAgICAgICA8U2Nyb2xsaW5nVGFibGVDb250YWluZXJcbiAgICAgICAgICBoZWFkZXJzPXt0aGlzLnN0YXRlLmhlYWRlcnN9XG4gICAgICAgICAgbG9hZGluZz17dGhpcy5wcm9wcy5sb2FkaW5nfVxuICAgICAgICAgIHZpZXdTaXplSW5Sb3dzPXt0aGlzLnN0YXRlLnZpZXdTaXplSW5Sb3dzfVxuICAgICAgICAgIHJvd0hlaWdodD17dGhpcy5zdGF0ZS5yb3dIZWlnaHR9XG4gICAgICAgICAgcm93cz17dGhpcy5wcm9wcy5yb3dzfVxuICAgICAgICAgIHNjcm9sbFN0YXRlPXt0aGlzLnN0YXRlLnNjcm9sbH1cbiAgICAgICAgICB0b3RhbFJvd3M9e3RoaXMucHJvcHMudG90YWxSb3dzIHx8IHRoaXMucHJvcHMucm93cy5zaXplfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIF9yZW5kZXJTY3JvbGxpbmdUYWJsZVNpemluZygpOiA/UmVhY3QuRWxlbWVudDxhbnk+IHtcbiAgICBpZiAoIXRoaXMuX2hhc1Jvd3MoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgcm93cywgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8VGFibGVTaXppbmdcbiAgICAgICAgcm93cz17cm93c31cbiAgICAgICAgaGVhZGVycz17dGhpcy5zdGF0ZS5oZWFkZXJzfVxuICAgICAgICB3aWR0aD17d2lkdGggPT09ICdhdXRvJyA/ICcxMDAlJyA6IHdpZHRofVxuICAgICAgICBoZWlnaHQ9e2hlaWdodCA9PT0gJ2F1dG8nID8gJzEwMCUnIDogaGVpZ2h0fVxuICAgICAgICBvblJlc2l6ZT17dGhpcy5fb25SZXNpemV9XG4gICAgICAgIG9uSGVhZGVyVXBkYXRlPXt0aGlzLl9oYW5kbGVIZWFkZXJVcGRhdGV9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKTogUmVhY3QuRWxlbWVudDxhbnk+IHtcbiAgICBjb25zdCB7IHdpZHRoIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICB3aWR0aDogd2lkdGggPT09ICdhdXRvJyA/ICcxMDAlJyA6IHdpZHRoLFxuICAgICAgICB9fVxuICAgICAgICBjbGFzc05hbWU9XCJzY3JvbGxpbmctdGFibGVcIlxuICAgICAgPlxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAge1JBV19DU1N9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICAgIHt0aGlzLl9yZW5kZXJIZWFkZXJzKCl9XG4gICAgICAgIHt0aGlzLl9yZW5kZXJTY3JvbGxpbmdUYWJsZSgpfVxuICAgICAgICB7dGhpcy5fcmVuZGVyU2Nyb2xsaW5nVGFibGVTaXppbmcoKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cbiJdfQ==