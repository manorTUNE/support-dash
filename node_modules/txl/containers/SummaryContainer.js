'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _debounce = require('lodash/debounce');

var _debounce2 = _interopRequireDefault(_debounce);

var _Base = require('../base/Base');

var _ReactUtils = require('../ReactUtils');

var _helpers = require('../styles/helpers');

var _LoadingIndicator = require('../progress-indicators/LoadingIndicator');

var _LoadingIndicator2 = _interopRequireDefault(_LoadingIndicator);

var _SummaryContainer = require('./SummaryContainer.style');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var DEFAULT_TITLE = 'Totals';
var DEFAULT_MAX_VISIBLE = 6;
// assumedWidth - gutters / default max visible at assumed width (900 - 150) / 6
var MIN_ITEM_WIDTH = 125;

var TxlSummaryContainer = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlSummaryContainer, _React$Component);

  function TxlSummaryContainer() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlSummaryContainer);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlSummaryContainer.__proto__ || (0, _getPrototypeOf2.default)(TxlSummaryContainer)).call.apply(_ref, [this].concat(args)));

    _this._minItemWidth = MIN_ITEM_WIDTH + _SummaryContainer.ITEM_GUTTER_RAW;
    _this._itemsWrap = null;
    _this._debouncedResize = (0, _debounce2.default)(_this._resizeHandler, 200);

    _this.state = { maxVisibleItems: DEFAULT_MAX_VISIBLE };
    return _this;
  }

  (0, _createClass3.default)(TxlSummaryContainer, [{
    key: '_resizeHandler',
    value: function _resizeHandler() {
      this.setState({
        maxVisibleItems: Math.floor(this._itemsWrap.offsetWidth / this._minItemWidth)
      });
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      this._itemsWrap = (0, _ReactUtils.findDOMNode)(this.refs['items-wrap']);
      window.addEventListener('resize', this._debouncedResize);
      this._resizeHandler();
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      window.removeEventListener('resize', this._debouncedResize);
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var visibleItems = this.state.maxVisibleItems;

      var ITEM_STYLE = (0, _extends3.default)({}, _SummaryContainer.ITEM_CONTAINER, {
        minWidth: 'calc((100% - (' + (visibleItems - 1) + ' * ' + _SummaryContainer.ITEM_GUTTER + ')) / ' + visibleItems + ')'
      });

      var ITEM_STYLE_LAST = (0, _extends3.default)({}, _SummaryContainer.ITEM_CONTAINER_LAST, {
        minWidth: 'calc((100% - (' + (visibleItems - 1) + ' * ' + _SummaryContainer.ITEM_GUTTER + ') + (' + visibleItems + '\n        * ' + _SummaryContainer.CONTAINER_PADDING + ')) / ' + visibleItems + ')'
      });

      return _react2.default.createElement(
        'div',
        {
          id: this.props.id,
          'data-component': 'TxlSummaryContainer',
          style: _SummaryContainer.CONTAINER_STYLES
        },
        _react2.default.createElement(
          'div',
          {
            'data-test-main-title': true,
            style: _SummaryContainer.MAIN_HEADING
          },
          this.props.title
        ),
        _react2.default.createElement(
          'div',
          {
            style: _SummaryContainer.ITEMS_WRAPPER,
            ref: 'items-wrap'
          },
          this.props.loading ? _react2.default.createElement(
            'div',
            { style: _SummaryContainer.LOADING_WRAPPER },
            _react2.default.createElement(_LoadingIndicator2.default, { size: 'medium' })
          ) : this.props.items.map(function (item, index) {
            var CURRENT_ITEM_STYLE = (0, _helpers.combineStyles)(ITEM_STYLE, index === _this2.props.items.length - 1 && ITEM_STYLE_LAST);

            return _react2.default.createElement(
              'div',
              {
                'data-test-item': '' + (index + 1),
                key: index,
                style: CURRENT_ITEM_STYLE
              },
              _react2.default.createElement(
                'div',
                {
                  'data-test-item-heading': true,
                  style: _SummaryContainer.HEADING_STYLE
                },
                item.label
              ),
              _react2.default.createElement(
                'div',
                {
                  'data-test-item-value': true,
                  style: _SummaryContainer.VALUE_STYLE
                },
                item.value
              )
            );
          })
        )
      );
    }
  }]);
  return TxlSummaryContainer;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_resizeHandler', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_resizeHandler'), _class2.prototype)), _class2)) || _class;

exports.default = TxlSummaryContainer;


TxlSummaryContainer.propTypes = {
  id: _react.PropTypes.string,
  items: _react.PropTypes.arrayOf(_react.PropTypes.shape({
    label: _react.PropTypes.node,
    value: _react.PropTypes.node
  })),
  loading: _react.PropTypes.bool,
  title: _react.PropTypes.node
};

TxlSummaryContainer.defaultProps = {
  loading: false,
  title: DEFAULT_TITLE
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(DEFAULT_TITLE, 'DEFAULT_TITLE', 'src/containers/SummaryContainer.jsx');

  __REACT_HOT_LOADER__.register(DEFAULT_MAX_VISIBLE, 'DEFAULT_MAX_VISIBLE', 'src/containers/SummaryContainer.jsx');

  __REACT_HOT_LOADER__.register(MIN_ITEM_WIDTH, 'MIN_ITEM_WIDTH', 'src/containers/SummaryContainer.jsx');

  __REACT_HOT_LOADER__.register(TxlSummaryContainer, 'TxlSummaryContainer', 'src/containers/SummaryContainer.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250YWluZXJzL1N1bW1hcnlDb250YWluZXIuanN4Il0sIm5hbWVzIjpbIkRFRkFVTFRfVElUTEUiLCJERUZBVUxUX01BWF9WSVNJQkxFIiwiTUlOX0lURU1fV0lEVEgiLCJUeGxTdW1tYXJ5Q29udGFpbmVyIiwiYXJncyIsIl9taW5JdGVtV2lkdGgiLCJfaXRlbXNXcmFwIiwiX2RlYm91bmNlZFJlc2l6ZSIsIl9yZXNpemVIYW5kbGVyIiwic3RhdGUiLCJtYXhWaXNpYmxlSXRlbXMiLCJzZXRTdGF0ZSIsIk1hdGgiLCJmbG9vciIsIm9mZnNldFdpZHRoIiwicmVmcyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidmlzaWJsZUl0ZW1zIiwiSVRFTV9TVFlMRSIsIm1pbldpZHRoIiwiSVRFTV9TVFlMRV9MQVNUIiwicHJvcHMiLCJpZCIsInRpdGxlIiwibG9hZGluZyIsIml0ZW1zIiwibWFwIiwiaXRlbSIsImluZGV4IiwiQ1VSUkVOVF9JVEVNX1NUWUxFIiwibGVuZ3RoIiwibGFiZWwiLCJ2YWx1ZSIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsInN0cmluZyIsImFycmF5T2YiLCJzaGFwZSIsIm5vZGUiLCJib29sIiwiZGVmYXVsdFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBR0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBY0EsSUFBTUEsZ0JBQWdCLFFBQXRCO0FBQ0EsSUFBTUMsc0JBQXNCLENBQTVCO0FBQ0E7QUFDQSxJQUFNQyxpQkFBaUIsR0FBdkI7O0lBR3FCQyxtQjs7O0FBQ25CLGlDQUFxQjtBQUFBOztBQUFBOztBQUFBLHNDQUFOQyxJQUFNO0FBQU5BLFVBQU07QUFBQTs7QUFBQSwyTEFDVkEsSUFEVTs7QUFF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LCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJhZGl1bSBmcm9tICdyYWRpdW0nO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC9kZWJvdW5jZSc7XG5cbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCB7IGZpbmRET01Ob2RlIH0gZnJvbSAnLi4vUmVhY3RVdGlscyc7XG5pbXBvcnQge1xuICBjb21iaW5lU3R5bGVzLFxufSBmcm9tICcuLi9zdHlsZXMvaGVscGVycyc7XG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tICcuLi9wcm9ncmVzcy1pbmRpY2F0b3JzL0xvYWRpbmdJbmRpY2F0b3InO1xuaW1wb3J0IHtcbiAgQ09OVEFJTkVSX1BBRERJTkcsXG4gIENPTlRBSU5FUl9TVFlMRVMsXG4gIEhFQURJTkdfU1RZTEUsXG4gIElURU1fQ09OVEFJTkVSLFxuICBJVEVNX0NPTlRBSU5FUl9MQVNULFxuICBJVEVNX0dVVFRFUixcbiAgSVRFTV9HVVRURVJfUkFXLFxuICBJVEVNU19XUkFQUEVSLFxuICBMT0FESU5HX1dSQVBQRVIsXG4gIE1BSU5fSEVBRElORyxcbiAgVkFMVUVfU1RZTEUsXG59IGZyb20gJy4vU3VtbWFyeUNvbnRhaW5lci5zdHlsZSc7XG5cbmNvbnN0IERFRkFVTFRfVElUTEUgPSAnVG90YWxzJztcbmNvbnN0IERFRkFVTFRfTUFYX1ZJU0lCTEUgPSA2O1xuLy8gYXNzdW1lZFdpZHRoIC0gZ3V0dGVycyAvIGRlZmF1bHQgbWF4IHZpc2libGUgYXQgYXNzdW1lZCB3aWR0aCAoOTAwIC0gMTUwKSAvIDZcbmNvbnN0IE1JTl9JVEVNX1dJRFRIID0gMTI1O1xuXG5AUmFkaXVtXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUeGxTdW1tYXJ5Q29udGFpbmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgIHRoaXMuX21pbkl0ZW1XaWR0aCA9IE1JTl9JVEVNX1dJRFRIICsgSVRFTV9HVVRURVJfUkFXO1xuICAgIHRoaXMuX2l0ZW1zV3JhcCA9IG51bGw7XG4gICAgdGhpcy5fZGVib3VuY2VkUmVzaXplID0gZGVib3VuY2UodGhpcy5fcmVzaXplSGFuZGxlciwgMjAwKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7IG1heFZpc2libGVJdGVtczogREVGQVVMVF9NQVhfVklTSUJMRSB9O1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9yZXNpemVIYW5kbGVyKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgbWF4VmlzaWJsZUl0ZW1zOiBNYXRoLmZsb29yKHRoaXMuX2l0ZW1zV3JhcC5vZmZzZXRXaWR0aCAvIHRoaXMuX21pbkl0ZW1XaWR0aCksXG4gICAgfSk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLl9pdGVtc1dyYXAgPSBmaW5kRE9NTm9kZSh0aGlzLnJlZnNbJ2l0ZW1zLXdyYXAnXSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2RlYm91bmNlZFJlc2l6ZSk7XG4gICAgdGhpcy5fcmVzaXplSGFuZGxlcigpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2RlYm91bmNlZFJlc2l6ZSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgdmlzaWJsZUl0ZW1zID0gdGhpcy5zdGF0ZS5tYXhWaXNpYmxlSXRlbXM7XG5cbiAgICBjb25zdCBJVEVNX1NUWUxFID0ge1xuICAgICAgLi4uSVRFTV9DT05UQUlORVIsXG4gICAgICBtaW5XaWR0aDogYGNhbGMoKDEwMCUgLSAoJHt2aXNpYmxlSXRlbXMgLSAxfSAqICR7SVRFTV9HVVRURVJ9KSkgLyAke3Zpc2libGVJdGVtc30pYCxcbiAgICB9O1xuXG4gICAgY29uc3QgSVRFTV9TVFlMRV9MQVNUID0ge1xuICAgICAgLi4uSVRFTV9DT05UQUlORVJfTEFTVCxcbiAgICAgIG1pbldpZHRoOiBgY2FsYygoMTAwJSAtICgke3Zpc2libGVJdGVtcyAtIDF9ICogJHtJVEVNX0dVVFRFUn0pICsgKCR7dmlzaWJsZUl0ZW1zfVxuICAgICAgICAqICR7Q09OVEFJTkVSX1BBRERJTkd9KSkgLyAke3Zpc2libGVJdGVtc30pYCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgaWQ9e3RoaXMucHJvcHMuaWR9XG4gICAgICAgIGRhdGEtY29tcG9uZW50PVwiVHhsU3VtbWFyeUNvbnRhaW5lclwiXG4gICAgICAgIHN0eWxlPXtDT05UQUlORVJfU1RZTEVTfVxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgZGF0YS10ZXN0LW1haW4tdGl0bGVcbiAgICAgICAgICBzdHlsZT17TUFJTl9IRUFESU5HfVxuICAgICAgICA+XG4gICAgICAgICAge3RoaXMucHJvcHMudGl0bGV9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9e0lURU1TX1dSQVBQRVJ9XG4gICAgICAgICAgcmVmPVwiaXRlbXMtd3JhcFwiXG4gICAgICAgID5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5sb2FkaW5nID9cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e0xPQURJTkdfV1JBUFBFUn0+XG4gICAgICAgICAgICAgIDxMb2FkaW5nSW5kaWNhdG9yIHNpemU9XCJtZWRpdW1cIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgOlxuICAgICAgICAgICAgdGhpcy5wcm9wcy5pdGVtcy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IENVUlJFTlRfSVRFTV9TVFlMRSA9IGNvbWJpbmVTdHlsZXMoXG4gICAgICAgICAgICAgICAgSVRFTV9TVFlMRSxcbiAgICAgICAgICAgICAgICBpbmRleCA9PT0gdGhpcy5wcm9wcy5pdGVtcy5sZW5ndGggLSAxICYmIElURU1fU1RZTEVfTEFTVFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWl0ZW09e2Ake2luZGV4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXtDVVJSRU5UX0lURU1fU1RZTEV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaXRlbS1oZWFkaW5nXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXtIRUFESU5HX1NUWUxFfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7aXRlbS5sYWJlbH1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaXRlbS12YWx1ZVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17VkFMVUVfU1RZTEV9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpdGVtLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cblR4bFN1bW1hcnlDb250YWluZXIucHJvcFR5cGVzID0ge1xuICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgaXRlbXM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zaGFwZSh7XG4gICAgbGFiZWw6IFByb3BUeXBlcy5ub2RlLFxuICAgIHZhbHVlOiBQcm9wVHlwZXMubm9kZSxcbiAgfSkpLFxuICBsb2FkaW5nOiBQcm9wVHlwZXMuYm9vbCxcbiAgdGl0bGU6IFByb3BUeXBlcy5ub2RlLFxufTtcblxuVHhsU3VtbWFyeUNvbnRhaW5lci5kZWZhdWx0UHJvcHMgPSB7XG4gIGxvYWRpbmc6IGZhbHNlLFxuICB0aXRsZTogREVGQVVMVF9USVRMRSxcbn07XG4iXX0=