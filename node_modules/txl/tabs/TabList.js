'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _Base = require('../base/Base');

var _helpers = require('../styles/helpers');

var _type = require('../styles/mixins/type');

var _list = require('../styles/mixins/list');

var _theme = require('../styles/theme');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var LIST_ITEM_HEIGHT = (0, _helpers.gridUnits)(7);

var CONTAINER_STYLES = (0, _extends3.default)({}, _type.DEFAULT_FONT_FAMILY, {
  borderBottom: '1px solid ' + _theme.COLOR_NEUTRAL['100'],
  display: 'block',
  width: '100%'
});

var LIST_STYLES = (0, _extends3.default)({}, _list.UNSTYLED_LIST, {
  alignItems: 'flex-start',
  display: 'flex'
});

var ITEM_STYLES = {
  flex: '0 0 auto'
};

var LINK_BASE_STYLES = (0, _extends3.default)({}, _type.HEADING_SMALL, {
  color: _theme.COLOR_NEUTRAL['200'],
  display: 'block',
  height: LIST_ITEM_HEIGHT,
  paddingLeft: (0, _helpers.gridUnits)(4),
  paddingRight: (0, _helpers.gridUnits)(4),
  position: 'relative',
  textDecoration: 'none',
  width: 'auto'
});

var BORDER_BASE_STYLES = {
  backgroundColor: 'transparent',
  bottom: '50%',
  display: 'block',
  height: 2,
  left: 0,
  position: 'absolute',
  right: 0
};

var TxlTabList = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlTabList, _React$Component);

  function TxlTabList() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlTabList);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlTabList.__proto__ || (0, _getPrototypeOf2.default)(TxlTabList)).call.apply(_ref, [this].concat(args)));

    _this.state = { hoverIndex: null };
    return _this;
  }

  (0, _createClass3.default)(TxlTabList, [{
    key: '_handleClick',
    value: function _handleClick(obj) {
      this.props.onTabClick(obj);
    }
  }, {
    key: '_setHoverIndex',
    value: function _setHoverIndex(index) {
      this.setState({ hoverIndex: index });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var COLOR_APP_THEME = (0, _theme.determineColorAppTheme)(this.context.txlAppTheme);
      var TAB_SELECTED_COLOR = COLOR_APP_THEME['500'];
      var LINK_HOVERED_STYLES = {
        color: TAB_SELECTED_COLOR
      };
      var LINK_SELECTED_STYLES = {
        color: TAB_SELECTED_COLOR,
        pointerEvents: 'none'
      };
      var BORDER_SELECTED_STYLES = {
        backgroundColor: TAB_SELECTED_COLOR,
        bottom: 0
      };

      return _react2.default.createElement(
        'div',
        {
          'data-component': 'TxlTabList',
          style: CONTAINER_STYLES
        },
        _react2.default.createElement(
          'ul',
          { style: LIST_STYLES },
          this.props.items.map(function (item, index) {
            var isSelected = index === _this2.props.selectedIndex;
            var isHovered = index === _this2.state.hoverIndex;

            var linkCombined = (0, _helpers.combineStyles)(LINK_BASE_STYLES, isSelected && LINK_SELECTED_STYLES, isHovered && LINK_HOVERED_STYLES);

            var borderCombined = (0, _helpers.combineStyles)(BORDER_BASE_STYLES, isSelected && BORDER_SELECTED_STYLES);

            var clickHandler = function clickHandler(e) {
              e.preventDefault();
              if (isSelected) {
                return;
              }

              _this2._handleClick({ index: index });
            };

            var tabIndex = isSelected ? -1 : 0;

            return _react2.default.createElement(
              'li',
              {
                key: 'li-' + index,
                style: ITEM_STYLES,
                'data-selected': isSelected ? true : undefined
              },
              _react2.default.createElement(
                'a',
                {
                  // has to have href to be clickable via keyboard
                  href: 'javascript:void(0)' // eslint-disable-line no-script-url
                  , style: linkCombined,
                  onClick: clickHandler,
                  onMouseEnter: function onMouseEnter() {
                    return _this2._setHoverIndex(index);
                  },
                  onMouseLeave: function onMouseLeave() {
                    return _this2._setHoverIndex();
                  },
                  id: item.id,
                  tabIndex: tabIndex
                },
                item.heading,
                _react2.default.createElement('div', { style: borderCombined })
              )
            );
          })
        )
      );
    }
  }]);
  return TxlTabList;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_handleClick', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleClick'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_setHoverIndex', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_setHoverIndex'), _class2.prototype)), _class2)) || _class;

exports.default = TxlTabList;


TxlTabList.propTypes = {
  items: _react2.default.PropTypes.arrayOf(_react2.default.PropTypes.shape({
    heading: _react2.default.PropTypes.node.isRequired,
    id: _react2.default.PropTypes.string
  })),
  onTabClick: _react2.default.PropTypes.func.isRequired,
  selectedIndex: _react2.default.PropTypes.number.isRequired
};

TxlTabList.defaultProps = {
  onTabClick: _Base.NOOP
};

TxlTabList.contextTypes = {
  txlAppTheme: _theme.contextThemePropType
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(LIST_ITEM_HEIGHT, 'LIST_ITEM_HEIGHT', 'src/tabs/TabList.jsx');

  __REACT_HOT_LOADER__.register(CONTAINER_STYLES, 'CONTAINER_STYLES', 'src/tabs/TabList.jsx');

  __REACT_HOT_LOADER__.register(LIST_STYLES, 'LIST_STYLES', 'src/tabs/TabList.jsx');

  __REACT_HOT_LOADER__.register(ITEM_STYLES, 'ITEM_STYLES', 'src/tabs/TabList.jsx');

  __REACT_HOT_LOADER__.register(LINK_BASE_STYLES, 'LINK_BASE_STYLES', 'src/tabs/TabList.jsx');

  __REACT_HOT_LOADER__.register(BORDER_BASE_STYLES, 'BORDER_BASE_STYLES', 'src/tabs/TabList.jsx');

  __REACT_HOT_LOADER__.register(TxlTabList, 'TxlTabList', 'src/tabs/TabList.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YWJzL1RhYkxpc3QuanN4Il0sIm5hbWVzIjpbIkxJU1RfSVRFTV9IRUlHSFQiLCJDT05UQUlORVJfU1RZTEVTIiwiYm9yZGVyQm90dG9tIiwiZGlzcGxheSIsIndpZHRoIiwiTElTVF9TVFlMRVMiLCJhbGlnbkl0ZW1zIiwiSVRFTV9TVFlMRVMiLCJmbGV4IiwiTElOS19CQVNFX1NUWUxFUyIsImNvbG9yIiwiaGVpZ2h0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJwb3NpdGlvbiIsInRleHREZWNvcmF0aW9uIiwiQk9SREVSX0JBU0VfU1RZTEVTIiwiYmFja2dyb3VuZENvbG9yIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0IiwiVHhsVGFiTGlzdCIsImFyZ3MiLCJzdGF0ZSIsImhvdmVySW5kZXgiLCJvYmoiLCJwcm9wcyIsIm9uVGFiQ2xpY2siLCJpbmRleCIsInNldFN0YXRlIiwiQ09MT1JfQVBQX1RIRU1FIiwiY29udGV4dCIsInR4bEFwcFRoZW1lIiwiVEFCX1NFTEVDVEVEX0NPTE9SIiwiTElOS19IT1ZFUkVEX1NUWUxFUyIsIkxJTktfU0VMRUNURURfU1RZTEVTIiwicG9pbnRlckV2ZW50cyIsIkJPUkRFUl9TRUxFQ1RFRF9TVFlMRVMiLCJpdGVtcyIsIm1hcCIsIml0ZW0iLCJpc1NlbGVjdGVkIiwic2VsZWN0ZWRJbmRleCIsImlzSG92ZXJlZCIsImxpbmtDb21iaW5lZCIsImJvcmRlckNvbWJpbmVkIiwiY2xpY2tIYW5kbGVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX2hhbmRsZUNsaWNrIiwidGFiSW5kZXgiLCJ1bmRlZmluZWQiLCJfc2V0SG92ZXJJbmRleCIsImlkIiwiaGVhZGluZyIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImFycmF5T2YiLCJzaGFwZSIsIm5vZGUiLCJpc1JlcXVpcmVkIiwic3RyaW5nIiwiZnVuYyIsIm51bWJlciIsImRlZmF1bHRQcm9wcyIsImNvbnRleHRUeXBl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Qjs7Z0NBT0FJLFc7O2dDQU1BRSxXOztnQ0FJQUUsZ0I7O2dDQVlBTyxrQjs7Z0NBV2VLLFUiLCJmaWxlIjoiVGFiTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5cbmltcG9ydCB7IGF1dG9iaW5kLCBOT09QIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCB7XG4gIGdyaWRVbml0cyBhcyBndSxcbiAgY29tYmluZVN0eWxlcyxcbn0gZnJvbSAnLi4vc3R5bGVzL2hlbHBlcnMnO1xuaW1wb3J0IHtcbiAgSEVBRElOR19TTUFMTCxcbiAgREVGQVVMVF9GT05UX0ZBTUlMWSxcbn0gZnJvbSAnLi4vc3R5bGVzL21peGlucy90eXBlJztcbmltcG9ydCB7IFVOU1RZTEVEX0xJU1QgfSBmcm9tICcuLi9zdHlsZXMvbWl4aW5zL2xpc3QnO1xuaW1wb3J0IHtcbiAgQ09MT1JfTkVVVFJBTCxcbiAgY29udGV4dFRoZW1lUHJvcFR5cGUsXG4gIGRldGVybWluZUNvbG9yQXBwVGhlbWUsXG59IGZyb20gJy4uL3N0eWxlcy90aGVtZSc7XG5cbmNvbnN0IExJU1RfSVRFTV9IRUlHSFQgPSBndSg3KTtcblxuY29uc3QgQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgLi4uREVGQVVMVF9GT05UX0ZBTUlMWSxcbiAgYm9yZGVyQm90dG9tOiBgMXB4IHNvbGlkICR7Q09MT1JfTkVVVFJBTFsnMTAwJ119YCxcbiAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgd2lkdGg6ICcxMDAlJyxcbn07XG5cbmNvbnN0IExJU1RfU1RZTEVTID0ge1xuICAuLi5VTlNUWUxFRF9MSVNULFxuICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG4gIGRpc3BsYXk6ICdmbGV4Jyxcbn07XG5cbmNvbnN0IElURU1fU1RZTEVTID0ge1xuICBmbGV4OiAnMCAwIGF1dG8nLFxufTtcblxuY29uc3QgTElOS19CQVNFX1NUWUxFUyA9IHtcbiAgLi4uSEVBRElOR19TTUFMTCxcbiAgY29sb3I6IENPTE9SX05FVVRSQUxbJzIwMCddLFxuICBkaXNwbGF5OiAnYmxvY2snLFxuICBoZWlnaHQ6IExJU1RfSVRFTV9IRUlHSFQsXG4gIHBhZGRpbmdMZWZ0OiBndSg0KSxcbiAgcGFkZGluZ1JpZ2h0OiBndSg0KSxcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIHRleHREZWNvcmF0aW9uOiAnbm9uZScsXG4gIHdpZHRoOiAnYXV0bycsXG59O1xuXG5jb25zdCBCT1JERVJfQkFTRV9TVFlMRVMgPSB7XG4gIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgYm90dG9tOiAnNTAlJyxcbiAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgaGVpZ2h0OiAyLFxuICBsZWZ0OiAwLFxuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgcmlnaHQ6IDAsXG59O1xuXG5AUmFkaXVtXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUeGxUYWJMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgaG92ZXJJbmRleDogbnVsbCB9O1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVDbGljayhvYmopIHtcbiAgICB0aGlzLnByb3BzLm9uVGFiQ2xpY2sob2JqKTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfc2V0SG92ZXJJbmRleChpbmRleCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlckluZGV4OiBpbmRleCB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBDT0xPUl9BUFBfVEhFTUUgPSBkZXRlcm1pbmVDb2xvckFwcFRoZW1lKHRoaXMuY29udGV4dC50eGxBcHBUaGVtZSk7XG4gICAgY29uc3QgVEFCX1NFTEVDVEVEX0NPTE9SID0gQ09MT1JfQVBQX1RIRU1FWyc1MDAnXTtcbiAgICBjb25zdCBMSU5LX0hPVkVSRURfU1RZTEVTID0ge1xuICAgICAgY29sb3I6IFRBQl9TRUxFQ1RFRF9DT0xPUixcbiAgICB9O1xuICAgIGNvbnN0IExJTktfU0VMRUNURURfU1RZTEVTID0ge1xuICAgICAgY29sb3I6IFRBQl9TRUxFQ1RFRF9DT0xPUixcbiAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICB9O1xuICAgIGNvbnN0IEJPUkRFUl9TRUxFQ1RFRF9TVFlMRVMgPSB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFRBQl9TRUxFQ1RFRF9DT0xPUixcbiAgICAgIGJvdHRvbTogMCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgZGF0YS1jb21wb25lbnQ9XCJUeGxUYWJMaXN0XCJcbiAgICAgICAgc3R5bGU9e0NPTlRBSU5FUl9TVFlMRVN9XG4gICAgICA+XG4gICAgICAgIDx1bCBzdHlsZT17TElTVF9TVFlMRVN9PlxuICAgICAgICAgIHt0aGlzLnByb3BzLml0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBpbmRleCA9PT0gdGhpcy5wcm9wcy5zZWxlY3RlZEluZGV4O1xuICAgICAgICAgICAgY29uc3QgaXNIb3ZlcmVkID0gaW5kZXggPT09IHRoaXMuc3RhdGUuaG92ZXJJbmRleDtcblxuICAgICAgICAgICAgY29uc3QgbGlua0NvbWJpbmVkID0gY29tYmluZVN0eWxlcyhcbiAgICAgICAgICAgICAgTElOS19CQVNFX1NUWUxFUyxcbiAgICAgICAgICAgICAgaXNTZWxlY3RlZCAmJiBMSU5LX1NFTEVDVEVEX1NUWUxFUyxcbiAgICAgICAgICAgICAgaXNIb3ZlcmVkICYmIExJTktfSE9WRVJFRF9TVFlMRVNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJvcmRlckNvbWJpbmVkID0gY29tYmluZVN0eWxlcyhcbiAgICAgICAgICAgICAgQk9SREVSX0JBU0VfU1RZTEVTLFxuICAgICAgICAgICAgICBpc1NlbGVjdGVkICYmIEJPUkRFUl9TRUxFQ1RFRF9TVFlMRVNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNsaWNrSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2xpY2soeyBpbmRleCB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHRhYkluZGV4ID0gaXNTZWxlY3RlZCA/IC0xIDogMDtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAga2V5PXtgbGktJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgIHN0eWxlPXtJVEVNX1NUWUxFU31cbiAgICAgICAgICAgICAgICBkYXRhLXNlbGVjdGVkPXtpc1NlbGVjdGVkID8gdHJ1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAvLyBoYXMgdG8gaGF2ZSBocmVmIHRvIGJlIGNsaWNrYWJsZSB2aWEga2V5Ym9hcmRcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmxcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXtsaW5rQ29tYmluZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtjbGlja0hhbmRsZXJ9XG4gICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHRoaXMuX3NldEhvdmVySW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiB0aGlzLl9zZXRIb3ZlckluZGV4KCl9XG4gICAgICAgICAgICAgICAgICBpZD17aXRlbS5pZH1cbiAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXt0YWJJbmRleH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7aXRlbS5oZWFkaW5nfVxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17Ym9yZGVyQ29tYmluZWR9IC8+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC91bD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuVHhsVGFiTGlzdC5wcm9wVHlwZXMgPSB7XG4gIGl0ZW1zOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXlPZihSZWFjdC5Qcm9wVHlwZXMuc2hhcGUoe1xuICAgIGhlYWRpbmc6IFJlYWN0LlByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsXG4gICAgaWQ6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gIH0pKSxcbiAgb25UYWJDbGljazogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgc2VsZWN0ZWRJbmRleDogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxufTtcblxuVHhsVGFiTGlzdC5kZWZhdWx0UHJvcHMgPSB7XG4gIG9uVGFiQ2xpY2s6IE5PT1AsXG59O1xuXG5UeGxUYWJMaXN0LmNvbnRleHRUeXBlcyA9IHtcbiAgdHhsQXBwVGhlbWU6IGNvbnRleHRUaGVtZVByb3BUeXBlLFxufTtcbiJdfQ==