'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _get = require('lodash/get');

var _get2 = _interopRequireDefault(_get);

var _Base = require('../base/Base');

var _FilePreview = require('./FilePreview.style');

var _MiddleTruncatedText = require('../text/MiddleTruncatedText');

var _MiddleTruncatedText2 = _interopRequireDefault(_MiddleTruncatedText);

var _FilePlaceholder = require('../icons/FilePlaceholder');

var _FilePlaceholder2 = _interopRequireDefault(_FilePlaceholder);

var _FileDetailsModal = require('./FileDetailsModal');

var _FileDetailsModal2 = _interopRequireDefault(_FileDetailsModal);

var _FilePreviewControlled = require('./FilePreviewControlled');

var _FilePreviewControlled2 = _interopRequireDefault(_FilePreviewControlled);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var TxlFilePreviewWithDetailsModal = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlFilePreviewWithDetailsModal, _React$Component);

  function TxlFilePreviewWithDetailsModal() {
    var _ref;

    (0, _classCallCheck3.default)(this, TxlFilePreviewWithDetailsModal);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = TxlFilePreviewWithDetailsModal.__proto__ || (0, _getPrototypeOf2.default)(TxlFilePreviewWithDetailsModal)).call.apply(_ref, [this].concat(args)));

    _this.state = {
      dragging: false,
      hovered: false,
      isImage: false,
      showDetailsModal: false
    };
    return _this;
  }

  (0, _createClass3.default)(TxlFilePreviewWithDetailsModal, [{
    key: 'componentWillMount',
    value: function componentWillMount() {
      if (this.props.fileInfo) {
        this._checkIfFileIsImage(this.props.fileInfo.file);
      }
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      window.URL.revokeObjectURL(this.state.fileURL);
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var currentFileName = (0, _get2.default)(this.props, 'fileInfo.file.name');
      var newFileName = (0, _get2.default)(nextProps, 'fileInfo.file.name');

      if (nextProps.fileInfo) {
        if (newFileName !== currentFileName) {
          this._checkIfFileIsImage(nextProps.fileInfo.file);
        }
      } else {
        this.setState({ isImage: false });
      }
    }
  }, {
    key: '_checkIfFileIsImage',
    value: function _checkIfFileIsImage(file) {
      var _this2 = this;

      var path = window.URL.createObjectURL(file);
      var image = new Image();
      image.onload = function () {
        _this2.setState({
          fileURL: path,
          imageHeight: image.height,
          imageWidth: image.width,
          isImage: true
        });
      };

      image.onerror = function () {
        _this2.setState({ isImage: false });
        window.URL.revokeObjectURL(path);
      };

      image.src = path;
    }
  }, {
    key: '_triggerFileSelectionDialog',
    value: function _triggerFileSelectionDialog() {
      this._fileInput.click();
    }
  }, {
    key: '_handleFileSelected',
    value: function _handleFileSelected(event) {
      var newFile = event.target.files[0];
      this.props.onEdit({
        currentFile: this.props.fileInfo,
        newFile: newFile
      });
    }
  }, {
    key: '_handleDrop',
    value: function _handleDrop(_ref2) {
      var _this3 = this;

      var event = _ref2.event;

      event.preventDefault();
      var newFile = event.dataTransfer.files[0];
      this.setState({ dragging: false }, function () {
        _this3.props.onEdit({
          currentFile: _this3.props.fileInfo,
          newFile: newFile
        });
      });
    }
  }, {
    key: '_handleMouseEnter',
    value: function _handleMouseEnter() {
      this.setState({ hovered: true });
    }
  }, {
    key: '_handleMouseLeave',
    value: function _handleMouseLeave() {
      this.setState({ hovered: false });
    }
  }, {
    key: '_handleDetails',
    value: function _handleDetails() {
      this.setState({
        hovered: false,
        showDetailsModal: true
      });
    }
  }, {
    key: '_handleDetailsDismiss',
    value: function _handleDetailsDismiss() {
      this.setState({ showDetailsModal: false });
    }
  }, {
    key: '_handleDragOver',
    value: function _handleDragOver(_ref3) {
      var event = _ref3.event;

      event.preventDefault();
      this.setState({ dragging: true });
    }
  }, {
    key: '_handleDragLeave',
    value: function _handleDragLeave() {
      this.setState({ dragging: false });
    }
  }, {
    key: '_handleImagePreviewRef',
    value: function _handleImagePreviewRef(ref) {
      this._imagePreview = ref;
    }
  }, {
    key: '_handleFilePlaceholderRef',
    value: function _handleFilePlaceholderRef(ref) {
      this._filePlaceholder = ref;
    }
  }, {
    key: '_handleFilePreviewControlledRef',
    value: function _handleFilePreviewControlledRef(ref) {
      this._filePreviewControlled = ref;
    }
  }, {
    key: '_handleFileInputRef',
    value: function _handleFileInputRef(ref) {
      this._fileInput = ref;
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          fileInfo = _props.fileInfo,
          onCancel = _props.onCancel,
          onDelete = _props.onDelete;
      var _state = this.state,
          dragging = _state.dragging,
          fileURL = _state.fileURL,
          hovered = _state.hovered,
          isImage = _state.isImage,
          imageHeight = _state.imageHeight,
          imageWidth = _state.imageWidth,
          showDetailsModal = _state.showDetailsModal;


      var preview = void 0;
      if (isImage) {
        preview = _react2.default.createElement(
          'div',
          {
            ref: this._handleImagePreviewRef,
            style: _FilePreview.IMAGE_PREVIEW_CONTAINER_STYLE
          },
          _react2.default.createElement('img', {
            style: _FilePreview.IMAGE_PREVIEW_STYLE,
            src: fileURL
          })
        );
      } else if (fileInfo) {
        var fileName = fileInfo.file.name;

        preview = _react2.default.createElement(
          'div',
          {
            ref: this._handleFilePlaceholderRef,
            style: _FilePreview.FILE_PLACEHOLDER_PREVIEW_STYLE
          },
          _react2.default.createElement(_FilePlaceholder2.default, {
            color: _FilePreview.FILE_PLACEHOLDER_PREVIEW_ICON_COLOR,
            scale: 2
          }),
          _react2.default.createElement(
            'div',
            { style: _FilePreview.FILE_PLACEHOLDER_TEXT_STYLE },
            _react2.default.createElement(_MiddleTruncatedText2.default, {
              numberOfLines: 3,
              text: fileName
            })
          )
        );
      }

      return _react2.default.createElement(
        'div',
        { 'data-component': 'TxlFilePreviewWithDetailsModal' },
        _react2.default.createElement(_FilePreviewControlled2.default, {
          dragging: dragging,
          fileInfo: fileInfo,
          hovered: hovered,
          onCancel: onCancel,
          onDelete: onDelete,
          onDetails: this._handleDetails,
          onDragLeave: this._handleDragLeave,
          onDragOver: this._handleDragOver,
          onDrop: this._handleDrop,
          onEdit: this._triggerFileSelectionDialog,
          onMouseEnter: this._handleMouseEnter,
          onMouseLeave: this._handleMouseLeave,
          preview: preview,
          ref: this._handleFilePreviewControlledRef
        }),
        _react2.default.createElement('input', {
          onChange: this._handleFileSelected,
          ref: this._handleFileInputRef,
          style: _FilePreview.FILE_INPUT_STYLE,
          type: 'file'
        }),
        showDetailsModal && _react2.default.createElement(_FileDetailsModal2.default, {
          file: fileInfo.file,
          fileURL: fileURL,
          isImage: isImage,
          imageHeight: imageHeight,
          imageWidth: imageWidth,
          onDismiss: this._handleDetailsDismiss
        })
      );
    }
  }]);
  return TxlFilePreviewWithDetailsModal;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_checkIfFileIsImage', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_checkIfFileIsImage'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_triggerFileSelectionDialog', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_triggerFileSelectionDialog'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFileSelected', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFileSelected'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDrop', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDrop'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleMouseEnter', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleMouseEnter'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleMouseLeave', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleMouseLeave'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDetails', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDetails'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDetailsDismiss', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDetailsDismiss'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDragOver', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDragOver'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDragLeave', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDragLeave'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleImagePreviewRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleImagePreviewRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFilePlaceholderRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFilePlaceholderRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFilePreviewControlledRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFilePreviewControlledRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFileInputRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFileInputRef'), _class2.prototype)), _class2)) || _class;

exports.default = TxlFilePreviewWithDetailsModal;


TxlFilePreviewWithDetailsModal.displayName = 'TxlFilePreviewWithDetailsModal';

TxlFilePreviewWithDetailsModal.propTypes = {
  fileInfo: _react.PropTypes.shape({
    file: _react.PropTypes.instanceOf(File),
    percentUploaded: _react.PropTypes.number,
    uploading: _react.PropTypes.bool
  }),
  onCancel: _react.PropTypes.func,
  onDelete: _react.PropTypes.func,
  onEdit: _react.PropTypes.func
};

TxlFilePreviewWithDetailsModal.defaultProps = {
  onCancel: _Base.NOOP,
  onDelete: _Base.NOOP,
  onEdit: _Base.NOOP
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TxlFilePreviewWithDetailsModal, 'TxlFilePreviewWithDetailsModal', 'src/file-preview/FilePreviewWithDetailsModal.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9maWxlLXByZXZpZXcvRmlsZVByZXZpZXdXaXRoRGV0YWlsc01vZGFsLmpzeCJdLCJuYW1lcyI6WyJUeGxGaWxlUHJldmlld1dpdGhEZXRhaWxzTW9kYWwiLCJhcmdzIiwic3RhdGUiLCJkcmFnZ2luZyIsImhvdmVyZWQiLCJpc0ltYWdlIiwic2hvd0RldGFpbHNNb2RhbCIsInByb3BzIiwiZmlsZUluZm8iLCJfY2hlY2tJZkZpbGVJc0ltYWdlIiwiZmlsZSIsIndpbmRvdyIsIlVSTCIsInJldm9rZU9iamVjdFVSTCIsImZpbGVVUkwiLCJuZXh0UHJvcHMiLCJjdXJyZW50RmlsZU5hbWUiLCJuZXdGaWxlTmFtZSIsInNldFN0YXRlIiwicGF0aCIsImNyZWF0ZU9iamVjdFVSTCIsImltYWdlIiwiSW1hZ2UiLCJvbmxvYWQiLCJpbWFnZUhlaWdodCIsImhlaWdodCIsImltYWdlV2lkdGgiLCJ3aWR0aCIsIm9uZXJyb3IiLCJzcmMiLCJfZmlsZUlucHV0IiwiY2xpY2siLCJldmVudCIsIm5ld0ZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsIm9uRWRpdCIsImN1cnJlbnRGaWxlIiwicHJldmVudERlZmF1bHQiLCJkYXRhVHJhbnNmZXIiLCJyZWYiLCJfaW1hZ2VQcmV2aWV3IiwiX2ZpbGVQbGFjZWhvbGRlciIsIl9maWxlUHJldmlld0NvbnRyb2xsZWQiLCJvbkNhbmNlbCIsIm9uRGVsZXRlIiwicHJldmlldyIsIl9oYW5kbGVJbWFnZVByZXZpZXdSZWYiLCJmaWxlTmFtZSIsIm5hbWUiLCJfaGFuZGxlRmlsZVBsYWNlaG9sZGVyUmVmIiwiX2hhbmRsZURldGFpbHMiLCJfaGFuZGxlRHJhZ0xlYXZlIiwiX2hhbmRsZURyYWdPdmVyIiwiX2hhbmRsZURyb3AiLCJfdHJpZ2dlckZpbGVTZWxlY3Rpb25EaWFsb2ciLCJfaGFuZGxlTW91c2VFbnRlciIsIl9oYW5kbGVNb3VzZUxlYXZlIiwiX2hhbmRsZUZpbGVQcmV2aWV3Q29udHJvbGxlZFJlZiIsIl9oYW5kbGVGaWxlU2VsZWN0ZWQiLCJfaGFuZGxlRmlsZUlucHV0UmVmIiwiX2hhbmRsZURldGFpbHNEaXNtaXNzIiwiQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJzaGFwZSIsImluc3RhbmNlT2YiLCJGaWxlIiwicGVyY2VudFVwbG9hZGVkIiwibnVtYmVyIiwidXBsb2FkaW5nIiwiYm9vbCIsImZ1bmMiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOztBQUNBOztBQVFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUdxQkEsOEI7OztBQUNuQiw0Q0FBcUI7QUFBQTs7QUFBQTs7QUFBQSxzQ0FBTkMsSUFBTTtBQUFOQSxVQUFNO0FBQUE7O0FBQUEsaU5BQ1ZBLElBRFU7O0FBR25CLFVBQUtDLEtBQUwsR0FBYTtBQUNYQyxnQkFBVSxLQURDO0FBRVhDLGVBQVMsS0FGRTtBQUdYQyxlQUFTLEtBSEU7QUFJWEMsd0JBQWtCO0FBSlAsS0FBYjtBQUhtQjtBQVNwQjs7Ozt5Q0FFb0I7QUFDbkIsVUFBSSxLQUFLQyxLQUFMLENBQVdDLFFBQWYsRUFBeUI7QUFDdkIsYUFBS0MsbUJBQUwsQ0FBeUIsS0FBS0YsS0FBTCxDQUFXQyxRQUFYLENBQW9CRSxJQUE3QztBQUNEO0FBQ0Y7OzsyQ0FFc0I7QUFDckJDLGFBQU9DLEdBQVAsQ0FBV0MsZUFBWCxDQUEyQixLQUFLWCxLQUFMLENBQVdZLE9BQXRDO0FBQ0Q7Ozs4Q0FFeUJDLFMsRUFBVztBQUNuQyxVQUFNQyxrQkFBa0IsbUJBQUksS0FBS1QsS0FBVCxFQUFnQixvQkFBaEIsQ0FBeEI7QUFDQSxVQUFNVSxjQUFjLG1CQUFJRixTQUFKLEVBQWUsb0JBQWYsQ0FBcEI7O0FBRUEsVUFBSUEsVUFBVVAsUUFBZCxFQUF3QjtBQUN0QixZQUFJUyxnQkFBZ0JELGVBQXBC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QUFjRSxlQUFLLEtBQUtZO0FBZFosVUFERjtBQWlCRTtBQUNFLG9CQUFVLEtBQUtDLG1CQURqQjtBQUVFLGVBQUssS0FBS0MsbUJBRlo7QUFHRSw4Q0FIRjtBQUlFLGdCQUFLO0FBSlAsVUFqQkY7QUF1Qkd0RCw0QkFDQztBQUNFLGdCQUFNRSxTQUFTRSxJQURqQjtBQUVFLG1CQUFTSSxPQUZYO0FBR0UsbUJBQVNULE9BSFg7QUFJRSx1QkFBYW1CLFdBSmY7QUFLRSxzQkFBWUUsVUFMZDtBQU1FLHFCQUFXLEtBQUttQztBQU5sQjtBQXhCSixPQURGO0FBb0NEOzs7RUFoT3lELGdCQUFNQyxTOztrQkFBN0M5RCw4Qjs7O0FBbU9yQkEsK0JBQStCK0QsV0FBL0IsR0FBNkMsZ0NBQTdDOztBQUVBL0QsK0JBQStCZ0UsU0FBL0IsR0FBMkM7QUFDekN4RCxZQUFVLGlCQUFVeUQsS0FBVixDQUFnQjtBQUN4QnZELFVBQU0saUJBQVV3RCxVQUFWLENBQXFCQyxJQUFyQixDQURrQjtBQUV4QkMscUJBQWlCLGlCQUFVQyxNQUZIO0FBR3hCQyxlQUFXLGlCQUFVQztBQUhHLEdBQWhCLENBRCtCO0FBTXpDM0IsWUFBVSxpQkFBVTRCLElBTnFCO0FBT3pDM0IsWUFBVSxpQkFBVTJCLElBUHFCO0FBUXpDcEMsVUFBUSxpQkFBVW9DO0FBUnVCLENBQTNDOztBQVdBeEUsK0JBQStCeUUsWUFBL0IsR0FBOEM7QUFDNUM3QixzQkFENEM7QUFFNUNDLHNCQUY0QztBQUc1Q1Q7QUFINEMsQ0FBOUM7Ozs7Ozs7O2dDQWhQcUJwQyw4QiIsImZpbGUiOiJGaWxlUHJldmlld1dpdGhEZXRhaWxzTW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJhZGl1bSBmcm9tICdyYWRpdW0nO1xuaW1wb3J0IGdldCBmcm9tICdsb2Rhc2gvZ2V0JztcblxuaW1wb3J0IHsgYXV0b2JpbmQsIE5PT1AgfSBmcm9tICcuLi9iYXNlL0Jhc2UnO1xuaW1wb3J0IHtcbiAgRklMRV9JTlBVVF9TVFlMRSxcbiAgRklMRV9QTEFDRUhPTERFUl9QUkVWSUVXX0lDT05fQ09MT1IsXG4gIEZJTEVfUExBQ0VIT0xERVJfUFJFVklFV19TVFlMRSxcbiAgRklMRV9QTEFDRUhPTERFUl9URVhUX1NUWUxFLFxuICBJTUFHRV9QUkVWSUVXX0NPTlRBSU5FUl9TVFlMRSxcbiAgSU1BR0VfUFJFVklFV19TVFlMRSxcbn0gZnJvbSAnLi9GaWxlUHJldmlldy5zdHlsZSc7XG5pbXBvcnQgTWlkZGxlVHJ1bmNhdGVkVGV4dCBmcm9tICcuLi90ZXh0L01pZGRsZVRydW5jYXRlZFRleHQnO1xuaW1wb3J0IEZpbGVQbGFjZWhvbGRlciBmcm9tICcuLi9pY29ucy9GaWxlUGxhY2Vob2xkZXInO1xuaW1wb3J0IEZpbGVEZXRhaWxzTW9kYWwgZnJvbSAnLi9GaWxlRGV0YWlsc01vZGFsJztcbmltcG9ydCBGaWxlUHJldmlld0NvbnRyb2xsZWQgZnJvbSAnLi9GaWxlUHJldmlld0NvbnRyb2xsZWQnO1xuXG5AUmFkaXVtXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUeGxGaWxlUHJldmlld1dpdGhEZXRhaWxzTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZHJhZ2dpbmc6IGZhbHNlLFxuICAgICAgaG92ZXJlZDogZmFsc2UsXG4gICAgICBpc0ltYWdlOiBmYWxzZSxcbiAgICAgIHNob3dEZXRhaWxzTW9kYWw6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZmlsZUluZm8pIHtcbiAgICAgIHRoaXMuX2NoZWNrSWZGaWxlSXNJbWFnZSh0aGlzLnByb3BzLmZpbGVJbmZvLmZpbGUpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuc3RhdGUuZmlsZVVSTCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGNvbnN0IGN1cnJlbnRGaWxlTmFtZSA9IGdldCh0aGlzLnByb3BzLCAnZmlsZUluZm8uZmlsZS5uYW1lJyk7XG4gICAgY29uc3QgbmV3RmlsZU5hbWUgPSBnZXQobmV4dFByb3BzLCAnZmlsZUluZm8uZmlsZS5uYW1lJyk7XG5cbiAgICBpZiAobmV4dFByb3BzLmZpbGVJbmZvKSB7XG4gICAgICBpZiAobmV3RmlsZU5hbWUgIT09IGN1cnJlbnRGaWxlTmFtZSkge1xuICAgICAgICB0aGlzLl9jaGVja0lmRmlsZUlzSW1hZ2UobmV4dFByb3BzLmZpbGVJbmZvLmZpbGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNJbWFnZTogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9jaGVja0lmRmlsZUlzSW1hZ2UoZmlsZSkge1xuICAgIGNvbnN0IHBhdGggPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmaWxlVVJMOiBwYXRoLFxuICAgICAgICBpbWFnZUhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICBpbWFnZVdpZHRoOiBpbWFnZS53aWR0aCxcbiAgICAgICAgaXNJbWFnZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpbWFnZS5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzSW1hZ2U6IGZhbHNlIH0pO1xuICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwocGF0aCk7XG4gICAgfTtcblxuICAgIGltYWdlLnNyYyA9IHBhdGg7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX3RyaWdnZXJGaWxlU2VsZWN0aW9uRGlhbG9nKCkge1xuICAgIHRoaXMuX2ZpbGVJbnB1dC5jbGljaygpO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVGaWxlU2VsZWN0ZWQoZXZlbnQpIHtcbiAgICBjb25zdCBuZXdGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgIHRoaXMucHJvcHMub25FZGl0KHtcbiAgICAgIGN1cnJlbnRGaWxlOiB0aGlzLnByb3BzLmZpbGVJbmZvLFxuICAgICAgbmV3RmlsZSxcbiAgICB9KTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRHJvcCh7IGV2ZW50IH0pIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IG5ld0ZpbGUgPSBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXNbMF07XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRyYWdnaW5nOiBmYWxzZSB9LCAoKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLm9uRWRpdCh7XG4gICAgICAgIGN1cnJlbnRGaWxlOiB0aGlzLnByb3BzLmZpbGVJbmZvLFxuICAgICAgICBuZXdGaWxlLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyZWQ6IHRydWUgfSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZU1vdXNlTGVhdmUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyZWQ6IGZhbHNlIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVEZXRhaWxzKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaG92ZXJlZDogZmFsc2UsXG4gICAgICBzaG93RGV0YWlsc01vZGFsOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVEZXRhaWxzRGlzbWlzcygpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0RldGFpbHNNb2RhbDogZmFsc2UgfSk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZURyYWdPdmVyKHsgZXZlbnQgfSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRyYWdnaW5nOiB0cnVlIH0pO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVEcmFnTGVhdmUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRyYWdnaW5nOiBmYWxzZSB9KTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlSW1hZ2VQcmV2aWV3UmVmKHJlZikge1xuICAgIHRoaXMuX2ltYWdlUHJldmlldyA9IHJlZjtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRmlsZVBsYWNlaG9sZGVyUmVmKHJlZikge1xuICAgIHRoaXMuX2ZpbGVQbGFjZWhvbGRlciA9IHJlZjtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRmlsZVByZXZpZXdDb250cm9sbGVkUmVmKHJlZikge1xuICAgIHRoaXMuX2ZpbGVQcmV2aWV3Q29udHJvbGxlZCA9IHJlZjtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRmlsZUlucHV0UmVmKHJlZikge1xuICAgIHRoaXMuX2ZpbGVJbnB1dCA9IHJlZjtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBmaWxlSW5mbyxcbiAgICAgIG9uQ2FuY2VsLFxuICAgICAgb25EZWxldGUsXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCB7XG4gICAgICBkcmFnZ2luZyxcbiAgICAgIGZpbGVVUkwsXG4gICAgICBob3ZlcmVkLFxuICAgICAgaXNJbWFnZSxcbiAgICAgIGltYWdlSGVpZ2h0LFxuICAgICAgaW1hZ2VXaWR0aCxcbiAgICAgIHNob3dEZXRhaWxzTW9kYWwsXG4gICAgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBsZXQgcHJldmlldztcbiAgICBpZiAoaXNJbWFnZSkge1xuICAgICAgcHJldmlldyA9IChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIHJlZj17dGhpcy5faGFuZGxlSW1hZ2VQcmV2aWV3UmVmfVxuICAgICAgICAgIHN0eWxlPXtJTUFHRV9QUkVWSUVXX0NPTlRBSU5FUl9TVFlMRX1cbiAgICAgICAgPlxuICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgIHN0eWxlPXtJTUFHRV9QUkVWSUVXX1NUWUxFfVxuICAgICAgICAgICAgc3JjPXtmaWxlVVJMfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGZpbGVJbmZvKSB7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVJbmZvLmZpbGUubmFtZTtcblxuICAgICAgcHJldmlldyA9IChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIHJlZj17dGhpcy5faGFuZGxlRmlsZVBsYWNlaG9sZGVyUmVmfVxuICAgICAgICAgIHN0eWxlPXtGSUxFX1BMQUNFSE9MREVSX1BSRVZJRVdfU1RZTEV9XG4gICAgICAgID5cbiAgICAgICAgICA8RmlsZVBsYWNlaG9sZGVyXG4gICAgICAgICAgICBjb2xvcj17RklMRV9QTEFDRUhPTERFUl9QUkVWSUVXX0lDT05fQ09MT1J9XG4gICAgICAgICAgICBzY2FsZT17Mn1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxkaXYgc3R5bGU9e0ZJTEVfUExBQ0VIT0xERVJfVEVYVF9TVFlMRX0+XG4gICAgICAgICAgICA8TWlkZGxlVHJ1bmNhdGVkVGV4dFxuICAgICAgICAgICAgICBudW1iZXJPZkxpbmVzPXszfVxuICAgICAgICAgICAgICB0ZXh0PXtmaWxlTmFtZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLWNvbXBvbmVudD1cIlR4bEZpbGVQcmV2aWV3V2l0aERldGFpbHNNb2RhbFwiPlxuICAgICAgICA8RmlsZVByZXZpZXdDb250cm9sbGVkXG4gICAgICAgICAgZHJhZ2dpbmc9e2RyYWdnaW5nfVxuICAgICAgICAgIGZpbGVJbmZvPXtmaWxlSW5mb31cbiAgICAgICAgICBob3ZlcmVkPXtob3ZlcmVkfVxuICAgICAgICAgIG9uQ2FuY2VsPXtvbkNhbmNlbH1cbiAgICAgICAgICBvbkRlbGV0ZT17b25EZWxldGV9XG4gICAgICAgICAgb25EZXRhaWxzPXt0aGlzLl9oYW5kbGVEZXRhaWxzfVxuICAgICAgICAgIG9uRHJhZ0xlYXZlPXt0aGlzLl9oYW5kbGVEcmFnTGVhdmV9XG4gICAgICAgICAgb25EcmFnT3Zlcj17dGhpcy5faGFuZGxlRHJhZ092ZXJ9XG4gICAgICAgICAgb25Ecm9wPXt0aGlzLl9oYW5kbGVEcm9wfVxuICAgICAgICAgIG9uRWRpdD17dGhpcy5fdHJpZ2dlckZpbGVTZWxlY3Rpb25EaWFsb2d9XG4gICAgICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLl9oYW5kbGVNb3VzZUVudGVyfVxuICAgICAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5faGFuZGxlTW91c2VMZWF2ZX1cbiAgICAgICAgICBwcmV2aWV3PXtwcmV2aWV3fVxuICAgICAgICAgIHJlZj17dGhpcy5faGFuZGxlRmlsZVByZXZpZXdDb250cm9sbGVkUmVmfVxuICAgICAgICAvPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5faGFuZGxlRmlsZVNlbGVjdGVkfVxuICAgICAgICAgIHJlZj17dGhpcy5faGFuZGxlRmlsZUlucHV0UmVmfVxuICAgICAgICAgIHN0eWxlPXtGSUxFX0lOUFVUX1NUWUxFfVxuICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgLz5cbiAgICAgICAge3Nob3dEZXRhaWxzTW9kYWwgJiZcbiAgICAgICAgICA8RmlsZURldGFpbHNNb2RhbFxuICAgICAgICAgICAgZmlsZT17ZmlsZUluZm8uZmlsZX1cbiAgICAgICAgICAgIGZpbGVVUkw9e2ZpbGVVUkx9XG4gICAgICAgICAgICBpc0ltYWdlPXtpc0ltYWdlfVxuICAgICAgICAgICAgaW1hZ2VIZWlnaHQ9e2ltYWdlSGVpZ2h0fVxuICAgICAgICAgICAgaW1hZ2VXaWR0aD17aW1hZ2VXaWR0aH1cbiAgICAgICAgICAgIG9uRGlzbWlzcz17dGhpcy5faGFuZGxlRGV0YWlsc0Rpc21pc3N9XG4gICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5UeGxGaWxlUHJldmlld1dpdGhEZXRhaWxzTW9kYWwuZGlzcGxheU5hbWUgPSAnVHhsRmlsZVByZXZpZXdXaXRoRGV0YWlsc01vZGFsJztcblxuVHhsRmlsZVByZXZpZXdXaXRoRGV0YWlsc01vZGFsLnByb3BUeXBlcyA9IHtcbiAgZmlsZUluZm86IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgZmlsZTogUHJvcFR5cGVzLmluc3RhbmNlT2YoRmlsZSksXG4gICAgcGVyY2VudFVwbG9hZGVkOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIHVwbG9hZGluZzogUHJvcFR5cGVzLmJvb2wsXG4gIH0pLFxuICBvbkNhbmNlbDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRGVsZXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25FZGl0OiBQcm9wVHlwZXMuZnVuYyxcbn07XG5cblR4bEZpbGVQcmV2aWV3V2l0aERldGFpbHNNb2RhbC5kZWZhdWx0UHJvcHMgPSB7XG4gIG9uQ2FuY2VsOiBOT09QLFxuICBvbkRlbGV0ZTogTk9PUCxcbiAgb25FZGl0OiBOT09QLFxufTtcbiJdfQ==