'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _desc, _value, _class2;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _radium = require('radium');

var _radium2 = _interopRequireDefault(_radium);

var _moment = require('moment');

var _moment2 = _interopRequireDefault(_moment);

var _Base = require('../base/Base');

var _formatter = require('../utils/formatter');

var _Modal = require('../modals/Modal');

var _Modal2 = _interopRequireDefault(_Modal);

var _Button = require('../buttons/Button');

var _Button2 = _interopRequireDefault(_Button);

var _FilePlaceholder = require('../icons/FilePlaceholder');

var _FilePlaceholder2 = _interopRequireDefault(_FilePlaceholder);

var _theme = require('../styles/theme');

var _FileDetailsModal = require('./FileDetailsModal.style');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

// @TODO-TRANSLATE
var CLOSE_BUTTON_TEXT = 'Close';
var IMAGE_HEADER_TITLE = 'Image Details';
var FILE_HEADER_TITLE = 'File Details';
var FILE_NAME_LABEL_TEXT = 'File name: ';
var FILE_TYPE_LABEL_TEXT = 'File type: ';
var UPLOADED_ON_LABEL_TEXT = 'Uploaded on: ';
var FILE_SIZE_LABEL_TEXT = 'File size: ';
var DIMENSIONS_LABEL_TEXT = 'Dimensions: ';

var TxlFileDetailsModal = (0, _radium2.default)(_class = (_class2 = function (_React$Component) {
  (0, _inherits3.default)(TxlFileDetailsModal, _React$Component);

  function TxlFileDetailsModal() {
    (0, _classCallCheck3.default)(this, TxlFileDetailsModal);
    return (0, _possibleConstructorReturn3.default)(this, (TxlFileDetailsModal.__proto__ || (0, _getPrototypeOf2.default)(TxlFileDetailsModal)).apply(this, arguments));
  }

  (0, _createClass3.default)(TxlFileDetailsModal, [{
    key: '_handleFileNameLabelRef',
    value: function _handleFileNameLabelRef(ref) {
      this._fileNameLabel = ref;
    }
  }, {
    key: '_handleFileTypeLabelRef',
    value: function _handleFileTypeLabelRef(ref) {
      this._fileTypeLabel = ref;
    }
  }, {
    key: '_handleFileUploadDateLabelRef',
    value: function _handleFileUploadDateLabelRef(ref) {
      this._fileUploadDateLabel = ref;
    }
  }, {
    key: '_handleFileSizeLabelRef',
    value: function _handleFileSizeLabelRef(ref) {
      this._fileSizeLabel = ref;
    }
  }, {
    key: '_handleDimensionsLabelRef',
    value: function _handleDimensionsLabelRef(ref) {
      this._dimensionsLabel = ref;
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          dateUploaded = _props.dateUploaded,
          file = _props.file,
          fileURL = _props.fileURL,
          isImage = _props.isImage,
          imageHeight = _props.imageHeight,
          imageWidth = _props.imageWidth,
          onDismiss = _props.onDismiss;


      var footer = _react2.default.createElement(
        'div',
        null,
        _react2.default.createElement(
          _Button2.default,
          {
            size: 'large',
            variant: 'accent',
            onClick: onDismiss
          },
          CLOSE_BUTTON_TEXT
        )
      );

      var previewStyle = isImage ? _FileDetailsModal.IMAGE_PREVIEW_CONTAINER_STYLE : _FileDetailsModal.FILE_PREVIEW_CONTAINER_STYLE;

      var header = isImage ? IMAGE_HEADER_TITLE : FILE_HEADER_TITLE;
      var matches = file.name.match(/(^[\D\d]+)\.([\w]+)$/i);

      var _ref = matches || [file.name, file.name, ''],
          _ref2 = (0, _slicedToArray3.default)(_ref, 3),
          fileName = _ref2[1],
          fileType = _ref2[2]; // handle matches being null


      var fileSize = (0, _formatter.convertBytesToHumanReadableFormat)(file.size);

      var uploadedOn = (0, _moment2.default)(dateUploaded).format('MMMM DD, YYYY');
      var dimensions = imageWidth + ' x ' + imageHeight;

      return _react2.default.createElement(
        _Modal2.default,
        (0, _extends3.default)({}, this.props, {
          size: 'small',
          header: header,
          footer: footer
        }),
        _react2.default.createElement(
          'div',
          { style: _FileDetailsModal.MODAL_CONTAINER_STYLE },
          _react2.default.createElement(
            'div',
            { style: previewStyle },
            isImage && _react2.default.createElement('img', {
              style: _FileDetailsModal.IMAGE_PREVIEW_STYLE,
              src: fileURL
            }),
            !isImage && _react2.default.createElement(_FilePlaceholder2.default, {
              scale: 5,
              color: _theme.COLOR_NEUTRAL['200']
            })
          ),
          _react2.default.createElement(
            'div',
            { style: _FileDetailsModal.FILE_INFO_STYLE },
            _react2.default.createElement(
              'div',
              null,
              FILE_NAME_LABEL_TEXT,
              _react2.default.createElement(
                'span',
                { ref: this._handleFileNameLabelRef },
                fileName
              )
            ),
            _react2.default.createElement(
              'div',
              null,
              FILE_TYPE_LABEL_TEXT,
              _react2.default.createElement(
                'span',
                { ref: this._handleFileTypeLabelRef },
                fileType
              )
            ),
            _react2.default.createElement(
              'div',
              null,
              UPLOADED_ON_LABEL_TEXT,
              _react2.default.createElement(
                'span',
                { ref: this._handleFileUploadDateLabelRef },
                uploadedOn
              )
            ),
            _react2.default.createElement(
              'div',
              null,
              FILE_SIZE_LABEL_TEXT,
              _react2.default.createElement(
                'span',
                { ref: this._handleFileSizeLabelRef },
                fileSize
              )
            ),
            imageWidth && imageHeight && _react2.default.createElement(
              'div',
              null,
              DIMENSIONS_LABEL_TEXT,
              _react2.default.createElement(
                'span',
                { ref: this._handleDimensionsLabelRef },
                dimensions
              )
            )
          )
        )
      );
    }
  }]);
  return TxlFileDetailsModal;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class2.prototype, '_handleFileNameLabelRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFileNameLabelRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFileTypeLabelRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFileTypeLabelRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFileUploadDateLabelRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFileUploadDateLabelRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleFileSizeLabelRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleFileSizeLabelRef'), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, '_handleDimensionsLabelRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class2.prototype, '_handleDimensionsLabelRef'), _class2.prototype)), _class2)) || _class;

exports.default = TxlFileDetailsModal;


TxlFileDetailsModal.displayName = 'TxlFileDetailsModal';

TxlFileDetailsModal.propTypes = {
  dateUploaded: _react.PropTypes.instanceOf(Date),
  file: _react.PropTypes.instanceOf(File),
  fileURL: _react.PropTypes.string,
  imageHeight: _react.PropTypes.number,
  imageWidth: _react.PropTypes.number,
  isImage: _react.PropTypes.bool,
  onDismiss: _react.PropTypes.func
};

TxlFileDetailsModal.defaultProps = {
  dateUploaded: new Date(),
  isImage: false,
  onDismiss: _Base.NOOP
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(CLOSE_BUTTON_TEXT, 'CLOSE_BUTTON_TEXT', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(IMAGE_HEADER_TITLE, 'IMAGE_HEADER_TITLE', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(FILE_HEADER_TITLE, 'FILE_HEADER_TITLE', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(FILE_NAME_LABEL_TEXT, 'FILE_NAME_LABEL_TEXT', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(FILE_TYPE_LABEL_TEXT, 'FILE_TYPE_LABEL_TEXT', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(UPLOADED_ON_LABEL_TEXT, 'UPLOADED_ON_LABEL_TEXT', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(FILE_SIZE_LABEL_TEXT, 'FILE_SIZE_LABEL_TEXT', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(DIMENSIONS_LABEL_TEXT, 'DIMENSIONS_LABEL_TEXT', 'src/file-preview/FileDetailsModal.jsx');

  __REACT_HOT_LOADER__.register(TxlFileDetailsModal, 'TxlFileDetailsModal', 'src/file-preview/FileDetailsModal.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9maWxlLXByZXZpZXcvRmlsZURldGFpbHNNb2RhbC5qc3giXSwibmFtZXMiOlsiQ0xPU0VfQlVUVE9OX1RFWFQiLCJJTUFHRV9IRUFERVJfVElUTEUiLCJGSUxFX0hFQURFUl9USVRMRSIsIkZJTEVfTkFNRV9MQUJFTF9URVhUIiwiRklMRV9UWVBFX0xBQkVMX1RFWFQiLCJVUExPQURFRF9PTl9MQUJFTF9URVhUIiwiRklMRV9TSVpFX0xBQkVMX1RFWFQiLCJESU1FTlNJT05TX0xBQkVMX1RFWFQiLCJUeGxGaWxlRGV0YWlsc01vZGFsIiwicmVmIiwiX2ZpbGVOYW1lTGFiZWwiLCJfZmlsZVR5cGVMYWJlbCIsIl9maWxlVXBsb2FkRGF0ZUxhYmVsIiwiX2ZpbGVTaXplTGFiZWwiLCJfZGltZW5zaW9uc0xhYmVsIiwicHJvcHMiLCJkYXRlVXBsb2FkZWQiLCJmaWxlIiwiZmlsZVVSTCIsImlzSW1hZ2UiLCJpbWFnZUhlaWdodCIsImltYWdlV2lkdGgiLCJvbkRpc21pc3MiLCJmb290ZXIiLCJwcmV2aWV3U3R5bGUiLCJoZWFkZXIiLCJtYXRjaGVzIiwibmFtZSIsIm1hdGNoIiwiZmlsZU5hbWUiLCJmaWxlVHlwZSIsImZpbGVTaXplIiwic2l6ZSIsInVwbG9hZGVkT24iLCJmb3JtYXQiLCJkaW1lbnNpb25zIiwiX2hhbmRsZUZpbGVOYW1lTGFiZWxSZWYiLCJfaGFuZGxlRmlsZVR5cGVMYWJlbFJlZiIsIl9oYW5kbGVGaWxlVXBsb2FkRGF0ZUxhYmVsUmVmIiwiX2hhbmRsZUZpbGVTaXplTGFiZWxSZWYiLCJfaGFuZGxlRGltZW5zaW9uc0xhYmVsUmVmIiwiQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJpbnN0YW5jZU9mIiwiRGF0ZSIsIkZpbGUiLCJzdHJpbmciLCJudW1iZXIiLCJib29sIiwiZnVuYyIsImRlZmF1bHRQcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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VHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmFkaXVtIGZyb20gJ3JhZGl1bSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmltcG9ydCB7IGF1dG9iaW5kLCBOT09QIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCB7IGNvbnZlcnRCeXRlc1RvSHVtYW5SZWFkYWJsZUZvcm1hdCB9IGZyb20gJy4uL3V0aWxzL2Zvcm1hdHRlcic7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vbW9kYWxzL01vZGFsJztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vYnV0dG9ucy9CdXR0b24nO1xuaW1wb3J0IEZpbGVQbGFjZWhvbGRlckljb24gZnJvbSAnLi4vaWNvbnMvRmlsZVBsYWNlaG9sZGVyJztcbmltcG9ydCB7IENPTE9SX05FVVRSQUwgfSBmcm9tICcuLi9zdHlsZXMvdGhlbWUnO1xuaW1wb3J0IHtcbiAgRklMRV9JTkZPX1NUWUxFLFxuICBGSUxFX1BSRVZJRVdfQ09OVEFJTkVSX1NUWUxFLFxuICBJTUFHRV9QUkVWSUVXX0NPTlRBSU5FUl9TVFlMRSxcbiAgSU1BR0VfUFJFVklFV19TVFlMRSxcbiAgTU9EQUxfQ09OVEFJTkVSX1NUWUxFLFxufSBmcm9tICcuL0ZpbGVEZXRhaWxzTW9kYWwuc3R5bGUnO1xuXG4vLyBAVE9ETy1UUkFOU0xBVEVcbmNvbnN0IENMT1NFX0JVVFRPTl9URVhUID0gJ0Nsb3NlJztcbmNvbnN0IElNQUdFX0hFQURFUl9USVRMRSA9ICdJbWFnZSBEZXRhaWxzJztcbmNvbnN0IEZJTEVfSEVBREVSX1RJVExFID0gJ0ZpbGUgRGV0YWlscyc7XG5jb25zdCBGSUxFX05BTUVfTEFCRUxfVEVYVCA9ICdGaWxlIG5hbWU6ICc7XG5jb25zdCBGSUxFX1RZUEVfTEFCRUxfVEVYVCA9ICdGaWxlIHR5cGU6ICc7XG5jb25zdCBVUExPQURFRF9PTl9MQUJFTF9URVhUID0gJ1VwbG9hZGVkIG9uOiAnO1xuY29uc3QgRklMRV9TSVpFX0xBQkVMX1RFWFQgPSAnRmlsZSBzaXplOiAnO1xuY29uc3QgRElNRU5TSU9OU19MQUJFTF9URVhUID0gJ0RpbWVuc2lvbnM6ICc7XG5cbkBSYWRpdW1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR4bEZpbGVEZXRhaWxzTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBAYXV0b2JpbmRcbiAgX2hhbmRsZUZpbGVOYW1lTGFiZWxSZWYocmVmKSB7XG4gICAgdGhpcy5fZmlsZU5hbWVMYWJlbCA9IHJlZjtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRmlsZVR5cGVMYWJlbFJlZihyZWYpIHtcbiAgICB0aGlzLl9maWxlVHlwZUxhYmVsID0gcmVmO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVGaWxlVXBsb2FkRGF0ZUxhYmVsUmVmKHJlZikge1xuICAgIHRoaXMuX2ZpbGVVcGxvYWREYXRlTGFiZWwgPSByZWY7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZUZpbGVTaXplTGFiZWxSZWYocmVmKSB7XG4gICAgdGhpcy5fZmlsZVNpemVMYWJlbCA9IHJlZjtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBfaGFuZGxlRGltZW5zaW9uc0xhYmVsUmVmKHJlZikge1xuICAgIHRoaXMuX2RpbWVuc2lvbnNMYWJlbCA9IHJlZjtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRlVXBsb2FkZWQsXG4gICAgICBmaWxlLFxuICAgICAgZmlsZVVSTCxcbiAgICAgIGlzSW1hZ2UsXG4gICAgICBpbWFnZUhlaWdodCxcbiAgICAgIGltYWdlV2lkdGgsXG4gICAgICBvbkRpc21pc3MsXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBmb290ZXIgPSAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICB2YXJpYW50PVwiYWNjZW50XCJcbiAgICAgICAgICBvbkNsaWNrPXtvbkRpc21pc3N9XG4gICAgICAgID5cbiAgICAgICAgICB7Q0xPU0VfQlVUVE9OX1RFWFR9XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcblxuICAgIGNvbnN0IHByZXZpZXdTdHlsZSA9IGlzSW1hZ2UgPyBJTUFHRV9QUkVWSUVXX0NPTlRBSU5FUl9TVFlMRSA6IEZJTEVfUFJFVklFV19DT05UQUlORVJfU1RZTEU7XG5cblxuICAgIGNvbnN0IGhlYWRlciA9IGlzSW1hZ2UgPyBJTUFHRV9IRUFERVJfVElUTEUgOiBGSUxFX0hFQURFUl9USVRMRTtcbiAgICBjb25zdCBtYXRjaGVzID0gZmlsZS5uYW1lLm1hdGNoKC8oXltcXERcXGRdKylcXC4oW1xcd10rKSQvaSk7XG4gICAgY29uc3QgWywgZmlsZU5hbWUsIGZpbGVUeXBlXSA9IG1hdGNoZXMgfHwgW2ZpbGUubmFtZSwgZmlsZS5uYW1lLCAnJ107IC8vIGhhbmRsZSBtYXRjaGVzIGJlaW5nIG51bGxcbiAgICBjb25zdCBmaWxlU2l6ZSA9IGNvbnZlcnRCeXRlc1RvSHVtYW5SZWFkYWJsZUZvcm1hdChmaWxlLnNpemUpO1xuXG4gICAgY29uc3QgdXBsb2FkZWRPbiA9IG1vbWVudChkYXRlVXBsb2FkZWQpLmZvcm1hdCgnTU1NTSBERCwgWVlZWScpO1xuICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBgJHtpbWFnZVdpZHRofSB4ICR7aW1hZ2VIZWlnaHR9YDtcblxuICAgIHJldHVybiAoXG4gICAgICA8TW9kYWxcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgIGhlYWRlcj17aGVhZGVyfVxuICAgICAgICBmb290ZXI9e2Zvb3Rlcn1cbiAgICAgID5cbiAgICAgICAgPGRpdiBzdHlsZT17TU9EQUxfQ09OVEFJTkVSX1NUWUxFfT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPXtwcmV2aWV3U3R5bGV9PlxuICAgICAgICAgICAge2lzSW1hZ2UgJiZcbiAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIHN0eWxlPXtJTUFHRV9QUkVWSUVXX1NUWUxFfVxuICAgICAgICAgICAgICAgIHNyYz17ZmlsZVVSTH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHshaXNJbWFnZSAmJlxuICAgICAgICAgICAgICA8RmlsZVBsYWNlaG9sZGVySWNvblxuICAgICAgICAgICAgICAgIHNjYWxlPXs1fVxuICAgICAgICAgICAgICAgIGNvbG9yPXtDT0xPUl9ORVVUUkFMWycyMDAnXX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPXtGSUxFX0lORk9fU1RZTEV9PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAge0ZJTEVfTkFNRV9MQUJFTF9URVhUfVxuICAgICAgICAgICAgICA8c3BhbiByZWY9e3RoaXMuX2hhbmRsZUZpbGVOYW1lTGFiZWxSZWZ9PntmaWxlTmFtZX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHtGSUxFX1RZUEVfTEFCRUxfVEVYVH1cbiAgICAgICAgICAgICAgPHNwYW4gcmVmPXt0aGlzLl9oYW5kbGVGaWxlVHlwZUxhYmVsUmVmfT57ZmlsZVR5cGV9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICB7VVBMT0FERURfT05fTEFCRUxfVEVYVH1cbiAgICAgICAgICAgICAgPHNwYW4gcmVmPXt0aGlzLl9oYW5kbGVGaWxlVXBsb2FkRGF0ZUxhYmVsUmVmfT57dXBsb2FkZWRPbn08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHtGSUxFX1NJWkVfTEFCRUxfVEVYVH1cbiAgICAgICAgICAgICAgPHNwYW4gcmVmPXt0aGlzLl9oYW5kbGVGaWxlU2l6ZUxhYmVsUmVmfT57ZmlsZVNpemV9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7aW1hZ2VXaWR0aCAmJiBpbWFnZUhlaWdodCAmJlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHtESU1FTlNJT05TX0xBQkVMX1RFWFR9XG4gICAgICAgICAgICAgICAgPHNwYW4gcmVmPXt0aGlzLl9oYW5kbGVEaW1lbnNpb25zTGFiZWxSZWZ9PntkaW1lbnNpb25zfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICApO1xuICB9XG59XG5cblR4bEZpbGVEZXRhaWxzTW9kYWwuZGlzcGxheU5hbWUgPSAnVHhsRmlsZURldGFpbHNNb2RhbCc7XG5cblR4bEZpbGVEZXRhaWxzTW9kYWwucHJvcFR5cGVzID0ge1xuICBkYXRlVXBsb2FkZWQ6IFByb3BUeXBlcy5pbnN0YW5jZU9mKERhdGUpLFxuICBmaWxlOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihGaWxlKSxcbiAgZmlsZVVSTDogUHJvcFR5cGVzLnN0cmluZyxcbiAgaW1hZ2VIZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gIGltYWdlV2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGlzSW1hZ2U6IFByb3BUeXBlcy5ib29sLFxuICBvbkRpc21pc3M6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuVHhsRmlsZURldGFpbHNNb2RhbC5kZWZhdWx0UHJvcHMgPSB7XG4gIGRhdGVVcGxvYWRlZDogbmV3IERhdGUoKSxcbiAgaXNJbWFnZTogZmFsc2UsXG4gIG9uRGlzbWlzczogTk9PUCxcbn07XG4iXX0=