'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _desc, _value, _class;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _omit = require('lodash/omit');

var _omit2 = _interopRequireDefault(_omit);

var _Base = require('../base/Base');

var _TetheredPopoverTarget = require('../_popover/_TetheredPopoverTarget');

var _TetheredPopoverTarget2 = _interopRequireDefault(_TetheredPopoverTarget);

var _helpers = require('../styles/helpers');

var _HintDot = require('../notifications/_HintDot');

var _HintDot2 = _interopRequireDefault(_HintDot);

var _eventTargetAncestryComparator = require('../utils/eventTargetAncestryComparator');

var _eventTargetAncestryComparator2 = _interopRequireDefault(_eventTargetAncestryComparator);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var TETHER_CONFIGURATION = {
  attachment: 'center left',
  constraints: [{
    attachment: 'both',
    pin: true,
    to: 'window'
  }],
  optimizations: {
    moveElement: true
  },
  targetAttachment: 'center middle',
  targetOffset: '0 ' + (0, _helpers.gridUnits)(3)
};

var TxlTourPointTarget = (_class = function (_React$Component) {
  (0, _inherits3.default)(TxlTourPointTarget, _React$Component);

  function TxlTourPointTarget() {
    (0, _classCallCheck3.default)(this, TxlTourPointTarget);
    return (0, _possibleConstructorReturn3.default)(this, (TxlTourPointTarget.__proto__ || (0, _getPrototypeOf2.default)(TxlTourPointTarget)).apply(this, arguments));
  }

  (0, _createClass3.default)(TxlTourPointTarget, [{
    key: '_handleAwayClick',
    value: function _handleAwayClick(e) {
      if (!(0, _eventTargetAncestryComparator2.default)(e, this._popup)) {
        this.props.onAwayClick(e);
      }
    }
  }, {
    key: '_handleRef',
    value: function _handleRef(ref) {
      this._popup = ref;
      if (ref) {
        window.addEventListener('click', this._handleAwayClick, true);
      } else {
        window.removeEventListener('click', this._handleAwayClick, true);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          content = _props.content,
          onHintClick = _props.onHintClick,
          pulsing = _props.pulsing,
          style = _props.style,
          visible = _props.visible,
          otherProps = (0, _objectWithoutProperties3.default)(_props, ['content', 'onHintClick', 'pulsing', 'style', 'visible']);


      var safeProps = (0, _omit2.default)(otherProps, 'onAwayClick');

      var wrappedContent = _react2.default.createElement(
        'div',
        { ref: this._handleRef },
        content
      );
      return _react2.default.createElement(
        _TetheredPopoverTarget2.default,
        (0, _extends3.default)({}, safeProps, {
          componentName: 'TxlTourPointTargetBase',
          configuration: TETHER_CONFIGURATION,
          content: wrappedContent,
          onClick: onHintClick,
          style: style,
          visible: visible
        }),
        _react2.default.createElement(_HintDot2.default, { pulsing: pulsing })
      );
    }
  }]);
  return TxlTourPointTarget;
}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, '_handleAwayClick', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleAwayClick'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, '_handleRef', [_Base.autobind], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, '_handleRef'), _class.prototype)), _class);
exports.default = TxlTourPointTarget;


TxlTourPointTarget.defaultProps = {
  onAwayClick: Function.prototype,
  onHintClick: Function.prototype,
  visible: false
};

TxlTourPointTarget.propTypes = {
  content: _TetheredPopoverTarget2.default.propTypes.content,
  onAwayClick: _react.PropTypes.func,
  onHintClick: _react.PropTypes.func,
  pulsing: _react.PropTypes.bool,
  style: _TetheredPopoverTarget2.default.propTypes.style,
  visible: _TetheredPopoverTarget2.default.propTypes.visible
};
;

var _temp = function () {
  if (typeof __REACT_HOT_LOADER__ === 'undefined') {
    return;
  }

  __REACT_HOT_LOADER__.register(TETHER_CONFIGURATION, 'TETHER_CONFIGURATION', 'src/dropdowns/_TourPointTargetBase.jsx');

  __REACT_HOT_LOADER__.register(TxlTourPointTarget, 'TxlTourPointTarget', 'src/dropdowns/_TourPointTargetBase.jsx');
}();

;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kcm9wZG93bnMvX1RvdXJQb2ludFRhcmdldEJhc2UuanN4Il0sIm5hbWVzIjpbIlRFVEhFUl9DT05GSUdVUkFUSU9OIiwiYXR0YWNobWVudCIsImNvbnN0cmFpbnRzIiwicGluIiwidG8iLCJvcHRpbWl6YXRpb25zIiwibW92ZUVsZW1lbnQiLCJ0YXJnZXRBdHRhY2htZW50IiwidGFyZ2V0T2Zmc2V0IiwiVHhsVG91clBvaW50VGFyZ2V0IiwiZSIsIl9wb3B1cCIsInByb3BzIiwib25Bd2F5Q2xpY2siLCJyZWYiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUF3YXlDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb250ZW50Iiwib25IaW50Q2xpY2siLCJwdWxzaW5nIiwic3R5bGUiLCJ2aXNpYmxlIiwib3RoZXJQcm9wcyIsInNhZmVQcm9wcyIsIndyYXBwZWRDb250ZW50IiwiX2hhbmRsZVJlZiIsIkNvbXBvbmVudCIsImRlZmF1bHRQcm9wcyIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwicHJvcFR5cGVzIiwiZnVuYyIsImJvb2wiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUVBOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxJQUFNQSx1QkFBdUI7QUFDM0JDLGNBQVksYUFEZTtBQUUzQkMsZUFBYSxDQUFDO0FBQ1pELGdCQUFZLE1BREE7QUFFWkUsU0FBSyxJQUZPO0FBR1pDLFFBQUk7QUFIUSxHQUFELENBRmM7QUFPM0JDLGlCQUFlO0FBQ2JDLGlCQUFhO0FBREEsR0FQWTtBQVUzQkMsb0JBQWtCLGVBVlM7QUFXM0JDLHVCQUFtQix3QkFBRyxDQUFIO0FBWFEsQ0FBN0I7O0lBY3FCQyxrQjs7Ozs7Ozs7OztxQ0FHRkMsQyxFQUFHO0FBQ2xCLFVBQUksQ0FBQyw2Q0FBOEJBLENBQTlCLEVBQWlDLEtBQUtDLE1BQXRDLENBQUwsRUFBb0Q7QUFDbEQsYUFBS0MsS0FBTCxDQUFXQyxXQUFYLENBQXVCSCxDQUF2QjtBQUNEO0FBQ0Y7OzsrQkFHVUksRyxFQUFLO0FBQ2QsV0FBS0gsTUFBTCxHQUFjRyxHQUFkO0FBQ0EsVUFBSUEsR0FBSixFQUFTO0FBQ1BDLGVBQU9DLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLEtBQUtDLGdCQUF0QyxFQUF3RCxJQUF4RDtBQUNELE9BRkQsTUFFTztBQUNMRixlQUFPRyxtQkFBUCxDQUEyQixPQUEzQixFQUFvQyxLQUFLRCxnQkFBekMsRUFBMkQsSUFBM0Q7QUFDRDtBQUNGOzs7NkJBRVE7QUFBQSxtQkFVSCxJQVZHLENBRUxMLEtBRks7QUFBQSxVQUdITyxPQUhHLFVBR0hBLE9BSEc7QUFBQSxVQUlIQyxXQUpHLFVBSUhBLFdBSkc7QUFBQSxVQUtIQyxPQUxHLFVBS0hBLE9BTEc7QUFBQSxVQU1IQyxLQU5HLFVBTUhBLEtBTkc7QUFBQSxVQU9IQyxPQVBHLFVBT0hBLE9BUEc7QUFBQSxVQVFBQyxVQVJBOzs7QUFZUCxVQUFNQyxZQUFZLG9CQUFLRCxVQUFMLEVBQWlCLGFBQWpCLENBQWxCOztBQUVBLFVBQU1FLGlCQUNKO0FBQUE7QUFBQSxVQUFLLEtBQUssS0FBS0MsVUFBZjtBQUNHUjtBQURILE9BREY7QUFLQSxhQUNFO0FBQUE7QUFBQSxtQ0FDTU0sU0FETjtBQUVFLHlCQUFlLHdCQUZqQjtBQUdFLHlCQUFlekIsb0JBSGpCO0FBSUUsbUJBQVMwQixjQUpYO0FBS0UsbUJBQVNOLFdBTFg7QUFNRSxpQkFBT0UsS0FOVDtBQU9FLG1CQUFTQztBQVBYO0FBU0UsMkRBQVMsU0FBU0YsT0FBbEI7QUFURixPQURGO0FBYUQ7OztFQW5ENkMsZ0JBQU1PLFM7a0JBQWpDbkIsa0I7OztBQXNEckJBLG1CQUFtQm9CLFlBQW5CLEdBQWtDO0FBQ2hDaEIsZUFBYWlCLFNBQVNDLFNBRFU7QUFFaENYLGVBQWFVLFNBQVNDLFNBRlU7QUFHaENSLFdBQVM7QUFIdUIsQ0FBbEM7O0FBTUFkLG1CQUFtQnVCLFNBQW5CLEdBQStCO0FBQzdCYixXQUFTLGdDQUFzQmEsU0FBdEIsQ0FBZ0NiLE9BRFo7QUFFN0JOLGVBQWEsaUJBQVVvQixJQUZNO0FBRzdCYixlQUFhLGlCQUFVYSxJQUhNO0FBSTdCWixXQUFTLGlCQUFVYSxJQUpVO0FBSzdCWixTQUFPLGdDQUFzQlUsU0FBdEIsQ0FBZ0NWLEtBTFY7QUFNN0JDLFdBQVMsZ0NBQXNCUyxTQUF0QixDQUFnQ1Q7QUFOWixDQUEvQjs7Ozs7Ozs7Z0NBMUVNdkIsb0I7O2dDQWNlUyxrQiIsImZpbGUiOiJfVG91clBvaW50VGFyZ2V0QmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgb21pdCBmcm9tICdsb2Rhc2gvb21pdCc7XG5cbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vYmFzZS9CYXNlJztcbmltcG9ydCBUZXRoZXJlZFBvcG92ZXJUYXJnZXQgZnJvbSAnLi4vX3BvcG92ZXIvX1RldGhlcmVkUG9wb3ZlclRhcmdldCc7XG5pbXBvcnQgeyBncmlkVW5pdHMgYXMgZ3UgfSBmcm9tICcuLi9zdHlsZXMvaGVscGVycyc7XG5pbXBvcnQgSGludERvdCBmcm9tICcuLi9ub3RpZmljYXRpb25zL19IaW50RG90JztcbmltcG9ydCBldmVudFRhcmdldEFuY2VzdHJ5Q29tcGFyYXRvciBmcm9tICcuLi91dGlscy9ldmVudFRhcmdldEFuY2VzdHJ5Q29tcGFyYXRvcic7XG5cblxuY29uc3QgVEVUSEVSX0NPTkZJR1VSQVRJT04gPSB7XG4gIGF0dGFjaG1lbnQ6ICdjZW50ZXIgbGVmdCcsXG4gIGNvbnN0cmFpbnRzOiBbe1xuICAgIGF0dGFjaG1lbnQ6ICdib3RoJyxcbiAgICBwaW46IHRydWUsXG4gICAgdG86ICd3aW5kb3cnLFxuICB9XSxcbiAgb3B0aW1pemF0aW9uczoge1xuICAgIG1vdmVFbGVtZW50OiB0cnVlLFxuICB9LFxuICB0YXJnZXRBdHRhY2htZW50OiAnY2VudGVyIG1pZGRsZScsXG4gIHRhcmdldE9mZnNldDogYDAgJHtndSgzKX1gLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHhsVG91clBvaW50VGFyZ2V0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICBAYXV0b2JpbmRcbiAgX2hhbmRsZUF3YXlDbGljayhlKSB7XG4gICAgaWYgKCFldmVudFRhcmdldEFuY2VzdHJ5Q29tcGFyYXRvcihlLCB0aGlzLl9wb3B1cCkpIHtcbiAgICAgIHRoaXMucHJvcHMub25Bd2F5Q2xpY2soZSk7XG4gICAgfVxuICB9XG5cbiAgQGF1dG9iaW5kXG4gIF9oYW5kbGVSZWYocmVmKSB7XG4gICAgdGhpcy5fcG9wdXAgPSByZWY7XG4gICAgaWYgKHJlZikge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQXdheUNsaWNrLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQXdheUNsaWNrLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHJvcHM6IHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgb25IaW50Q2xpY2ssXG4gICAgICAgIHB1bHNpbmcsXG4gICAgICAgIHN0eWxlLFxuICAgICAgICB2aXNpYmxlLFxuICAgICAgICAuLi5vdGhlclByb3BzXG4gICAgICB9LFxuICAgIH0gPSB0aGlzO1xuXG4gICAgY29uc3Qgc2FmZVByb3BzID0gb21pdChvdGhlclByb3BzLCAnb25Bd2F5Q2xpY2snKTtcblxuICAgIGNvbnN0IHdyYXBwZWRDb250ZW50ID0gKFxuICAgICAgPGRpdiByZWY9e3RoaXMuX2hhbmRsZVJlZn0+XG4gICAgICAgIHtjb250ZW50fVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgICByZXR1cm4gKFxuICAgICAgPFRldGhlcmVkUG9wb3ZlclRhcmdldFxuICAgICAgICB7Li4uc2FmZVByb3BzfVxuICAgICAgICBjb21wb25lbnROYW1lPXsnVHhsVG91clBvaW50VGFyZ2V0QmFzZSd9XG4gICAgICAgIGNvbmZpZ3VyYXRpb249e1RFVEhFUl9DT05GSUdVUkFUSU9OfVxuICAgICAgICBjb250ZW50PXt3cmFwcGVkQ29udGVudH1cbiAgICAgICAgb25DbGljaz17b25IaW50Q2xpY2t9XG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgdmlzaWJsZT17dmlzaWJsZX1cbiAgICAgID5cbiAgICAgICAgPEhpbnREb3QgcHVsc2luZz17cHVsc2luZ30gLz5cbiAgICAgIDwvVGV0aGVyZWRQb3BvdmVyVGFyZ2V0PlxuICAgICk7XG4gIH1cbn1cblxuVHhsVG91clBvaW50VGFyZ2V0LmRlZmF1bHRQcm9wcyA9IHtcbiAgb25Bd2F5Q2xpY2s6IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgb25IaW50Q2xpY2s6IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgdmlzaWJsZTogZmFsc2UsXG59O1xuXG5UeGxUb3VyUG9pbnRUYXJnZXQucHJvcFR5cGVzID0ge1xuICBjb250ZW50OiBUZXRoZXJlZFBvcG92ZXJUYXJnZXQucHJvcFR5cGVzLmNvbnRlbnQsXG4gIG9uQXdheUNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25IaW50Q2xpY2s6IFByb3BUeXBlcy5mdW5jLFxuICBwdWxzaW5nOiBQcm9wVHlwZXMuYm9vbCxcbiAgc3R5bGU6IFRldGhlcmVkUG9wb3ZlclRhcmdldC5wcm9wVHlwZXMuc3R5bGUsXG4gIHZpc2libGU6IFRldGhlcmVkUG9wb3ZlclRhcmdldC5wcm9wVHlwZXMudmlzaWJsZSxcbn07XG4iXX0=